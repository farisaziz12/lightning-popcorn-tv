{"version":3,"file":"appBundle.js","sources":["../node_modules/@lightningjs/sdk/src/Settings/index.js","../node_modules/@lightningjs/sdk/src/Log/index.js","../node_modules/@michieljs/execute-as-promise/src/execute-as-promise.js","../node_modules/@lightningjs/sdk/src/Metrics/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/events.js","../node_modules/@lightningjs/sdk/src/helpers/autoSetupMixin.js","../node_modules/@lightningjs/sdk/src/helpers/easeExecution.js","../node_modules/@lightningjs/sdk/src/Utils/index.js","../node_modules/@lightningjs/sdk/src/Profile/index.js","../../../../../../.nvm/versions/node/v14.0.0/lib/node_modules/@lightningjs/cli/src/alias/lightningjs-core.js","../node_modules/@lightningjs/sdk/src/Lightning/index.js","../node_modules/@lightningjs/sdk/src/MediaPlayer/index.js","../node_modules/localCookie/module/localCookie.js","../node_modules/@lightningjs/sdk/src/Storage/index.js","../node_modules/@lightningjs/sdk/src/Router/utils/regex.js","../node_modules/@lightningjs/sdk/src/Router/utils/register.js","../node_modules/@lightningjs/sdk/src/Router/model/Request.js","../node_modules/@lightningjs/sdk/src/Router/model/Route.js","../node_modules/@lightningjs/sdk/src/Router/utils/route.js","../node_modules/@lightningjs/sdk/src/Router/utils/emit.js","../node_modules/@lightningjs/sdk/src/Router/utils/widgets.js","../node_modules/@lightningjs/sdk/src/Router/utils/components.js","../node_modules/@lightningjs/sdk/src/Router/utils/history.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/@lightningjs/sdk/src/Locale/index.js","../node_modules/@lightningjs/sdk/src/VersionLabel/index.js","../node_modules/@lightningjs/sdk/src/FpsCounter/index.js","../node_modules/@lightningjs/sdk/src/Language/index.js","../node_modules/@lightningjs/sdk/src/Registry/index.js","../node_modules/@lightningjs/sdk/src/Colors/utils.js","../node_modules/@lightningjs/sdk/src/Colors/index.js","../node_modules/@lightningjs/sdk/src/Application/index.js","../node_modules/@lightningjs/sdk/src/Router/utils/router.js","../node_modules/@lightningjs/sdk/src/Router/utils/helpers.js","../node_modules/@lightningjs/sdk/src/Router/utils/provider.js","../node_modules/@lightningjs/sdk/src/Router/transitions.js","../node_modules/@lightningjs/sdk/src/Router/utils/transition.js","../node_modules/@lightningjs/sdk/src/Router/utils/loader.js","../node_modules/@lightningjs/sdk/src/Router/base.js","../node_modules/@lightningjs/sdk/src/Router/index.js","../node_modules/@lightningjs/sdk/src/TV/defaults.js","../node_modules/@lightningjs/sdk/src/TV/index.js","../node_modules/@lightningjs/sdk/src/Purchase/index.js","../node_modules/@lightningjs/sdk/src/Pin/dialog.js","../node_modules/@lightningjs/sdk/src/Pin/index.js","../node_modules/@lightningjs/sdk/src/Launch/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/VideoTexture.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/index.js","../node_modules/@lightningjs/sdk/src/Ads/index.js","../node_modules/@lightningjs/sdk/src/Img/ScaledImageTexture.js","../node_modules/@lightningjs/sdk/src/Img/index.js","../src/lib/helpers.js","../src/shaders/Swirl.js","../src/components/AmbientBackground.js","../src/components/Button.js","../src/lib/api.js","../src/components/Backdrop.js","../src/components/Item.js","../src/components/ItemDescription.js","../src/components/Page.js","../node_modules/@lightningjs/ui/src/helpers/CollectionWrapper.js","../node_modules/@lightningjs/ui/src/helpers/Cursor.js","../node_modules/@lightningjs/ui/src/helpers/ItemWrapper.js","../node_modules/@lightningjs/ui/src/helpers/KeyWrapper.js","../node_modules/@lightningjs/ui/src/helpers/index.js","../node_modules/@lightningjs/ui/src/Grid.js","../node_modules/@lightningjs/ui/src/InputField.js","../node_modules/@lightningjs/ui/src/Key.js","../node_modules/@lightningjs/ui/src/Keyboard.js","../node_modules/@lightningjs/ui/src/List.js","../src/components/Strip.js","../src/widgets/Detail.js","../src/components/Key.js","../src/widgets/Dialog.js","../src/widgets/Menu.js","../src/widgets/InputField.js","../src/shaders/CutOut.js","../src/pages/Splash.js","../src/pages/Main.js","../src/lib/keyboardConfig.js","../src/pages/Search.js","../src/pages/Detail.js","../src/pages/Player.js","../src/lib/Factory.js","../src/lib/routerConfig.js","../src/App.js","../src/index.js"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst settings = {}\nconst subscribers = {}\n\nexport const initSettings = (appSettings, platformSettings) => {\n  settings['app'] = appSettings\n  settings['platform'] = platformSettings\n  settings['user'] = {}\n}\n\nconst publish = (key, value) => {\n  subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value))\n}\n\nconst dotGrab = (obj = {}, key) => {\n  if (obj === null) return undefined\n  const keys = key.split('.')\n  for (let i = 0; i < keys.length; i++) {\n    obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {}\n  }\n  return typeof obj === 'object' && obj !== null ? (Object.keys(obj).length ? obj : undefined) : obj\n}\n\nexport default {\n  get(type, key, fallback = undefined) {\n    const val = dotGrab(settings[type], key)\n    return val !== undefined ? val : fallback\n  },\n  has(type, key) {\n    return !!this.get(type, key)\n  },\n  set(key, value) {\n    settings['user'][key] = value\n    publish(key, value)\n  },\n  subscribe(key, callback) {\n    subscribers[key] = subscribers[key] || []\n    subscribers[key].push(callback)\n  },\n  unsubscribe(key, callback) {\n    if (callback) {\n      const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback)\n      index > -1 && subscribers[key].splice(index, 1)\n    } else {\n      if (key in subscribers) {\n        subscribers[key] = []\n      }\n    }\n  },\n  clearSubscribers() {\n    for (const key of Object.getOwnPropertyNames(subscribers)) {\n      delete subscribers[key]\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst prepLog = (type, args) => {\n  const colors = {\n    Info: 'green',\n    Debug: 'gray',\n    Warn: 'orange',\n    Error: 'red',\n  }\n\n  args = Array.from(args)\n  return [\n    '%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type),\n    'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px',\n    args,\n  ]\n}\n\nexport default {\n  info() {\n    Settings.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments))\n  },\n  debug() {\n    Settings.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments))\n  },\n  error() {\n    Settings.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments))\n  },\n  warn() {\n    Settings.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments))\n  },\n}\n","export default (method, args = null, context = null) => {\n  let result\n  if (method && typeof method === 'function') {\n    try {\n      result = method.apply(context, args)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n\n  // if it looks like a duck .. ehm ... promise and talks like a promise, let's assume it's a promise\n  if (\n    result !== null &&\n    typeof result === 'object' &&\n    result.then &&\n    typeof result.then === 'function'\n  ) {\n    return result\n  }\n  // otherwise make it into a promise\n  else {\n    return new Promise((resolve, reject) => {\n      if (result instanceof Error) {\n        reject(result)\n      } else {\n        resolve(result)\n      }\n    })\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nlet sendMetric = (type, event, params) => {\n  Log.info('Sending metric', type, event, params)\n}\n\nexport const initMetrics = config => {\n  sendMetric = config.sendMetric\n}\n\n// available metric per category\nconst metrics = {\n  app: ['launch', 'loaded', 'ready', 'close'],\n  page: ['view', 'leave'],\n  user: ['click', 'input'],\n  media: [\n    'abort',\n    'canplay',\n    'ended',\n    'pause',\n    'play',\n    // with some videos there occur almost constant suspend events ... should investigate\n    // 'suspend',\n    'volumechange',\n    'waiting',\n    'seeking',\n    'seeked',\n  ],\n}\n\n// error metric function (added to each category)\nconst errorMetric = (type, message, code, visible, params = {}) => {\n  params = { params, ...{ message, code, visible } }\n  sendMetric(type, 'error', params)\n}\n\nconst Metric = (type, events, options = {}) => {\n  return events.reduce(\n    (obj, event) => {\n      obj[event] = (name, params = {}) => {\n        params = { ...options, ...(name ? { name } : {}), ...params }\n        sendMetric(type, event, params)\n      }\n      return obj\n    },\n    {\n      error(message, code, params) {\n        errorMetric(type, message, code, params)\n      },\n      event(name, params) {\n        sendMetric(type, name, params)\n      },\n    }\n  )\n}\n\nconst Metrics = types => {\n  return Object.keys(types).reduce(\n    (obj, type) => {\n      // media metric works a bit different!\n      // it's a function that accepts a url and returns an object with the available metrics\n      // url is automatically passed as a param in every metric\n      type === 'media'\n        ? (obj[type] = url => Metric(type, types[type], { url }))\n        : (obj[type] = Metric(type, types[type]))\n      return obj\n    },\n    { error: errorMetric, event: sendMetric }\n  )\n}\n\nexport default Metrics(metrics)\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  abort: 'Abort',\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  durationchange: 'DurationChange',\n  emptied: 'Emptied',\n  encrypted: 'Encrypted',\n  ended: 'Ended',\n  error: 'Error',\n  interruptbegin: 'InterruptBegin',\n  interruptend: 'InterruptEnd',\n  loadeddata: 'LoadedData',\n  loadedmetadata: 'LoadedMetadata',\n  loadstart: 'LoadStart',\n  pause: 'Pause',\n  play: 'Play',\n  playing: 'Playing',\n  progress: 'Progress',\n  ratechange: 'Ratechange',\n  seeked: 'Seeked',\n  seeking: 'Seeking',\n  stalled: 'Stalled',\n  // suspend: 'Suspend', // this one is called a looooot for some videos\n  timeupdate: 'TimeUpdate',\n  volumechange: 'VolumeChange',\n  waiting: 'Waiting',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default (sourceObject, setup = () => {}) => {\n  let ready = false\n\n  const doSetup = () => {\n    if (ready === false) {\n      setup()\n      ready = true\n    }\n  }\n\n  return Object.keys(sourceObject).reduce((obj, key) => {\n    if (typeof sourceObject[key] === 'function') {\n      obj[key] = function() {\n        doSetup()\n        return sourceObject[key].apply(sourceObject, arguments)\n      }\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n      obj.__defineGetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject)\n      })\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n      obj.__defineSetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(\n          sourceObject,\n          arguments\n        )\n      })\n    } else {\n      obj[key] = sourceObject[key]\n    }\n    return obj\n  }, {})\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet timeout = null\n\nexport default (cb, delay) => {\n  clearTimeout(timeout)\n  timeout = setTimeout(() => {\n    cb()\n  }, delay)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet basePath\nlet proxyUrl\n\nexport const initUtils = config => {\n  basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'))\n\n  if (config.proxyUrl) {\n    proxyUrl = ensureUrlWithProtocol(config.proxyUrl)\n  }\n}\n\nexport default {\n  asset(relPath) {\n    return basePath + relPath\n  },\n  proxyUrl(url, options = {}) {\n    return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url\n  },\n  makeQueryString() {\n    return makeQueryString(...arguments)\n  },\n  // since imageworkers don't work without protocol\n  ensureUrlWithProtocol() {\n    return ensureUrlWithProtocol(...arguments)\n  },\n}\n\nexport const ensureUrlWithProtocol = url => {\n  if (/^\\/\\//.test(url)) {\n    return window.location.protocol + url\n  }\n  if (!/^(?:https?:)/i.test(url)) {\n    return window.location.origin + url\n  }\n  return url\n}\n\nexport const makeFullStaticPath = (pathname = '/', path) => {\n  // ensure path has traling slash\n  path = path.charAt(path.length - 1) !== '/' ? path + '/' : path\n\n  // if path is URL, we assume it's already the full static path, so we just return it\n  if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n    return path\n  }\n\n  if (path.charAt(0) === '/') {\n    return path\n  } else {\n    // cleanup the pathname (i.e. remove possible index.html)\n    pathname = cleanUpPathName(pathname)\n\n    // remove possible leading dot from path\n    path = path.charAt(0) === '.' ? path.substr(1) : path\n    // ensure path has leading slash\n    path = path.charAt(0) !== '/' ? '/' + path : path\n    return pathname + path\n  }\n}\n\nexport const cleanUpPathName = pathname => {\n  if (pathname.slice(-1) === '/') return pathname.slice(0, -1)\n  const parts = pathname.split('/')\n  if (parts[parts.length - 1].indexOf('.') > -1) parts.pop()\n  return parts.join('/')\n}\n\nconst makeQueryString = (url, options = {}, type = 'url') => {\n  // add operator as an option\n  options.operator = 'metrological' // Todo: make this configurable (via url?)\n  // add type (= url or qr) as an option, with url as the value\n  options[type] = url\n\n  return Object.keys(options)\n    .map(key => {\n      return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key])\n    })\n    .join('&')\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport { defaultProfile } from './defaults'\n\nlet getInfo = key => {\n  const profile = { ...defaultProfile, ...Settings.get('platform', 'profile') }\n  return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key])\n}\n\nlet setInfo = (key, params) => {\n  if (key in defaultProfile) defaultProfile[key] = params\n}\n\nexport const initProfile = config => {\n  getInfo = config.getInfo\n  setInfo = config.setInfo\n}\n\nconst getOrSet = (key, params) => (params ? setInfo(key, params) : getInfo(key))\n\n// public API\nexport default {\n  ageRating(params) {\n    return getOrSet('ageRating', params)\n  },\n  city(params) {\n    return getOrSet('city', params)\n  },\n  zipCode(params) {\n    return getOrSet('zipCode', params)\n  },\n  countryCode(params) {\n    return getOrSet('countryCode', params)\n  },\n  ip(params) {\n    return getOrSet('ip', params)\n  },\n  household(params) {\n    return getOrSet('household', params)\n  },\n  language(params) {\n    return getOrSet('language', params)\n  },\n  latlon(params) {\n    return getOrSet('latlon', params)\n  },\n  locale(params) {\n    return getOrSet('locale', params)\n  },\n  mac(params) {\n    return getOrSet('mac', params)\n  },\n  operator(params) {\n    return getOrSet('operator', params)\n  },\n  platform(params) {\n    return getOrSet('platform', params)\n  },\n  packages(params) {\n    return getOrSet('packages', params)\n  },\n  uid(params) {\n    return getOrSet('uid', params)\n  },\n  stbType(params) {\n    return getOrSet('stbType', params)\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default window.lng\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core'\nexport default Lightning\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Metrics from '../Metrics'\nimport Settings from '../Settings'\nimport Log from '../Log'\n\nconst events = [\n  'timeupdate',\n  'error',\n  'ended',\n  'loadeddata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'loadstart',\n  'seeking',\n  'seeked',\n  'encrypted',\n]\n\nlet mediaUrl = url => url\n\nexport const initMediaPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\nexport default class Mediaplayer extends Lightning.Component {\n  _construct() {\n    this._skipRenderToTexture = false\n    this._metrics = null\n    this._textureMode = Settings.get('platform', 'textureMode') || false\n    Log.info('Texture mode: ' + this._textureMode)\n    console.warn(\n      [\n        \"The 'MediaPlayer'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'VideoPlayer'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/videoplayer',\n      ].join('\\n\\n')\n    )\n  }\n\n  static _template() {\n    return {\n      Video: {\n        VideoWrap: {\n          VideoTexture: {\n            visible: false,\n            pivot: 0.5,\n            texture: { type: Lightning.textures.StaticTexture, options: {} },\n          },\n        },\n      },\n    }\n  }\n\n  set skipRenderToTexture(v) {\n    this._skipRenderToTexture = v\n  }\n\n  get textureMode() {\n    return this._textureMode\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  _init() {\n    //re-use videotag if already there\n    const videoEls = document.getElementsByTagName('video')\n    if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0]\n    else {\n      this.videoEl = document.createElement('video')\n      this.videoEl.setAttribute('id', 'video-player')\n      this.videoEl.style.position = 'absolute'\n      this.videoEl.style.zIndex = '1'\n      this.videoEl.style.display = 'none'\n      this.videoEl.setAttribute('width', '100%')\n      this.videoEl.setAttribute('height', '100%')\n\n      this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible'\n      document.body.appendChild(this.videoEl)\n    }\n    if (this.textureMode && !this._skipRenderToTexture) {\n      this._createVideoTexture()\n    }\n\n    this.eventHandlers = []\n  }\n\n  _registerListeners() {\n    events.forEach(event => {\n      const handler = e => {\n        if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n          this._metrics[event]({ currentTime: this.videoEl.currentTime })\n        }\n        this.fire(event, { videoElement: this.videoEl, event: e })\n      }\n      this.eventHandlers.push(handler)\n      this.videoEl.addEventListener(event, handler)\n    })\n  }\n\n  _deregisterListeners() {\n    Log.info('Deregistering event listeners MediaPlayer')\n    events.forEach((event, index) => {\n      this.videoEl.removeEventListener(event, this.eventHandlers[index])\n    })\n    this.eventHandlers = []\n  }\n\n  _attach() {\n    this._registerListeners()\n  }\n\n  _detach() {\n    this._deregisterListeners()\n    this.close()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n  }\n\n  _startUpdatingVideoTexture() {\n    if (this.textureMode && !this._skipRenderToTexture) {\n      const stage = this.stage\n      if (!this._updateVideoTexture) {\n        this._updateVideoTexture = () => {\n          if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n            const gl = stage.gl\n\n            const currentTime = new Date().getTime()\n\n            // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n            // We'll fallback to fixed 30fps in this case.\n            const frameCount = this.videoEl.webkitDecodedFrameCount\n\n            const mustUpdate = frameCount\n              ? this._lastFrame !== frameCount\n              : this._lastTime < currentTime - 30\n\n            if (mustUpdate) {\n              this._lastTime = currentTime\n              this._lastFrame = frameCount\n              try {\n                gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n                this._lastFrame = this.videoEl.webkitDecodedFrameCount\n                this.videoTextureView.visible = true\n\n                this.videoTexture.options.w = this.videoEl.videoWidth\n                this.videoTexture.options.h = this.videoEl.videoHeight\n                const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h\n                const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight\n                if (expectedAspectRatio > realAspectRatio) {\n                  this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio\n                  this.videoTextureView.scaleY = 1\n                } else {\n                  this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio\n                  this.videoTextureView.scaleX = 1\n                }\n              } catch (e) {\n                Log.error('texImage2d video', e)\n                this._stopUpdatingVideoTexture()\n                this.videoTextureView.visible = false\n              }\n              this.videoTexture.source.forceRenderUpdate()\n            }\n          }\n        }\n      }\n      if (!this._updatingVideoTexture) {\n        stage.on('frameStart', this._updateVideoTexture)\n        this._updatingVideoTexture = true\n      }\n    }\n  }\n\n  _stopUpdatingVideoTexture() {\n    if (this.textureMode) {\n      const stage = this.stage\n      stage.removeListener('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = false\n      this.videoTextureView.visible = false\n\n      if (this.videoTexture.options.source) {\n        const gl = stage.gl\n        gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n        gl.clearColor(0, 0, 0, 1)\n        gl.clear(gl.COLOR_BUFFER_BIT)\n      }\n    }\n  }\n\n  updateSettings(settings = {}) {\n    // The Component that 'consumes' the media player.\n    this._consumer = settings.consumer\n\n    if (this._consumer && this._consumer.getMediaplayerSettings) {\n      // Allow consumer to add settings.\n      settings = Object.assign(settings, this._consumer.getMediaplayerSettings())\n    }\n\n    if (!Lightning.Utils.equalValues(this._stream, settings.stream)) {\n      if (settings.stream && settings.stream.keySystem) {\n        navigator\n          .requestMediaKeySystemAccess(\n            settings.stream.keySystem.id,\n            settings.stream.keySystem.config\n          )\n          .then(keySystemAccess => {\n            return keySystemAccess.createMediaKeys()\n          })\n          .then(createdMediaKeys => {\n            return this.videoEl.setMediaKeys(createdMediaKeys)\n          })\n          .then(() => {\n            if (settings.stream && settings.stream.src) this.open(settings.stream.src)\n          })\n          .catch(() => {\n            console.error('Failed to set up MediaKeys')\n          })\n      } else if (settings.stream && settings.stream.src) {\n        // This is here to be backwards compatible, will be removed\n        // in future sdk release\n        if (Settings.get('app', 'hls')) {\n          if (!window.Hls) {\n            window.Hls = class Hls {\n              static isSupported() {\n                console.warn('hls-light not included')\n                return false\n              }\n            }\n          }\n          if (window.Hls.isSupported()) {\n            if (!this._hls) this._hls = new window.Hls({ liveDurationInfinity: true })\n            this._hls.loadSource(settings.stream.src)\n            this._hls.attachMedia(this.videoEl)\n            this.videoEl.style.display = 'block'\n          }\n        } else {\n          this.open(settings.stream.src)\n        }\n      } else {\n        this.close()\n      }\n      this._stream = settings.stream\n    }\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPos)\n  }\n\n  _setHide(hide) {\n    if (this.textureMode) {\n      this.tag('Video').setSmooth('alpha', hide ? 0 : 1)\n    } else {\n      this.videoEl.style.visibility = hide ? 'hidden' : 'visible'\n    }\n  }\n\n  open(url, settings = { hide: false, videoPosition: null }) {\n    // prep the media url to play depending on platform (mediaPlayerplugin)\n    url = mediaUrl(url)\n    this._metrics = Metrics.media(url)\n    Log.info('Playing stream', url)\n    if (this.application.noVideo) {\n      Log.info('noVideo option set, so ignoring: ' + url)\n      return\n    }\n    // close the video when opening same url as current (effectively reloading)\n    if (this.videoEl.getAttribute('src') === url) {\n      this.close()\n    }\n    this.videoEl.setAttribute('src', url)\n\n    // force hide, then force show (in next tick!)\n    // (fixes comcast playback rollover issue)\n    this.videoEl.style.visibility = 'hidden'\n    this.videoEl.style.display = 'none'\n\n    setTimeout(() => {\n      this.videoEl.style.display = 'block'\n      this.videoEl.style.visibility = 'visible'\n    })\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080])\n  }\n\n  close() {\n    // We need to pause first in order to stop sound.\n    this.videoEl.pause()\n    this.videoEl.removeAttribute('src')\n\n    // force load to reset everything without errors\n    this.videoEl.load()\n\n    this._clearSrc()\n\n    this.videoEl.style.display = 'none'\n  }\n\n  playPause() {\n    if (this.isPlaying()) {\n      this.doPause()\n    } else {\n      this.doPlay()\n    }\n  }\n\n  get muted() {\n    return this.videoEl.muted\n  }\n\n  set muted(v) {\n    this.videoEl.muted = v\n  }\n\n  get loop() {\n    return this.videoEl.loop\n  }\n\n  set loop(v) {\n    this.videoEl.loop = v\n  }\n\n  isPlaying() {\n    return this._getState() === 'Playing'\n  }\n\n  doPlay() {\n    this.videoEl.play()\n  }\n\n  doPause() {\n    this.videoEl.pause()\n  }\n\n  reload() {\n    var url = this.videoEl.getAttribute('src')\n    this.close()\n    this.videoEl.src = url\n  }\n\n  getPosition() {\n    return Promise.resolve(this.videoEl.currentTime)\n  }\n\n  setPosition(pos) {\n    this.videoEl.currentTime = pos\n  }\n\n  getDuration() {\n    return Promise.resolve(this.videoEl.duration)\n  }\n\n  seek(time, absolute = false) {\n    if (absolute) {\n      this.videoEl.currentTime = time\n    } else {\n      this.videoEl.currentTime += time\n    }\n  }\n\n  get videoTextureView() {\n    return this.tag('Video').tag('VideoTexture')\n  }\n\n  get videoTexture() {\n    return this.videoTextureView.texture\n  }\n\n  _setVideoArea(videoPos) {\n    if (Lightning.Utils.equalValues(this._videoPos, videoPos)) {\n      return\n    }\n\n    this._videoPos = videoPos\n\n    if (this.textureMode) {\n      this.videoTextureView.patch({\n        smooth: {\n          x: videoPos[0],\n          y: videoPos[1],\n          w: videoPos[2] - videoPos[0],\n          h: videoPos[3] - videoPos[1],\n        },\n      })\n    } else {\n      const precision = this.stage.getRenderPrecision()\n      this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px'\n      this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px'\n      this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px'\n      this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px'\n    }\n  }\n\n  _fireConsumer(event, args) {\n    if (this._consumer) {\n      this._consumer.fire(event, args)\n    }\n  }\n\n  _equalInitData(buf1, buf2) {\n    if (!buf1 || !buf2) return false\n    if (buf1.byteLength != buf2.byteLength) return false\n    const dv1 = new Int8Array(buf1)\n    const dv2 = new Int8Array(buf2)\n    for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false\n    return true\n  }\n\n  error(args) {\n    this._fireConsumer('$mediaplayerError', args)\n    this._setState('')\n    return ''\n  }\n\n  loadeddata(args) {\n    this._fireConsumer('$mediaplayerLoadedData', args)\n  }\n\n  play(args) {\n    this._fireConsumer('$mediaplayerPlay', args)\n  }\n\n  playing(args) {\n    this._fireConsumer('$mediaplayerPlaying', args)\n    this._setState('Playing')\n  }\n\n  canplay(args) {\n    this.videoEl.play()\n    this._fireConsumer('$mediaplayerStart', args)\n  }\n\n  loadstart(args) {\n    this._fireConsumer('$mediaplayerLoad', args)\n  }\n\n  seeked() {\n    this._fireConsumer('$mediaplayerSeeked', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  seeking() {\n    this._fireConsumer('$mediaplayerSeeking', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  durationchange(args) {\n    this._fireConsumer('$mediaplayerDurationChange', args)\n  }\n\n  encrypted(args) {\n    const video = args.videoElement\n    const event = args.event\n    // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n    if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n      this._previousInitData = event.initData\n      this._fireConsumer('$mediaplayerEncrypted', args)\n    }\n  }\n\n  static _states() {\n    return [\n      class Playing extends this {\n        $enter() {\n          this._startUpdatingVideoTexture()\n        }\n        $exit() {\n          this._stopUpdatingVideoTexture()\n        }\n        timeupdate() {\n          this._fireConsumer('$mediaplayerProgress', {\n            currentTime: this.videoEl.currentTime,\n            duration: this.videoEl.duration || 1,\n          })\n        }\n        ended(args) {\n          this._fireConsumer('$mediaplayerEnded', args)\n          this._setState('')\n        }\n        pause(args) {\n          this._fireConsumer('$mediaplayerPause', args)\n          this._setState('Playing.Paused')\n        }\n        _clearSrc() {\n          this._fireConsumer('$mediaplayerStop', {})\n          this._setState('')\n        }\n        static _states() {\n          return [class Paused extends this {}]\n        }\n      },\n    ]\n  }\n}\n","class localCookie{constructor(e){return e=e||{},this.forceCookies=e.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==e.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies}}_checkIfLocalStorageWorks(){if(\"undefined\"==typeof localStorage)return!1;try{return localStorage.setItem(\"feature_test\",\"yes\"),\"yes\"===localStorage.getItem(\"feature_test\")&&(localStorage.removeItem(\"feature_test\"),!0)}catch(e){return!1}}_getItemLocalStorage(e){return window.localStorage.getItem(e)}_setItemLocalStorage(e,t){return window.localStorage.setItem(e,t)}_removeItemLocalStorage(e){return window.localStorage.removeItem(e)}_clearLocalStorage(){return window.localStorage.clear()}_getItemCookie(e){var t=document.cookie.match(RegExp(\"(?:^|;\\\\s*)\"+function(e){return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")}(e)+\"=([^;]*)\"));return t&&\"\"===t[1]&&(t[1]=null),t?t[1]:null}_setItemCookie(e,t){var o=new Date,r=new Date(o.getTime()+15768e7);document.cookie=`${e}=${t}; expires=${r.toUTCString()};`}_removeItemCookie(e){document.cookie=`${e}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(\";\").forEach(e=>{document.cookie=e.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=Max-Age=-99999999\")})}}export default localCookie;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport localCookie from 'localCookie/module/localCookie.js'\n\nlet namespace\nlet lc\n\nexport const initStorage = () => {\n  namespace = Settings.get('platform', 'id')\n  // todo: pass options (for example to force the use of cookies)\n  lc = new localCookie()\n}\n\nconst namespacedKey = key => (namespace ? [namespace, key].join('.') : key)\n\nexport default {\n  get(key) {\n    try {\n      return JSON.parse(lc.getItem(namespacedKey(key)))\n    } catch (e) {\n      return null\n    }\n  },\n  set(key, value) {\n    try {\n      lc.setItem(namespacedKey(key), JSON.stringify(value))\n      return true\n    } catch (e) {\n      return false\n    }\n  },\n  remove(key) {\n    lc.removeItem(namespacedKey(key))\n  },\n  clear() {\n    if (namespace) {\n      lc.keys().forEach(key => {\n        // remove the item if in the namespace\n        key.indexOf(namespace + '.') === 0 ? lc.removeItem(key) : null\n      })\n    } else {\n      lc.clear()\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g\nexport const isWildcard = /^[!*$]$/\nexport const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/\nexport const isNamedGroup = /^\\/:/\n\n/**\n * Test if a route is part regular expressed\n * and replace it for a simple character\n * @param route\n * @returns {*}\n */\nexport const stripRegex = (route, char = 'R') => {\n  // if route is part regular expressed we replace\n  // the regular expression for a character to\n  // simplify floor calculation and backtracking\n  if (hasRegex.test(route)) {\n    route = route.replace(hasRegex, char)\n  }\n  return route\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Create a local request register\n * @param flags\n * @returns {Map<any, any>}\n */\nexport const createRegister = flags => {\n  const reg = new Map()\n  // store user defined and router\n  // defined flags in register\n  ;[...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n    reg.set(key, flags[key])\n  })\n  return reg\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isBoolean, isObject, symbols } from '../utils/helpers'\nimport { createRegister } from '../utils/register'\nimport Log from '../../Log'\n\nexport default class Request {\n  constructor(hash = '', navArgs, storeCaller) {\n    /**\n     * Hash we navigate to\n     * @type {string}\n     * @private\n     */\n    this._hash = hash\n\n    /**\n     * Do we store previous hash in history\n     * @type {boolean}\n     * @private\n     */\n    this._storeCaller = storeCaller\n\n    /**\n     * Request and navigate data\n     * @type {Map}\n     * @private\n     */\n    this._register = new Map()\n\n    /**\n     * Flag if the instance is created due to\n     * this request\n     * @type {boolean}\n     * @private\n     */\n    this._isCreated = false\n\n    /**\n     * Flag if the instance is shared between\n     * previous and current request\n     * @type {boolean}\n     * @private\n     */\n    this._isSharedInstance = false\n\n    /**\n     * Flag if the request has been cancelled\n     * @type {boolean}\n     * @private\n     */\n    this._cancelled = false\n\n    /**\n     * if instance is shared between requests we copy state object\n     * from instance before the new request overrides state\n     * @type {null}\n     * @private\n     */\n    this._copiedHistoryState = null\n\n    // if there are arguments attached to navigate()\n    // we store them in new request\n    if (isObject(navArgs)) {\n      this._register = createRegister(navArgs)\n    } else if (isBoolean(navArgs)) {\n      // if second navigate() argument is explicitly\n      // set to false we prevent the calling page\n      // from ending up in history\n      this._storeCaller = navArgs\n    }\n    // @todo: remove because we can simply check\n    // ._storeCaller property\n    this._register.set(symbols.store, this._storeCaller)\n  }\n\n  cancel() {\n    Log.debug('[router]:', `cancelled ${this._hash}`)\n    this._cancelled = true\n  }\n\n  get url() {\n    return this._hash\n  }\n\n  get register() {\n    return this._register\n  }\n\n  get hash() {\n    return this._hash\n  }\n\n  set hash(args) {\n    this._hash = args\n  }\n\n  get route() {\n    return this._route\n  }\n\n  set route(args) {\n    this._route = args\n  }\n\n  get provider() {\n    return this._provider\n  }\n\n  set provider(args) {\n    this._provider = args\n  }\n\n  get providerType() {\n    return this._providerType\n  }\n\n  set providerType(args) {\n    this._providerType = args\n  }\n\n  set page(args) {\n    this._page = args\n  }\n\n  get page() {\n    return this._page\n  }\n\n  set isCreated(args) {\n    this._isCreated = args\n  }\n\n  get isCreated() {\n    return this._isCreated\n  }\n\n  get isSharedInstance() {\n    return this._isSharedInstance\n  }\n\n  set isSharedInstance(args) {\n    this._isSharedInstance = args\n  }\n\n  get isCancelled() {\n    return this._cancelled\n  }\n\n  set copiedHistoryState(v) {\n    this._copiedHistoryState = v\n  }\n\n  get copiedHistoryState() {\n    return this._copiedHistoryState\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFunction } from '../utils/helpers'\n\nexport default class Route {\n  constructor(config = {}) {\n    // keep backwards compatible\n    let type = ['on', 'before', 'after'].reduce((acc, type) => {\n      return isFunction(config[type]) ? type : acc\n    }, undefined)\n\n    this._cfg = config\n    if (type) {\n      this._provider = {\n        type,\n        request: config[type],\n      }\n    }\n  }\n\n  get path() {\n    return this._cfg.path\n  }\n\n  get component() {\n    return this._cfg.component\n  }\n\n  get options() {\n    return this._cfg.options\n  }\n\n  get widgets() {\n    return this._cfg.widgets\n  }\n\n  get cache() {\n    return this._cfg.cache\n  }\n\n  get hook() {\n    return this._cfg.hook\n  }\n\n  get beforeNavigate() {\n    return this._cfg.beforeNavigate\n  }\n\n  get provider() {\n    return this._provider\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { hasRegex, hasLookupId, isNamedGroup, stripRegex } from './regex'\nimport { routes, routeExists, bootRequest, getRoutes } from './router'\nimport Request from '../model/Request'\nimport Route from '../model/Route'\nimport { objectToQueryString, isObject, isString } from './helpers'\n\n/**\n * Simple route length calculation\n * @param route {string}\n * @returns {number} - floor\n */\nexport const getFloor = route => {\n  return stripRegex(route).split('/').length\n}\n\n/**\n * return all stored routes that live on the same floor\n * @param floor\n * @returns {Array}\n */\nconst getRoutesByFloor = floor => {\n  const matches = []\n  // simple filter of level candidates\n  for (let [route] of routes.entries()) {\n    if (getFloor(route) === floor) {\n      matches.push(route)\n    }\n  }\n  return matches\n}\n\n/**\n * return a matching route by provided hash\n * hash: home/browse/12 will match:\n * route: home/browse/:categoryId\n * @param hash {string}\n * @returns {boolean|{}} - route\n */\nexport const getRouteByHash = hash => {\n  // @todo: clean up on handleHash\n  hash = hash.replace(/^#/, '')\n\n  const getUrlParts = /(\\/?:?[@!*\\w%\\s:-]+)/g\n  // grab possible candidates from stored routes\n  const candidates = getRoutesByFloor(getFloor(hash))\n  // break hash down in chunks\n  const hashParts = hash.match(getUrlParts) || []\n\n  // to simplify the route matching and prevent look around\n  // in our getUrlParts regex we get the regex part from\n  // route candidate and store them so that we can reference\n  // them when we perform the actual regex against hash\n  let regexStore = []\n\n  let matches = candidates.filter(route => {\n    let isMatching = true\n    // replace regex in route with lookup id => @@{storeId}@@\n    if (hasRegex.test(route)) {\n      const regMatches = route.match(hasRegex)\n      if (regMatches && regMatches.length) {\n        route = regMatches.reduce((fullRoute, regex) => {\n          const lookupId = regexStore.length\n          fullRoute = fullRoute.replace(regex, `@@${lookupId}@@`)\n          regexStore.push(regex.substring(1, regex.length - 1))\n          return fullRoute\n        }, route)\n      }\n    }\n\n    const routeParts = route.match(getUrlParts) || []\n\n    for (let i = 0, j = routeParts.length; i < j; i++) {\n      const routePart = routeParts[i]\n      const hashPart = hashParts[i]\n\n      // Since we support catch-all and regex driven name groups\n      // we first test for regex lookup id and see if the regex\n      // matches the value from the hash\n      if (hasLookupId.test(routePart)) {\n        const routeMatches = hasLookupId.exec(routePart)\n        const storeId = routeMatches[1]\n        const routeRegex = regexStore[storeId]\n\n        // split regex and modifiers so we can use both\n        // to create a new RegExp\n        // eslint-disable-next-line\n                const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex)\n\n        if (regMatches && regMatches.length) {\n          const expression = regMatches[1]\n          const modifiers = regMatches[2]\n\n          const regex = new RegExp(`^/${expression}$`, modifiers)\n\n          if (!regex.test(hashPart)) {\n            isMatching = false\n          }\n        }\n      } else if (isNamedGroup.test(routePart)) {\n        // we kindly skip namedGroups because this is dynamic\n        // we only need to the static and regex drive parts\n        continue\n      } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n        isMatching = false\n      }\n    }\n    return isMatching\n  })\n\n  if (matches.length) {\n    if (matches.indexOf(hash) !== -1) {\n      const match = matches[matches.indexOf(hash)]\n      return routes.get(match)\n    } else {\n      // we give prio to static routes over dynamic\n      matches = matches.sort(a => {\n        return isNamedGroup.test(a) ? -1 : 1\n      })\n      // would be strange if this fails\n      // but still we test\n      if (routeExists(matches[0])) {\n        return routes.get(matches[0])\n      }\n    }\n  }\n  return false\n}\n\nexport const getValuesFromHash = (hash = '', path) => {\n  // replace the regex definition from the route because\n  // we already did the matching part\n  path = stripRegex(path, '')\n\n  const getUrlParts = /(\\/?:?[\\w%\\s:.-]+)/g\n  const hashParts = hash.match(getUrlParts) || []\n  const routeParts = path.match(getUrlParts) || []\n  const getNamedGroup = /^\\/:([\\w-]+)\\/?/\n\n  return routeParts.reduce((storage, value, index) => {\n    const match = getNamedGroup.exec(value)\n    if (match && match.length) {\n      storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')))\n    }\n    return storage\n  }, new Map())\n}\n\nexport const getOption = (stack, prop) => {\n  // eslint-disable-next-line\n    if(stack && stack.hasOwnProperty(prop)){\n    return stack[prop]\n  }\n  // we explicitly return undefined since we're testing\n  // for explicit test values\n}\n\n/**\n * create and return new Route instance\n * @param config\n */\nexport const createRoute = config => {\n  // we need to provide a bit of additional logic\n  // for the bootComponent\n  if (config.path === '$') {\n    let options = {\n      preventStorage: true,\n    }\n    if (isObject(config.options)) {\n      options = {\n        ...config.options,\n        ...options,\n      }\n    }\n    config.options = options\n    // if configured add reference to bootRequest\n    // as router after provider\n    if (bootRequest) {\n      config.after = bootRequest\n    }\n  }\n  return new Route(config)\n}\n\n/**\n * Create a new Router request object\n * @param url\n * @param args\n * @param store\n * @returns {*}\n */\nexport const createRequest = (url, args, store) => {\n  return new Request(url, args, store)\n}\n\nexport const getHashByName = obj => {\n  if (!obj.to && !obj.name) {\n    return false\n  }\n  const route = getRouteByName(obj.to || obj.name)\n  const hasDynamicGroup = /\\/:([\\w-]+)\\/?/\n  let hash = route\n\n  // if route contains dynamic group\n  // we replace them with the provided params\n  if (hasDynamicGroup.test(route)) {\n    if (obj.params) {\n      const keys = Object.keys(obj.params)\n      hash = keys.reduce((acc, key) => {\n        return acc.replace(`:${key}`, obj.params[key])\n      }, route)\n    }\n    if (obj.query) {\n      return `${hash}${objectToQueryString(obj.query)}`\n    }\n  }\n  return hash\n}\n\nconst getRouteByName = name => {\n  for (let [path, route] of routes.entries()) {\n    if (route.name === name) {\n      return path\n    }\n  }\n  return false\n}\n\nexport const keepActivePageAlive = (route, request) => {\n  if (isString(route)) {\n    const routes = getRoutes()\n    if (routes.has(route)) {\n      route = routes.get(route)\n    } else {\n      return false\n    }\n  }\n\n  const register = request.register\n  const routeOptions = route.options\n\n  if (register.has('keepAlive')) {\n    return register.get('keepAlive')\n  } else if (routeOptions && routeOptions.keepAlive) {\n    return routeOptions.keepAlive\n  }\n\n  return false\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isArray, isFunction, ucfirst } from './helpers'\n\nexport default (page, events = [], params = {}) => {\n  if (!isArray(events)) {\n    events = [events]\n  }\n  events.forEach(e => {\n    const event = `_on${ucfirst(e)}`\n    if (isFunction(page[event])) {\n      page[event](params)\n    }\n  })\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { app, widgetsHost } from './router'\nimport { ucfirst } from './helpers'\nimport emit from './emit'\n\nlet activeWidget = null\n\nexport const getReferences = () => {\n  if (!widgetsHost) {\n    return\n  }\n  return widgetsHost.get().reduce((storage, widget) => {\n    const key = widget.ref.toLowerCase()\n    storage[key] = widget\n    return storage\n  }, {})\n}\n\n/**\n * update the visibility of the available widgets\n * for the current page / route\n * @param page\n */\nexport const updateWidgets = (widgets, page) => {\n  // force lowercase lookup\n  const configured = (widgets || []).map(ref => ref.toLowerCase())\n\n  widgetsHost.forEach(widget => {\n    widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1\n    if (widget.visible) {\n      emit(widget, ['activated'], page)\n    }\n  })\n  if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n    app._setState('')\n  }\n}\n\nconst getWidgetByName = name => {\n  name = ucfirst(name)\n  return widgetsHost.getByRef(name) || false\n}\n\n/**\n * delegate app focus to a on-screen widget\n * @param name - {string}\n */\nexport const focusWidget = name => {\n  const widget = getWidgetByName(name)\n  if (widget) {\n    setActiveWidget(widget)\n\n    // if app is already in 'Widgets' state we can assume that\n    // focus has been delegated from one widget to another so\n    // we need to set the new widget reference and trigger a\n    // new focus calculation of Lightning's focuspath\n    if (app.state === 'Widgets') {\n      app.reload(activeWidget)\n    } else {\n      app._setState('Widgets', [activeWidget])\n    }\n  }\n}\n\nexport const handleRemote = (type, name) => {\n  if (type === 'widget') {\n    focusWidget(name)\n  } else if (type === 'page') {\n    restoreFocus()\n  }\n}\n\nexport const restoreFocus = () => {\n  activeWidget = null\n  app._setState('')\n}\n\nexport const getActiveWidget = () => {\n  return activeWidget\n}\n\nexport const setActiveWidget = instance => {\n  activeWidget = instance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getReferences } from './widgets'\n\nexport const createComponent = (stage, type) => {\n  return stage.c({\n    type,\n    visible: false,\n    widgets: getReferences(),\n  })\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getActiveHash, getActivePage } from './router'\nimport { getOption, getRouteByHash } from './route'\nimport { isFunction, isObject, isArray, isBoolean, symbols } from './helpers'\nimport { getRouterConfig } from './router'\n\n/**\n * Simple flat array that holds the visited hashes + state Object\n * so the router can navigate back to them\n * @type {Array}\n */\nlet history = []\n\nexport const updateHistory = request => {\n  const hash = getActiveHash()\n  if (!hash) {\n    return\n  }\n\n  // navigate storage flag\n  const register = request.register\n  const forceNavigateStore = register.get(symbols.store)\n\n  // test preventStorage on route configuration\n  const activeRoute = getRouteByHash(hash)\n  const preventStorage = getOption(activeRoute.options, 'preventStorage')\n\n  // we give prio to navigate storage flag\n  let store = isBoolean(forceNavigateStore) ? forceNavigateStore : !preventStorage\n\n  if (store) {\n    const toStore = hash.replace(/^\\//, '')\n    const location = locationInHistory(toStore)\n    const stateObject = getStateObject(getActivePage(), request)\n    const routerConfig = getRouterConfig()\n\n    // store hash if it's not a part of history or flag for\n    // storage of same hash is true\n    if (location === -1 || routerConfig.get('storeSameHash')) {\n      history.push({ hash: toStore, state: stateObject })\n    } else {\n      // if we visit the same route we want to sync history\n      const prev = history.splice(location, 1)[0]\n      history.push({ hash: prev.hash, state: stateObject })\n    }\n  }\n}\n\nconst locationInHistory = hash => {\n  for (let i = 0; i < history.length; i++) {\n    if (history[i].hash === hash) {\n      return i\n    }\n  }\n  return -1\n}\n\nexport const getHistoryState = hash => {\n  let state = null\n  if (history.length) {\n    // if no hash is provided we get the last\n    // pushed history record\n    if (!hash) {\n      const record = history[history.length - 1]\n      // could be null\n      state = record.state\n    } else {\n      if (locationInHistory(hash) !== -1) {\n        const record = history[locationInHistory(hash)]\n        state = record.state\n      }\n    }\n  }\n  return state\n}\n\nexport const replaceHistoryState = (state = null, hash) => {\n  if (!history.length) {\n    return\n  }\n  const location = hash ? locationInHistory(hash) : history.length - 1\n  if (location !== -1 && isObject(state)) {\n    history[location].state = state\n  }\n}\n\nconst getStateObject = (page, request) => {\n  // if the new request shared instance with the\n  // previous request we used the copied state object\n  if (request.isSharedInstance) {\n    if (request.copiedHistoryState) {\n      return request.copiedHistoryState\n    }\n  } else if (page && isFunction(page.historyState)) {\n    return page.historyState()\n  }\n  return null\n}\n\nexport const getHistory = () => {\n  return history.slice(0)\n}\n\nexport const setHistory = (arr = []) => {\n  if (isArray(arr)) {\n    history = arr\n  }\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple module for localization of strings.\n *\n * How to use:\n * 1. Create localization file with following JSON format:\n * {\n *   \"en\" :{\n *     \"how\": \"How do you want your egg today?\",\n *     \"boiledEgg\": \"Boiled egg\",\n *     \"softBoiledEgg\": \"Soft-boiled egg\",\n *     \"choice\": \"How to choose the egg\",\n *     \"buyQuestion\": \"I'd like to buy {0} eggs, {1} dollars each.\"\n *   },\n *\n *   \"it\": {\n *     \"how\": \"Come vuoi il tuo uovo oggi?\",\n *     \"boiledEgg\": \"Uovo sodo\",\n *     \"softBoiledEgg\": \"Uovo alla coque\",\n *     \"choice\": \"Come scegliere l'uovo\",\n *     \"buyQuestion\": \"Mi piacerebbe comprare {0} uova, {1} dollari ciascuna.\"\n *   }\n * }\n *\n * 2. Use Locale's module load method, specifying path to your localization file and set chosen language, e.g.:\n *    > Locale.load('static/locale/locale.json');\n *    > Locale.setLanguage('en');\n *\n * 3. Use localization strings:\n *    > console.log(Locale.tr.how);\n *    How do you want your egg today?\n *    > console.log(Locale.tr.boiledEgg);\n *    Boiled egg\n *\n * 4. String formatting\n *    > console.log(Locale.tr.buyQuestion.format(10, 0.5));\n *    I'd like to buy 10 eggs, 0.5 dollars each.\n */\n\nimport Log from '../Log'\n\nlet warned = false\nconst deprecated = (force = false) => {\n  if (force === true || warned === false) {\n    console.warn(\n      [\n        \"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'Language'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/language',\n      ].join('\\n\\n')\n    )\n  }\n  warned = true\n}\nclass Locale {\n  constructor() {\n    this.__enabled = false\n  }\n\n  /**\n   * Loads translation object from external json file.\n   *\n   * @param {String} path Path to resource.\n   * @return {Promise}\n   */\n  async load(path) {\n    if (!this.__enabled) {\n      return\n    }\n\n    await fetch(path)\n      .then(resp => resp.json())\n      .then(resp => {\n        this.loadFromObject(resp)\n      })\n  }\n\n  /**\n   * Sets language used by module.\n   *\n   * @param {String} lang\n   */\n  setLanguage(lang) {\n    deprecated()\n    this.__enabled = true\n    this.language = lang\n  }\n\n  /**\n   * Returns reference to translation object for current language.\n   *\n   * @return {Object}\n   */\n  get tr() {\n    deprecated(true)\n    return this.__trObj[this.language]\n  }\n\n  /**\n   * Loads translation object from existing object (binds existing object).\n   *\n   * @param {Object} trObj\n   */\n  loadFromObject(trObj) {\n    deprecated()\n    const fallbackLanguage = 'en'\n    if (Object.keys(trObj).indexOf(this.language) === -1) {\n      Log.warn('No translations found for: ' + this.language)\n      if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n        Log.warn('Using fallback language: ' + fallbackLanguage)\n        this.language = fallbackLanguage\n      } else {\n        const error = 'No translations found for fallback language: ' + fallbackLanguage\n        Log.error(error)\n        throw Error(error)\n      }\n    }\n\n    this.__trObj = trObj\n    for (const lang of Object.values(this.__trObj)) {\n      for (const str of Object.keys(lang)) {\n        lang[str] = new LocalizedString(lang[str])\n      }\n    }\n  }\n}\n\n/**\n * Extended string class used for localization.\n */\nclass LocalizedString extends String {\n  /**\n   * Returns formatted LocalizedString.\n   * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n   *\n   * E.g.:\n   * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n   * A and B and A\n   *\n   * @param  {...any} args List of arguments for placeholders.\n   */\n  format(...args) {\n    const sub = args.reduce((string, arg, index) => string.split(`{${index}}`).join(arg), this)\n    return new LocalizedString(sub)\n  }\n}\n\nexport default new Locale()\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class VersionLabel extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xbb0078ac,\n      h: 40,\n      w: 100,\n      x: w => w - 50,\n      y: h => h - 50,\n      mount: 1,\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 5,\n        x: 20,\n        text: {\n          fontSize: 22,\n          lineHeight: 26,\n        },\n      },\n    }\n  }\n\n  _firstActive() {\n    this.tag('Text').text = `APP - v${this.version}\\nSDK - v${this.sdkVersion}`\n    this.tag('Text').loadTexture()\n    this.w = this.tag('Text').renderWidth + 40\n    this.h = this.tag('Text').renderHeight + 5\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\nimport Log from '../Log'\nexport default class FpsIndicator extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(80, 80, 40),\n      h: 80,\n      w: 80,\n      x: 100,\n      y: 100,\n      mount: 1,\n      Background: {\n        x: 3,\n        y: 3,\n        texture: Lightning.Tools.getRoundRect(72, 72, 36),\n        color: 0xff008000,\n      },\n      Counter: {\n        w: w => w,\n        h: h => h,\n        y: 10,\n        text: {\n          fontSize: 32,\n          textAlign: 'center',\n        },\n      },\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 48,\n        text: {\n          fontSize: 15,\n          textAlign: 'center',\n          text: 'FPS',\n        },\n      },\n    }\n  }\n\n  _setup() {\n    this.config = {\n      ...{\n        log: false,\n        interval: 500,\n        threshold: 1,\n      },\n      ...Settings.get('platform', 'showFps'),\n    }\n\n    this.fps = 0\n    this.lastFps = this.fps - this.config.threshold\n\n    const fpsCalculator = () => {\n      this.fps = ~~(1 / this.stage.dt)\n    }\n    this.stage.on('frameStart', fpsCalculator)\n    this.stage.off('framestart', fpsCalculator)\n    this.interval = setInterval(this.showFps.bind(this), this.config.interval)\n  }\n\n  _firstActive() {\n    this.showFps()\n  }\n\n  _detach() {\n    clearInterval(this.interval)\n  }\n\n  showFps() {\n    if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return\n    this.lastFps = this.fps\n    // green\n    let bgColor = 0xff008000\n    // orange\n    if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500\n    // red\n    else if (this.fps <= 20) bgColor = 0xffff0000\n\n    this.tag('Background').setSmooth('color', bgColor)\n    this.tag('Counter').text = `${this.fps}`\n\n    this.config.log && Log.info('FPS', this.fps)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Utils from '../Utils'\n\nlet meta = {}\nlet translations = {}\nlet language = null\nlet dictionary = null\n\nexport const initLanguage = (file, language = null) => {\n  return new Promise((resolve, reject) => {\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        setTranslations(json)\n        // set language (directly or in a promise)\n        typeof language === 'object' && 'then' in language && typeof language.then === 'function'\n          ? language\n              .then(lang =>\n                setLanguage(lang)\n                  .then(resolve)\n                  .catch(reject)\n              )\n              .catch(e => {\n                Log.error(e)\n                reject(e)\n              })\n          : setLanguage(language)\n              .then(resolve)\n              .catch(reject)\n      })\n      .catch(() => {\n        const error = 'Language file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst setTranslations = obj => {\n  if ('meta' in obj) {\n    meta = { ...obj.meta }\n    delete obj.meta\n  }\n  translations = obj\n}\n\nconst getLanguage = () => {\n  return language\n}\n\nconst setLanguage = lng => {\n  language = null\n  dictionary = null\n\n  return new Promise((resolve, reject) => {\n    if (lng in translations) {\n      language = lng\n    } else {\n      if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n        language = meta.map[lng]\n      } else if ('default' in meta && meta.default in translations) {\n        const error =\n          'Translations for Language ' +\n          language +\n          ' not found. Using default language ' +\n          meta.default\n        Log.warn(error)\n        language = meta.default\n      } else {\n        const error = 'Translations for Language ' + language + ' not found.'\n        Log.error(error)\n        reject(error)\n      }\n    }\n\n    if (language) {\n      Log.info('Setting language to', language)\n\n      const translationsObj = translations[language]\n      if (typeof translationsObj === 'object') {\n        dictionary = translationsObj\n        resolve()\n      } else if (typeof translationsObj === 'string') {\n        const url = Utils.asset(translationsObj)\n\n        fetch(url)\n          .then(response => response.json())\n          .then(json => {\n            // save the translations for this language (to prevent loading twice)\n            translations[language] = json\n            dictionary = json\n            resolve()\n          })\n          .catch(e => {\n            const error = 'Error while fetching ' + url\n            Log.error(error, e)\n            reject(error)\n          })\n      }\n    }\n  })\n}\n\nexport default {\n  translate(key) {\n    let replacements = [...arguments].slice(1)\n\n    // no replacements so just translated string\n    if (replacements.length === 0) {\n      return (dictionary && dictionary[key]) || key\n    } else {\n      if (replacements.length === 1 && typeof replacements[0] === 'object') {\n        replacements = replacements.pop()\n      }\n\n      return Object.keys(\n        // maps array input to an object {0: 'item1', 1: 'item2'}\n        Array.isArray(replacements) ? Object.assign({}, replacements) : replacements\n      ).reduce((text, replacementKey) => {\n        return text.replace(\n          new RegExp('{\\\\s?' + replacementKey + '\\\\s?}', 'g'),\n          replacements[replacementKey]\n        )\n      }, (dictionary && dictionary[key]) || key)\n    }\n  },\n\n  translations(obj) {\n    setTranslations(obj)\n  },\n\n  set(language) {\n    return setLanguage(language)\n  },\n\n  get() {\n    return getLanguage()\n  },\n\n  available() {\n    const languageKeys = Object.keys(translations)\n    return languageKeys.map(key => ({ code: key, name: (meta.names && meta.names[key]) || key }))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nconst registry = {\n  eventListeners: [],\n  timeouts: [],\n  intervals: [],\n  targets: [],\n}\n\nexport default {\n  // Timeouts\n  setTimeout(cb, timeout, ...params) {\n    const timeoutId = setTimeout(\n      () => {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n        cb.apply(null, params)\n      },\n      timeout,\n      params\n    )\n    Log.info('Set Timeout', 'ID: ' + timeoutId)\n    registry.timeouts.push(timeoutId)\n    return timeoutId\n  },\n\n  clearTimeout(timeoutId) {\n    if (registry.timeouts.indexOf(timeoutId) > -1) {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n      Log.info('Clear Timeout', 'ID: ' + timeoutId)\n      clearTimeout(timeoutId)\n    } else {\n      Log.error('Clear Timeout', 'ID ' + timeoutId + ' not found')\n    }\n  },\n\n  clearTimeouts() {\n    registry.timeouts.forEach(timeoutId => {\n      this.clearTimeout(timeoutId)\n    })\n  },\n\n  // Intervals\n  setInterval(cb, interval, ...params) {\n    const intervalId = setInterval(\n      () => {\n        registry.intervals.filter(id => id !== intervalId)\n        cb.apply(null, params)\n      },\n      interval,\n      params\n    )\n    Log.info('Set Interval', 'ID: ' + intervalId)\n    registry.intervals.push(intervalId)\n    return intervalId\n  },\n\n  clearInterval(intervalId) {\n    if (registry.intervals.indexOf(intervalId) > -1) {\n      registry.intervals = registry.intervals.filter(id => id !== intervalId)\n      Log.info('Clear Interval', 'ID: ' + intervalId)\n      clearInterval(intervalId)\n    } else {\n      Log.error('Clear Interval', 'ID ' + intervalId + ' not found')\n    }\n  },\n\n  clearIntervals() {\n    registry.intervals.forEach(intervalId => {\n      this.clearInterval(intervalId)\n    })\n  },\n\n  // Event listeners\n  addEventListener(target, event, handler) {\n    target.addEventListener(event, handler)\n    const targetIndex =\n      registry.targets.indexOf(target) > -1\n        ? registry.targets.indexOf(target)\n        : registry.targets.push(target) - 1\n\n    registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {}\n    registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || []\n    registry.eventListeners[targetIndex][event].push(handler)\n    Log.info(\n      'Add eventListener',\n      'Target:',\n      target,\n      'Event: ' + event,\n      'Handler:',\n      handler.toString()\n    )\n  },\n\n  removeEventListener(target, event, handler) {\n    const targetIndex = registry.targets.indexOf(target)\n    if (\n      targetIndex > -1 &&\n      registry.eventListeners[targetIndex] &&\n      registry.eventListeners[targetIndex][event] &&\n      registry.eventListeners[targetIndex][event].indexOf(handler) > -1\n    ) {\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][\n        event\n      ].filter(fn => fn !== handler)\n      Log.info(\n        'Remove eventListener',\n        'Target:',\n        target,\n        'Event: ' + event,\n        'Handler:',\n        handler.toString()\n      )\n      target.removeEventListener(event, handler)\n    } else {\n      Log.error(\n        'Remove eventListener',\n        'Not found',\n        'Target',\n        target,\n        'Event: ' + event,\n        'Handler',\n        handler.toString()\n      )\n    }\n  },\n\n  // if `event` is omitted, removes all registered event listeners for target\n  // if `target` is also omitted, removes all registered event listeners\n  removeEventListeners(target, event) {\n    if (target && event) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        registry.eventListeners[targetIndex][event].forEach(handler => {\n          this.removeEventListener(target, event, handler)\n        })\n      }\n    } else if (target) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n          this.removeEventListeners(target, _event)\n        })\n      }\n    } else {\n      Object.keys(registry.eventListeners).forEach(targetIndex => {\n        this.removeEventListeners(registry.targets[targetIndex])\n      })\n    }\n  },\n\n  // Clear everything (to be called upon app close for proper cleanup)\n  clear() {\n    this.clearTimeouts()\n    this.clearIntervals()\n    this.removeEventListeners()\n    registry.eventListeners = []\n    registry.timeouts = []\n    registry.intervals = []\n    registry.targets = []\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const getRgbaComponents = argb => {\n  return {\n    r: ((argb / 65536) | 0) % 256,\n    g: ((argb / 256) | 0) % 256,\n    b: (argb * 1) % 256,\n    a: (argb / 16777216) | 0,\n  }\n}\n\nexport const limitWithinRange = (num, min, max) => {\n  return Math.min(Math.max(num, min), max)\n}\n\nexport const mergeColors = (c1, c2, p) => {\n  let r1 = ((c1 / 65536) | 0) % 256\n  let g1 = ((c1 / 256) | 0) % 256\n  let b1 = c1 % 256\n  let a1 = (c1 / 16777216) | 0\n  let r2 = ((c2 / 65536) | 0) % 256\n  let g2 = ((c2 / 256) | 0) % 256\n  let b2 = c2 % 256\n  let a2 = (c2 / 16777216) | 0\n  let r = r1 * p + r2 * (1 - p)\n  let g = g1 * p + g2 * (1 - p)\n  let b = b1 * p + b2 * (1 - p)\n  let a = a1 * p + a2 * (1 - p)\n  return Math.round(a) * 16777216 + Math.round(r) * 65536 + Math.round(g) * 256 + Math.round(b)\n}\n\nexport const calculateAlpha = (argb, p) => {\n  if (p > 1) {\n    p /= 100\n  } else if (p < 0) {\n    p = 0\n  }\n  let r = ((argb / 65536) | 0) % 256\n  let g = ((argb / 256) | 0) % 256\n  let b = argb % 256\n  return (r << 16) + (g << 8) + b + ((p * 255) | 0) * 16777216\n}\n\nexport const mergeColorAlpha = (c, alpha) => {\n  let a = (((c / 16777216) | 0) * alpha) | 0\n  return (\n    (((((c >> 16) & 0xff) * a) / 255) & 0xff) +\n    ((((c & 0xff00) * a) / 255) & 0xff00) +\n    (((((c & 0xff) << 16) * a) / 255) & 0xff0000) +\n    (a << 24)\n  )\n}\n\nconst getArgbNumber = rgba => {\n  rgba[0] = Math.max(0, Math.min(255, rgba[0]))\n  rgba[1] = Math.max(0, Math.min(255, rgba[1]))\n  rgba[2] = Math.max(0, Math.min(255, rgba[2]))\n  rgba[3] = Math.max(0, Math.min(255, rgba[3]))\n  let v = ((rgba[3] | 0) << 24) + ((rgba[0] | 0) << 16) + ((rgba[1] | 0) << 8) + (rgba[2] | 0)\n  if (v < 0) {\n    v = 0xffffffff + v + 1\n  }\n  return v\n}\n\nexport const argbToHsva = argb => {\n  const color = getRgbaComponents(argb)\n  let r = color.r / 255\n  let g = color.g / 255\n  let b = color.b / 255\n  let h = 0\n  let s = 0\n\n  const cMax = Math.max(r, g, b)\n  const cMin = Math.min(r, g, b)\n  const delta = cMax - cMin\n\n  //calculate hue\n  if (delta < 0.00001) {\n    h = 0\n  } else if (cMax !== 0 || cMin !== 0) {\n    if (r === cMax) {\n      h = (60 * ((g - b) / delta) + 360) % 360\n    } else if (g === cMax) {\n      h = (60 * ((b - r) / delta) + 120) % 360\n    } else if (b === cMax) {\n      h = (60 * ((r - g) / delta) + 240) % 360\n    }\n  }\n\n  //calc saturation\n  if (cMax > 0) {\n    s = delta / cMax\n  }\n  return {\n    h,\n    s,\n    v: cMax,\n    a: color.a / 255,\n  }\n}\n\nexport const hsvaToArgb = color => {\n  const h = color.h\n  const c = color.v * color.s\n  const m = color.v - c\n  const x = c * (1.0 - Math.abs(((h / 60) % 2) - 1))\n  let r = 0\n  let g = 0\n  let b = 0\n\n  if (0 <= h && h < 60) {\n    r = c\n    g = x\n  } else if (60 <= h && h < 120) {\n    r = x\n    g = c\n  } else if (120 <= h && h < 180) {\n    g = c\n    b = x\n  } else if (180 <= h && h < 240) {\n    g = x\n    b = c\n  } else if (240 <= h && h < 300) {\n    r = x\n    b = c\n  } else if (300 <= h && h < 360) {\n    r = c\n    b = x\n  }\n\n  r = Math.round((r + m) * 255.0)\n  g = Math.round((g + m) * 255.0)\n  b = Math.round((b + m) * 255.0)\n  return getArgbNumber([r, g, b, color.a * 255])\n}\n\nexport const argbToHSLA = argb => {\n  const col = getRgbaComponents(argb)\n  const r = col.r / 255\n  const g = col.g / 255\n  const b = col.b / 255\n\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n\n  let h = 0\n  let s = 0\n  const l = (min + max) * 0.5\n  if (l > 0) {\n    const maxMin = max - min\n    if (maxMin > 0) {\n      const r2 = (max - r) / maxMin\n      const g2 = (max - g) / maxMin\n      const b2 = (max - b) / maxMin\n      if (l < 0.5) {\n        s = max + min\n      } else {\n        s = 2 - max - min\n      }\n\n      if (r === max && g === min) {\n        h = 5.0 + b2\n      } else if (r === max) {\n        h = 1.0 - g2\n      } else if (g === max && b === min) {\n        h = 1.0 + r2\n      } else if (g === max) {\n        h = 3.0 - b2\n      } else if (b === max) {\n        h = 3.0 + g2\n      } else {\n        h = 5.0 - r2\n      }\n      h = h / 6\n    }\n  }\n  return { h: h % 1, s, l, a: col.a }\n}\n\nexport const hslaToARGB = hsla => {\n  let r = 1\n  let g = 1\n  let b = 1\n\n  let h = hsla.h\n  let s = hsla.s\n  let l = hsla.l\n\n  if (h < 0) {\n    h += 1\n  }\n  let max = 0\n  if (l <= 0.5) {\n    max = l * (1.0 + s)\n  } else {\n    max = l + s - l * s\n  }\n\n  if (max > 0) {\n    h *= 6.0\n    const min = l + l - max\n    const minMax = (max - min) / max\n    const sextant = Math.floor(h)\n    const fract = h - sextant\n    const minMaxFract = max * minMax * fract\n    const mid1 = min + minMaxFract\n    const mid2 = max - minMaxFract\n\n    if (sextant === 0) {\n      r = max\n      g = mid1\n      b = min\n    }\n    if (sextant === 1) {\n      r = mid2\n      g = max\n      b = min\n    }\n    if (sextant === 2) {\n      r = min\n      g = max\n      b = mid1\n    }\n    if (sextant === 3) {\n      r = min\n      g = mid2\n      b = max\n    }\n    if (sextant === 4) {\n      r = mid1\n      g = min\n      b = max\n    }\n    if (sextant === 5) {\n      r = max\n      g = min\n      b = mid2\n    }\n  }\n  return getArgbNumber([Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255), hsla.a])\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mergeColors, calculateAlpha, isObject, isString, argbToHSLA, hslaToARGB } from './utils.js'\n\nlet colors = {\n  white: '#ffffff',\n  black: '#000000',\n  red: '#ff0000',\n  green: '#00ff00',\n  blue: '#0000ff',\n  yellow: '#feff00',\n  cyan: '#00feff',\n  magenta: '#ff00ff',\n}\n\nconst normalizedColors = {\n  //store for normalized colors\n}\n\nconst addColors = (colorsToAdd, value) => {\n  if (isObject(colorsToAdd)) {\n    // clean up normalizedColors if they exist in the to be added colors\n    Object.keys(colorsToAdd).forEach(color => cleanUpNormalizedColors(color))\n    colors = Object.assign({}, colors, colorsToAdd)\n  } else if (isString(colorsToAdd) && value) {\n    cleanUpNormalizedColors(colorsToAdd)\n    colors[colorsToAdd] = value\n  }\n}\n\nconst cleanUpNormalizedColors = color => {\n  for (let c in normalizedColors) {\n    if (c.indexOf(color) > -1) {\n      delete normalizedColors[c]\n    }\n  }\n}\n\nexport const initColors = file => {\n  return new Promise((resolve, reject) => {\n    if (typeof file === 'object') {\n      addColors(file)\n      resolve()\n    }\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        addColors(json)\n        resolve()\n      })\n      .catch(() => {\n        const error = 'Colors file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst normalizeColorToARGB = color => {\n  let targetColor = normalizedColors[color] || colors[color] || color\n  if (!targetColor) {\n    targetColor = color\n  }\n  const check = /^#([0-9A-F]{3}|[0-9A-F]{6})$/i\n  if (isString(targetColor) && check.test(targetColor)) {\n    let hex = check.exec(targetColor)[1]\n    if (hex.length === 3) {\n      hex = hex\n        .split('')\n        .map(value => {\n          return value + value\n        })\n        .join('')\n    }\n    targetColor = `0xff${hex}` * 1\n  }\n  if (!normalizedColors[color]) {\n    normalizedColors[color] = targetColor\n  }\n  return targetColor || 0xffffffff\n}\n\nexport default color => {\n  return Color.generate(color)\n}\n\nconst Color = {\n  color: null,\n  generate: function(value = this.color) {\n    if (normalizedColors[value]) {\n      this.color = normalizedColors[value]\n    } else {\n      this.color = normalizeColorToARGB(value)\n    }\n    return this\n  },\n  get() {\n    return this.color\n  },\n  alpha: function(percentage) {\n    this.color = calculateAlpha(this.color, Math.abs(percentage))\n    return this\n  },\n  darker(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.l = hsl.l * (1 - percentage)\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  lighter(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.l = hsl.l + (1 - hsl.l) * percentage\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  saturation(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.s = percentage\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  lightness(percentage) {\n    const hsl = argbToHSLA(this.color)\n    hsl.l = percentage\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  hue(degrees) {\n    const hsl = argbToHSLA(this.color)\n    hsl.h = degrees\n    this.color = hslaToARGB(hsl)\n    return this\n  },\n  mix(argb, p) {\n    this.color = mergeColors(this.color, argb, p)\n    return this\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Deepmerge from 'deepmerge'\nimport Lightning from '../Lightning'\nimport Locale from '../Locale'\nimport Metrics from '../Metrics'\nimport VersionLabel from '../VersionLabel'\nimport FpsCounter from '../FpsCounter'\nimport Log from '../Log'\nimport Settings from '../Settings'\nimport { initLanguage } from '../Language'\nimport Utils from '../Utils'\nimport Registry from '../Registry'\nimport { initColors } from '../Colors'\n\nimport { version as sdkVersion } from '../../package.json'\n\nexport let AppInstance\nexport let AppData\n\nconst defaultOptions = {\n  stage: { w: 1920, h: 1080, clearColor: 0x00000000, canvas2d: false },\n  debug: false,\n  defaultFontFace: 'RobotoRegular',\n  keys: {\n    8: 'Back',\n    13: 'Enter',\n    27: 'Menu',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    174: 'ChannelDown',\n    175: 'ChannelUp',\n    178: 'Stop',\n    250: 'PlayPause',\n    191: 'Search', // Use \"/\" for keyboard\n    409: 'Search',\n  },\n}\n\nif (window.innerHeight === 720) {\n  defaultOptions.stage['w'] = 1280\n  defaultOptions.stage['h'] = 720\n  defaultOptions.stage['precision'] = 0.6666666667\n}\n\nconst customFontFaces = []\n\nconst fontLoader = (fonts, store) =>\n  new Promise((resolve, reject) => {\n    fonts\n      .map(({ family, url, urls, descriptors }) => () => {\n        const src = urls\n          ? urls.map(url => {\n              return 'url(' + url + ')'\n            })\n          : 'url(' + url + ')'\n        const fontFace = new FontFace(family, src, descriptors || {})\n        store.push(fontFace)\n        Log.info('Loading font', family)\n        document.fonts.add(fontFace)\n        return fontFace.load()\n      })\n      .reduce((promise, method) => {\n        return promise.then(() => method())\n      }, Promise.resolve(null))\n      .then(resolve)\n      .catch(reject)\n  })\n\nexport default function(App, appData, platformSettings) {\n  return class Application extends Lightning.Application {\n    constructor(options) {\n      const config = Deepmerge(defaultOptions, options)\n      super(config)\n      this.config = config\n    }\n\n    static _template() {\n      return {\n        w: 1920,\n        h: 1080,\n      }\n    }\n\n    _setup() {\n      Promise.all([\n        this.loadFonts((App.config && App.config.fonts) || (App.getFonts && App.getFonts()) || []),\n        // to be deprecated\n        Locale.load((App.config && App.config.locale) || (App.getLocale && App.getLocale())),\n        App.language && this.loadLanguage(App.language()),\n        App.colors && this.loadColors(App.colors()),\n      ])\n        .then(() => {\n          Metrics.app.loaded()\n\n          AppData = appData\n\n          AppInstance = this.stage.c({\n            ref: 'App',\n            type: App,\n            zIndex: 1,\n            forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps,\n          })\n\n          this.childList.a(AppInstance)\n\n          this._refocus()\n\n          Log.info('App version', this.config.version)\n          Log.info('SDK version', sdkVersion)\n\n          if (platformSettings.showVersion) {\n            this.childList.a({\n              ref: 'VersionLabel',\n              type: VersionLabel,\n              version: this.config.version,\n              sdkVersion: sdkVersion,\n              zIndex: 1,\n            })\n          }\n\n          if (platformSettings.showFps) {\n            this.childList.a({\n              ref: 'FpsCounter',\n              type: FpsCounter,\n              zIndex: 1,\n            })\n          }\n\n          super._setup()\n        })\n        .catch(console.error)\n    }\n\n    _handleBack() {\n      this.closeApp()\n    }\n\n    _handleExit() {\n      this.closeApp()\n    }\n\n    closeApp() {\n      Log.info('Signaling App Close')\n\n      if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n        platformSettings.onClose(...arguments)\n      } else {\n        this.close()\n      }\n    }\n\n    close() {\n      Log.info('Closing App')\n\n      Settings.clearSubscribers()\n      Registry.clear()\n\n      this.childList.remove(this.tag('App'))\n      this.cleanupFonts()\n      // force texture garbage collect\n      this.stage.gc()\n      this.destroy()\n    }\n\n    loadFonts(fonts) {\n      return platformSettings.fontLoader && typeof platformSettings.fontLoader === 'function'\n        ? platformSettings.fontLoader(fonts, customFontFaces)\n        : fontLoader(fonts, customFontFaces)\n    }\n\n    cleanupFonts() {\n      if ('delete' in document.fonts) {\n        customFontFaces.forEach(fontFace => {\n          Log.info('Removing font', fontFace.family)\n          document.fonts.delete(fontFace)\n        })\n      } else {\n        Log.info('No support for removing manually-added fonts')\n      }\n    }\n\n    loadLanguage(config) {\n      let file = Utils.asset('translations.json')\n      let language = config\n\n      if (typeof language === 'object') {\n        language = config.language || null\n        file = config.file || file\n      }\n\n      return initLanguage(file, language)\n    }\n\n    loadColors(config) {\n      let file = Utils.asset('colors.json')\n      if (config && (typeof config === 'string' || typeof config === 'object')) {\n        file = config\n      }\n      return initColors(file)\n    }\n\n    set focus(v) {\n      this._focussed = v\n      this._refocus()\n    }\n\n    _getFocused() {\n      return this._focussed || this.tag('App')\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getConfigMap,\n  isArray,\n  isBoolean,\n  isComponentConstructor,\n  isFunction,\n  isPage,\n  symbols,\n  cleanHash,\n} from './helpers'\nimport { step, navigateQueue } from '../index'\nimport { createRoute, getOption } from './route'\nimport { createComponent } from './components'\nimport Log from '../../Log'\nimport { isWildcard } from './regex'\nimport emit from './emit'\nimport { updateWidgets } from './widgets'\nimport { setHistory, updateHistory } from './history'\nimport { AppInstance } from '../../Application'\n\n/**\n * @type {Lightning.Application}\n */\nexport let application\n\n/**\n * Actual instance of the app\n * @type {Lightning.Component}\n */\nexport let app\n\n/**\n * Component that hosts all routed pages\n * @type {Lightning.Component}\n */\nexport let pagesHost\n\n/**\n * @type {Lightning.Stage}\n */\nexport let stage\n\n/**\n * Platform driven Router configuration\n * @type {Map<string>}\n */\nexport let routerConfig\n\n/**\n * Component that hosts all attached widgets\n * @type {Lightning.Component}\n */\nexport let widgetsHost\n\n/**\n * Hash we point the browser to when we boot the app\n * and there is no deep-link provided\n * @type {string|Function}\n */\nlet rootHash\n\n/**\n * Boot request will fire before app start\n * can be used to execute some global logic\n * and can be configured\n */\nexport let bootRequest\n\n/**\n * Flag if we need to update the browser location hash.\n * Router can work without.\n * @type {boolean}\n */\nexport let updateHash = true\n\n/**\n * Will be called before a route starts, can be overridden\n * via routes config\n * @param from - route we came from\n * @param to - route we navigate to\n * @returns {Promise<*>}\n */\n// eslint-disable-next-line\nexport let beforeEachRoute = async (from, to)=>{\n  return true\n}\n\n/**\n *  * Will be called after a navigate successfully resolved,\n * can be overridden via routes config\n */\nexport let afterEachRoute = () => {}\n\n/**\n * All configured routes\n * @type {Map<string, object>}\n */\nexport let routes = new Map()\n\n/**\n * Store all page components per route\n * @type {Map<string, object>}\n */\nexport let components = new Map()\n\n/**\n * Flag if router has been initialised\n * @type {boolean}\n */\nlet initialised = false\n\n/**\n * Current page being rendered on screen\n * @type {null}\n */\nlet activePage = null\nlet activeHash\nlet activeRoute\n\n/**\n *  During the process of a navigation request a new\n *  request can start, to prevent unwanted behaviour\n *  the navigate()-method stores the last accepted hash\n *  so we can invalidate any prior requests\n */\nlet lastAcceptedHash\n\n/**\n * With on()-data providing behaviour the Router forced the App\n * in a Loading state. When the data-provider resolves we want to\n * change the state back to where we came from\n */\nlet previousState\n\nconst mixin = app => {\n  // by default the Router Baseclass provides the component\n  // reference in which we store our pages\n  if (app.pages) {\n    pagesHost = app.pages.childList\n  }\n  // if the app is using widgets we grab refs\n  // and hide all the widgets\n  if (app.widgets && app.widgets.children) {\n    widgetsHost = app.widgets.childList\n    // hide all widgets on boot\n    widgetsHost.forEach(w => (w.visible = false))\n  }\n  app._handleBack = e => {\n    step(-1)\n    e.preventDefault()\n  }\n}\n\nexport const bootRouter = (config, instance) => {\n  let { appInstance, routes } = config\n\n  // if instance is provided and it's and Lightning Component instance\n  if (instance && isPage(instance)) {\n    app = instance\n  }\n  if (!app) {\n    app = appInstance || AppInstance\n  }\n\n  application = app.application\n  pagesHost = application.childList\n  stage = app.stage\n  routerConfig = getConfigMap()\n\n  mixin(app)\n\n  if (isArray(routes)) {\n    setup(config)\n  } else if (isFunction(routes)) {\n    console.warn('[Router]: Calling Router.route() directly is deprecated.')\n    console.warn(\n      'Use object config: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration'\n    )\n  }\n}\n\nconst setup = config => {\n  if (!initialised) {\n    init(config)\n  }\n  config.routes.forEach(r => {\n    const path = cleanHash(r.path)\n    if (!routeExists(path)) {\n      const route = createRoute(r)\n      routes.set(path, route)\n      // if route has a configured component property\n      // we store it in a different map to simplify\n      // the creating and destroying per route\n      if (route.component) {\n        let type = route.component\n        if (isComponentConstructor(type)) {\n          if (!routerConfig.get('lazyCreate')) {\n            type = createComponent(stage, type)\n            pagesHost.a(type)\n          }\n        }\n        components.set(path, type)\n      }\n    } else {\n      console.error(`${path} already exists in routes configuration`)\n    }\n  })\n}\n\nconst init = config => {\n  rootHash = config.root\n  if (isFunction(config.boot)) {\n    bootRequest = config.boot\n  }\n  if (isBoolean(config.updateHash)) {\n    updateHash = config.updateHash\n  }\n  if (isFunction(config.beforeEachRoute)) {\n    beforeEachRoute = config.beforeEachRoute\n  }\n  if (isFunction(config.afterEachRoute)) {\n    afterEachRoute = config.afterEachRoute\n  }\n  if (config.bootComponent) {\n    console.warn(\n      '[Router]: Boot Component is now available as a special router: https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration?id=special-routes'\n    )\n    console.warn(\n      '[Router]: setting { bootComponent } property will be deprecated in a future release'\n    )\n    if (isPage(config.bootComponent)) {\n      config.routes.push({\n        path: '$',\n        component: config.bootComponent,\n        // we try to assign the bootRequest as after data-provider\n        // so it will behave as any other component\n        after: bootRequest || null,\n        options: {\n          preventStorage: true,\n        },\n      })\n    } else {\n      console.error(`[Router]: ${config.bootComponent} is not a valid boot component`)\n    }\n  }\n  initialised = true\n}\n\nexport const storeComponent = (route, type) => {\n  if (components.has(route)) {\n    components.set(route, type)\n  }\n}\n\nexport const getComponent = route => {\n  if (components.has(route)) {\n    return components.get(route)\n  }\n  return null\n}\n/**\n * Test if router needs to update browser location hash\n * @returns {boolean}\n */\nexport const mustUpdateLocationHash = () => {\n  if (!routerConfig || !routerConfig.size) {\n    return false\n  }\n  // we need support to either turn change hash off\n  // per platform or per app\n  const updateConfig = routerConfig.get('updateHash')\n  return !((isBoolean(updateConfig) && !updateConfig) || (isBoolean(updateHash) && !updateHash))\n}\n\n/**\n * Will be called when a new navigate() request has completed\n * and has not been expired due to it's async nature\n * @param request\n */\nexport const onRequestResolved = request => {\n  const hash = request.hash\n  const route = request.route\n  const register = request.register\n  const page = request.page\n\n  // clean up history if modifier is set\n  if (getOption(route.options, 'clearHistory')) {\n    setHistory([])\n  } else if (hash && !isWildcard.test(route.path)) {\n    updateHistory(request)\n  }\n\n  // we only update the stackLocation if a route\n  // is not expired before it resolves\n  storeComponent(route.path, page)\n\n  if (request.isSharedInstance || !request.isCreated) {\n    emit(page, 'changed')\n  } else if (request.isCreated) {\n    emit(page, 'mounted')\n  }\n\n  // only update widgets if we have a host\n  if (widgetsHost) {\n    updateWidgets(route.widgets, page)\n  }\n\n  // we want to clean up if there is an\n  // active page that is not being shared\n  // between current and previous route\n  if (getActivePage() && !request.isSharedInstance) {\n    cleanUp(activePage, request)\n  }\n\n  // provide history object to active page\n  if (register.get(symbols.historyState) && isFunction(page.historyState)) {\n    page.historyState(register.get(symbols.historyState))\n  }\n\n  setActivePage(page)\n\n  activeHash = request.hash\n  activeRoute = route.path\n\n  // cleanup all cancelled requests\n  for (let request of navigateQueue.values()) {\n    if (request.isCancelled && request.hash) {\n      navigateQueue.delete(request.hash)\n    }\n  }\n\n  afterEachRoute(request)\n\n  Log.info('[route]:', route.path)\n  Log.info('[hash]:', hash)\n}\n\nconst cleanUp = (page, request) => {\n  const route = activeRoute\n  const register = request.register\n  const lazyDestroy = routerConfig.get('lazyDestroy')\n  const destroyOnBack = routerConfig.get('destroyOnHistoryBack')\n  const keepAlive = register.get('keepAlive')\n  const isFromHistory = register.get(symbols.backtrack)\n\n  let doCleanup = false\n\n  // if this request is executed due to a step back in history\n  // and we have configured to destroy active page when we go back\n  // in history or lazyDestory is enabled\n  if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n    doCleanup = true\n  }\n\n  // clean up if lazyDestroy is enabled and the keepAlive flag\n  // in navigation register is false\n  if (lazyDestroy && !keepAlive) {\n    doCleanup = true\n  }\n\n  // if the current and new request share the same route blueprint\n  if (activeRoute === request.route.path) {\n    doCleanup = true\n  }\n\n  if (doCleanup) {\n    // grab original class constructor if\n    // statemachine routed else store constructor\n    storeComponent(route, page._routedType || page.constructor)\n\n    // actual remove of page from memory\n    pagesHost.remove(page)\n\n    // force texture gc() if configured\n    // so we can cleanup textures in the same tick\n    if (routerConfig.get('gcOnUnload')) {\n      stage.gc()\n    }\n  } else {\n    // If we're not removing the page we need to\n    // reset it's properties\n    page.patch({\n      x: 0,\n      y: 0,\n      scale: 1,\n      alpha: 1,\n      visible: false,\n    })\n  }\n}\n\nexport const getActiveHash = () => {\n  return activeHash\n}\n\nexport const setActiveHash = hash => {\n  activeHash = hash\n}\n\nexport const setActivePage = page => {\n  activePage = page\n}\n\nexport const getActivePage = () => {\n  return activePage\n}\n\nexport const getActiveRoute = () => {\n  return activeRoute\n}\n\nexport const getLastHash = () => {\n  return lastAcceptedHash\n}\n\nexport const setLastHash = hash => {\n  lastAcceptedHash = hash\n}\n\nexport const setPreviousState = state => {\n  previousState = state\n}\n\nexport const getPreviousState = () => {\n  return previousState\n}\n\nexport const routeExists = key => {\n  return routes.has(key)\n}\n\nexport const getRootHash = () => {\n  return rootHash\n}\n\nexport const getBootRequest = () => {\n  return bootRequest\n}\n\nexport const getRouterConfig = () => {\n  return routerConfig\n}\n\nexport const getRoutes = () => {\n  return routes\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../../Lightning'\nimport Settings from '../../Settings'\nimport { getActiveHash } from './router'\nimport { getResumeHash } from '../index'\n\nexport const isFunction = v => {\n  return typeof v === 'function'\n}\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isBoolean = v => {\n  return typeof v === 'boolean'\n}\n\nexport const isPage = v => {\n  if (v instanceof Lightning.Element || isComponentConstructor(v)) {\n    return true\n  }\n  return false\n}\n\nexport const isComponentConstructor = type => {\n  return type.prototype && 'isComponent' in type.prototype\n}\n\nexport const isArray = v => {\n  return Array.isArray(v)\n}\n\nexport const ucfirst = v => {\n  return `${v.charAt(0).toUpperCase()}${v.slice(1)}`\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const isPromise = method => {\n  let result\n  if (isFunction(method)) {\n    try {\n      result = method.apply(null)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n  return isObject(result) && isFunction(result.then)\n}\n\nexport const cleanHash = (hash = '') => {\n  return hash.replace(/^#/, '').replace(/\\/+$/, '')\n}\n\nexport const getConfigMap = () => {\n  const routerSettings = Settings.get('platform', 'router')\n  const isObj = isObject(routerSettings)\n  return [\n    'backtrack',\n    'gcOnUnload',\n    'destroyOnHistoryBack',\n    'lazyCreate',\n    'lazyDestroy',\n    'reuseInstance',\n    'autoRestoreRemote',\n    'numberNavigation',\n    'updateHash',\n    'storeSameHash',\n  ].reduce((config, key) => {\n    config.set(key, isObj ? routerSettings[key] : Settings.get('platform', key))\n    return config\n  }, new Map())\n}\n\nexport const incorrectParams = (cb, route) => {\n  const isIncorrect = /^\\w*?\\s?\\(\\s?\\{.*?\\}\\s?\\)/i\n  if (isIncorrect.test(cb.toString())) {\n    console.warn(\n      [\n        `DEPRECATION: The data-provider for route: ${route} is not correct.`,\n        '\"page\" is no longer a property of the params object but is now the first function parameter: ',\n        'https://github.com/rdkcentral/Lightning-SDK/blob/feature/router/docs/plugins/router/dataproviding.md#data-providing',\n        \"It's supported for now but will be removed in a future release.\",\n      ].join('\\n')\n    )\n    return true\n  }\n  return false\n}\n\nexport const getQueryStringParams = (hash = getActiveHash()) => {\n  const resumeHash = getResumeHash()\n  if (hash === '$' || resumeHash) {\n    if (isString(resumeHash)) {\n      hash = resumeHash\n    }\n  }\n\n  let parse = ''\n  const getQuery = /([?&].*)/\n  const matches = getQuery.exec(hash)\n  const params = {}\n\n  if (document.location && document.location.search) {\n    parse = document.location.search\n  }\n\n  if (matches && matches.length) {\n    let hashParams = matches[1]\n    if (parse) {\n      // if location.search is not empty we\n      // remove the leading ? to create a\n      // valid string\n      hashParams = hashParams.replace(/^\\?/, '')\n      // we parse hash params last so they we can always\n      // override search params with hash params\n      parse = `${parse}&${hashParams}`\n    } else {\n      parse = hashParams\n    }\n  }\n\n  if (parse) {\n    const urlParams = new URLSearchParams(parse)\n    for (const [key, value] of urlParams.entries()) {\n      params[key] = value\n    }\n    return params\n  } else {\n    return false\n  }\n}\n\nexport const objectToQueryString = obj => {\n  if (!isObject(obj)) {\n    return ''\n  }\n  return (\n    '?' +\n    Object.keys(obj)\n      .map(key => {\n        return `${key}=${obj[key]}`\n      })\n      .join('&')\n  )\n}\n\nexport const symbols = {\n  route: Symbol('route'),\n  hash: Symbol('hash'),\n  store: Symbol('store'),\n  fromHistory: Symbol('fromHistory'),\n  expires: Symbol('expires'),\n  resume: Symbol('resume'),\n  backtrack: Symbol('backtrack'),\n  historyState: Symbol('historyState'),\n  queryParams: Symbol('queryParams'),\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { symbols, getQueryStringParams } from './helpers'\nimport { app, routes, routeExists } from './router'\nimport { getValuesFromHash } from './route'\nimport emit from './emit'\n\nexport let previousState\n\nexport const dataHooks = {\n  on: request => {\n    previousState = app.state || ''\n    app._setState('Loading')\n    return execProvider(request)\n  },\n  before: request => {\n    return execProvider(request)\n  },\n  after: request => {\n    try {\n      execProvider(request, true)\n    } catch (e) {\n      // for now we fail silently\n    }\n    return Promise.resolve()\n  },\n}\n\nconst execProvider = (request, emitProvided) => {\n  const route = request.route\n  const provider = route.provider\n  const expires = route.cache ? route.cache * 1000 : 0\n  const params = addPersistData(request)\n  return provider.request(request.page, { ...params }).then(() => {\n    request.page[symbols.expires] = Date.now() + expires\n    if (emitProvided) {\n      emit(request.page, 'dataProvided')\n    }\n  })\n}\n\nexport const addPersistData = ({ page, route, hash, register = new Map() }) => {\n  const urlValues = getValuesFromHash(hash, route.path)\n  const queryParams = getQueryStringParams(hash)\n  const pageData = new Map([...urlValues, ...register])\n  const params = {}\n\n  // make dynamic url data available to the page\n  // as instance properties\n  for (let [name, value] of pageData) {\n    params[name] = value\n  }\n\n  if (queryParams) {\n    params[symbols.queryParams] = queryParams\n  }\n\n  // check navigation register for persistent data\n  if (register.size) {\n    const obj = {}\n    for (let [k, v] of register) {\n      obj[k] = v\n    }\n    page.persist = obj\n  }\n\n  // make url data and persist data available\n  // via params property\n  page.params = params\n  emit(page, ['urlParams'], params)\n\n  return params\n}\n\n/**\n * Test if page passed cache-time\n * @param page\n * @returns {boolean}\n */\nexport const isPageExpired = page => {\n  if (!page[symbols.expires]) {\n    return false\n  }\n\n  const expires = page[symbols.expires]\n  const now = Date.now()\n\n  return now >= expires\n}\n\nexport const hasProvider = path => {\n  if (routeExists(path)) {\n    const record = routes.get(path)\n    return !!record.provider\n  }\n  return false\n}\n\nexport const getProvider = route => {\n  // @todo: fix, route already is passed in\n  if (routeExists(route.path)) {\n    const { provider } = routes.get(route.path)\n    return {\n      type: provider.type,\n      provider: provider.request,\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      if (o) {\n        o.visible = false\n      }\n      resolve()\n    })\n  })\n}\n\nconst crossFade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    if (o) {\n      o.patch({\n        smooth: {\n          alpha: [0, { duration: 0.5, delay: 0.3 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst moveOnAxes = (axis, direction, i, o) => {\n  const bounds = axis === 'x' ? 1920 : 1080\n  return new Promise(resolve => {\n    i.patch({\n      [`${axis}`]: direction ? bounds * -1 : bounds,\n      visible: true,\n      smooth: {\n        [`${axis}`]: [0, { duration: 0.4, delay: 0.2 }],\n      },\n    })\n    // out is optional\n    if (o) {\n      o.patch({\n        [`${axis}`]: 0,\n        smooth: {\n          [`${axis}`]: [direction ? bounds : bounds * -1, { duration: 0.4, delay: 0.2 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition(axis).on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst up = (i, o) => {\n  return moveOnAxes('y', 0, i, o)\n}\n\nconst down = (i, o) => {\n  return moveOnAxes('y', 1, i, o)\n}\n\nconst left = (i, o) => {\n  return moveOnAxes('x', 0, i, o)\n}\n\nconst right = (i, o) => {\n  return moveOnAxes('x', 1, i, o)\n}\n\nexport default {\n  fade,\n  crossFade,\n  up,\n  down,\n  left,\n  right,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getRouterConfig } from './router'\nimport { isPromise, isString } from './helpers'\nimport Transitions from '../transitions'\n\n/**\n * execute transition between new / old page and\n * toggle the defined widgets\n * @todo: platform override default transition\n * @param pageIn\n * @param pageOut\n */\nexport const executeTransition = (pageIn, pageOut = null) => {\n  const transition = pageIn.pageTransition || pageIn.easing\n  const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition)\n  const transitionsDisabled = getRouterConfig().get('disableTransitions')\n\n  if (pageIn.easing) {\n    console.warn('easing() method is deprecated and will be removed. Use pageTransition()')\n  }\n\n  // default behaviour is a visibility toggle\n  if (!hasCustomTransitions || transitionsDisabled) {\n    pageIn.visible = true\n    if (pageOut) {\n      pageOut.visible = false\n    }\n    return Promise.resolve()\n  }\n\n  if (transition) {\n    let type\n    try {\n      type = transition.call(pageIn, pageIn, pageOut)\n    } catch (e) {\n      type = 'crossFade'\n    }\n\n    if (isPromise(type)) {\n      return type\n    }\n\n    if (isString(type)) {\n      const fn = Transitions[type]\n      if (fn) {\n        return fn(pageIn, pageOut)\n      }\n    }\n\n    // keep backwards compatible for now\n    if (pageIn.smoothIn) {\n      // provide a smooth function that resolves itself\n      // on transition finish\n      const smooth = (p, v, args = {}) => {\n        return new Promise(resolve => {\n          pageIn.visible = true\n          pageIn.setSmooth(p, v, args)\n          pageIn.transition(p).on('finish', () => {\n            resolve()\n          })\n        })\n      }\n      return pageIn.smoothIn({ pageIn, smooth })\n    }\n  }\n  return Transitions.crossFade(pageIn, pageOut)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  app,\n  getComponent,\n  onRequestResolved,\n  getLastHash,\n  pagesHost,\n  stage,\n  getPreviousState,\n  getActivePage,\n  routerConfig,\n  routeExists,\n} from './router'\n\nimport Log from '../../Log'\nimport { isBoolean, isComponentConstructor, isFunction, symbols } from './helpers'\nimport { getProvider, hasProvider, isPageExpired, dataHooks, addPersistData } from './provider'\nimport { createComponent } from './components'\nimport { executeTransition } from './transition'\nimport { getActiveWidget } from './widgets'\nimport emit from './emit'\nimport { getOption } from './route'\nimport { navigate } from '../index'\nimport { setHistory, updateHistory } from './history'\nimport { isWildcard } from './regex'\n\n/**\n * The actual loading of the component\n * */\nexport const load = async request => {\n  let expired = false\n  try {\n    request = await loader(request)\n    if (request && !request.isCancelled) {\n      // in case of on() providing we need to reset\n      // app state;\n      if (app.state === 'Loading') {\n        if (getPreviousState() === 'Widgets') {\n          app._setState('Widgets', [getActiveWidget()])\n        } else {\n          app._setState('')\n        }\n      }\n      // Do page transition if instance\n      // is not shared between the routes\n      if (!request.isSharedInstance && !request.isCancelled) {\n        await executeTransition(request.page, getActivePage())\n      }\n    } else {\n      expired = true\n    }\n    // on expired we only cleanup\n    if (expired || request.isCancelled) {\n      Log.debug('[router]:', `Rejected ${request.hash} because route to ${getLastHash()} started`)\n      if (request.isCreated && !request.isSharedInstance) {\n        // remove from render-tree\n        pagesHost.remove(request.page)\n      }\n    } else {\n      onRequestResolved(request)\n      // resolve promise\n      return request.page\n    }\n  } catch (request) {\n    if (!request.route) {\n      console.error(request)\n    } else if (!expired) {\n      // @todo: revisit\n      const { route } = request\n      // clean up history if modifier is set\n      if (getOption(route.options, 'clearHistory')) {\n        setHistory([])\n      } else if (!isWildcard.test(route.path)) {\n        updateHistory(request)\n      }\n\n      if (request.isCreated && !request.isSharedInstance) {\n        // remove from render-tree\n        pagesHost.remove(request.page)\n      }\n      handleError(request)\n    }\n  }\n}\n\nconst loader = async request => {\n  const route = request.route\n  const hash = request.hash\n  const register = request.register\n\n  // todo: grab from Route instance\n  let type = getComponent(route.path)\n  let isConstruct = isComponentConstructor(type)\n  let provide = false\n\n  // if it's an instance bt we're not coming back from\n  // history we test if we can re-use this instance\n  if (!isConstruct && !register.get(symbols.backtrack)) {\n    if (!mustReuse(route)) {\n      type = type.constructor\n      isConstruct = true\n    }\n  }\n\n  // If page is Lightning Component instance\n  if (!isConstruct) {\n    request.page = type\n    // if we have have a data route for current page\n    if (hasProvider(route.path)) {\n      if (isPageExpired(type) || type[symbols.hash] !== hash) {\n        provide = true\n      }\n    }\n    let currentRoute = getActivePage() && getActivePage()[symbols.route]\n    // if the new route is equal to the current route it means that both\n    // route share the Component instance and stack location / since this case\n    // is conflicting with the way before() and after() loading works we flag it,\n    // and check platform settings in we want to re-use instance\n    if (route.path === currentRoute) {\n      request.isSharedInstance = true\n      // since we're re-using the instance we must attach\n      // historyState to the request to prevent it from\n      // being overridden.\n      if (isFunction(request.page.historyState)) {\n        request.copiedHistoryState = request.page.historyState()\n      }\n    }\n  } else {\n    request.page = createComponent(stage, type)\n    pagesHost.a(request.page)\n    // test if need to request data provider\n    if (hasProvider(route.path)) {\n      provide = true\n    }\n    request.isCreated = true\n  }\n\n  // we store hash and route as properties on the page instance\n  // that way we can easily calculate new behaviour on page reload\n  request.page[symbols.hash] = hash\n  request.page[symbols.route] = route.path\n\n  try {\n    if (provide) {\n      // extract attached data-provider for route\n      // we're processing\n      const { type: loadType, provider } = getProvider(route)\n\n      // update running request\n      request.provider = provider\n      request.providerType = loadType\n\n      await dataHooks[loadType](request)\n\n      // we early exit if the current request is expired\n      if (hash !== getLastHash()) {\n        return false\n      } else {\n        if (request.providerType !== 'after') {\n          emit(request.page, 'dataProvided')\n        }\n        // resolve promise\n        return request\n      }\n    } else {\n      addPersistData(request)\n      return request\n    }\n  } catch (e) {\n    request.error = e\n    return Promise.reject(request)\n  }\n}\n\nconst handleError = request => {\n  if (request && request.error) {\n    console.error(request.error)\n  } else if (request) {\n    Log.error(request)\n  }\n\n  if (request.page && routeExists('!')) {\n    navigate('!', { request }, false)\n  }\n}\n\nexport const mustReuse = route => {\n  const opt = getOption(route.options, 'reuseInstance')\n  const config = routerConfig.get('reuseInstance')\n\n  // route always has final decision\n  if (isBoolean(opt)) {\n    return opt\n  }\n  return !(isBoolean(config) && config === false)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport { default as Router } from './index'\nimport { routerConfig } from './utils/router.js'\nimport { isBoolean } from './utils/helpers'\n\nexport class RoutedApp extends Lightning.Component {\n  static _template() {\n    return {\n      Pages: {\n        forceZIndexContext: true,\n      },\n      /**\n       * This is a default Loading page that will be made visible\n       * during data-provider on() you CAN override in child-class\n       */\n      Loading: {\n        rect: true,\n        w: 1920,\n        h: 1080,\n        color: 0xff000000,\n        visible: false,\n        zIndex: 99,\n        Label: {\n          mount: 0.5,\n          x: 960,\n          y: 540,\n          text: {\n            text: 'Loading..',\n          },\n        },\n      },\n    }\n  }\n\n  static _states() {\n    return [\n      class Loading extends this {\n        $enter() {\n          this.tag('Loading').visible = true\n        }\n\n        $exit() {\n          this.tag('Loading').visible = false\n        }\n      },\n      class Widgets extends this {\n        $enter(args, widget) {\n          // store widget reference\n          this._widget = widget\n\n          // since it's possible that this behaviour\n          // is non-remote driven we force a recalculation\n          // of the focuspath\n          this._refocus()\n        }\n\n        _getFocused() {\n          // we delegate focus to selected widget\n          // so it can consume remotecontrol presses\n          return this._widget\n        }\n\n        // if we want to widget to widget focus delegation\n        reload(widget) {\n          this._widget = widget\n          this._refocus()\n        }\n\n        _handleKey() {\n          const restoreFocus = routerConfig.get('autoRestoreRemote')\n          /**\n           * The Router used to delegate focus back to the page instance on\n           * every unhandled key. This is barely usefull in any situation\n           * so for now we offer the option to explicity turn that behaviour off\n           * so we don't don't introduce a breaking change.\n           */\n          if (!isBoolean(restoreFocus) || restoreFocus === true) {\n            Router.focusPage()\n          }\n        }\n      },\n    ]\n  }\n\n  /**\n   * Return location where pages need to be stored\n   */\n  get pages() {\n    return this.tag('Pages')\n  }\n\n  /**\n   * Tell router where widgets are stored\n   */\n  get widgets() {\n    return this.tag('Widgets')\n  }\n\n  /**\n   * we MUST register _handleBack method so the Router\n   * can override it\n   * @private\n   */\n  _handleBack() {}\n\n  /**\n   * We MUST return Router.activePage() so the new Page\n   * can listen to the remote-control.\n   */\n  _getFocused() {\n    return Router.getActivePage()\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  isFunction,\n  isPage,\n  isObject,\n  isBoolean,\n  isString,\n  getQueryStringParams,\n  symbols,\n  cleanHash,\n} from './utils/helpers'\n\nimport {\n  bootRouter,\n  routeExists,\n  getRootHash,\n  getBootRequest,\n  mustUpdateLocationHash,\n  getComponent,\n  storeComponent,\n  stage,\n  app,\n  routerConfig,\n  setLastHash,\n  getActivePage,\n  beforeEachRoute,\n  getActiveHash,\n  getActiveRoute,\n} from './utils/router'\n\nimport { focusWidget, getActiveWidget, restoreFocus } from './utils/widgets'\nimport { getHistory, setHistory, getHistoryState, replaceHistoryState } from './utils/history'\nimport {\n  createRequest,\n  getRouteByHash,\n  getValuesFromHash,\n  getFloor,\n  getHashByName,\n  keepActivePageAlive,\n} from './utils/route'\nimport { load } from './utils/loader'\nimport { stripRegex, isWildcard } from './utils/regex'\nimport { RoutedApp } from './base'\nimport Registry from '../Registry'\n\n/*\nrouThor ==[x]\n */\nexport let navigateQueue = new Map()\nlet forcedHash = ''\nlet resumeHash = ''\n\n/**\n * Start routing the app\n * @param config - route config object\n * @param instance - instance of the app\n */\nconst startRouter = (config, instance) => {\n  bootRouter(config, instance)\n  registerListener()\n  start()\n}\n\n// start translating url\nconst start = () => {\n  let hash = (getHash() || '').replace(/^#/, '')\n  const bootKey = '$'\n  const params = getQueryStringParams(hash)\n  const bootRequest = getBootRequest()\n  const rootHash = getRootHash()\n  const isDirectLoad = hash.indexOf(bootKey) !== -1\n\n  // prevent direct reload of wildcard routes\n  // expect bootComponent\n  if (isWildcard.test(hash) && hash !== bootKey) {\n    hash = ''\n  }\n\n  // store resume point for manual resume\n  resumeHash = isDirectLoad ? rootHash : hash || rootHash\n\n  const ready = () => {\n    if (!hash && rootHash) {\n      if (isString(rootHash)) {\n        navigate(rootHash)\n      } else if (isFunction(rootHash)) {\n        rootHash().then(res => {\n          if (isObject(res)) {\n            navigate(res.path, res.params)\n          } else {\n            navigate(res)\n          }\n        })\n      }\n    } else {\n      queue(hash)\n      handleHashChange()\n        .then(() => {\n          app._refocus()\n        })\n        .catch(e => {\n          console.error(e)\n        })\n    }\n  }\n\n  if (routeExists(bootKey)) {\n    if (hash && !isDirectLoad) {\n      if (!getRouteByHash(hash)) {\n        navigate('*', { failedHash: hash })\n        return\n      }\n    }\n    navigate(\n      bootKey,\n      {\n        resume: resumeHash,\n        reload: bootKey === hash,\n      },\n      false\n    )\n  } else if (isFunction(bootRequest)) {\n    bootRequest(params)\n      .then(() => {\n        ready()\n      })\n      .catch(e => {\n        handleBootError(e)\n      })\n  } else {\n    ready()\n  }\n}\n\nconst handleBootError = e => {\n  if (routeExists('!')) {\n    navigate('!', { request: { error: e } })\n  } else {\n    console.error(e)\n  }\n}\n\n/**\n * start a new request\n * @param url\n * @param args\n * @param store\n */\nexport const navigate = (url, args = {}, store) => {\n  if (isObject(url)) {\n    url = getHashByName(url)\n    if (!url) {\n      return\n    }\n  }\n\n  let hash = getHash()\n  if (!mustUpdateLocationHash() && forcedHash) {\n    hash = forcedHash\n  }\n  if (hash.replace(/^#/, '') !== url) {\n    // push request in the queue\n    queue(url, args, store)\n\n    setHash(url)\n    if (!mustUpdateLocationHash()) {\n      forcedHash = url\n      handleHashChange(url)\n        .then(() => {\n          app._refocus()\n        })\n        .catch(e => {\n          console.error(e)\n        })\n    }\n  } else if (args.reload) {\n    // push request in the queue\n    queue(url, args, store)\n\n    handleHashChange(url)\n      .then(() => {\n        app._refocus()\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n}\n\nconst queue = (hash, args = {}, store) => {\n  hash = cleanHash(hash)\n  if (!navigateQueue.has(hash)) {\n    for (let request of navigateQueue.values()) {\n      request.cancel()\n    }\n    const request = createRequest(hash, args, store)\n    navigateQueue.set(decodeURIComponent(hash), request)\n\n    return request\n  }\n  return false\n}\n\n/**\n * Handle change of hash\n * @param override\n * @returns {Promise<void>}\n */\nconst handleHashChange = async override => {\n  const hash = cleanHash(override || getHash())\n  const queueId = decodeURIComponent(hash)\n  let request = navigateQueue.get(queueId)\n\n  // handle hash updated manually\n  if (!request && !navigateQueue.size) {\n    request = queue(hash)\n  }\n\n  const route = getRouteByHash(hash)\n\n  if (!route) {\n    if (routeExists('*')) {\n      navigate('*', { failedHash: hash })\n    } else {\n      console.error(`Unable to navigate to: ${hash}`)\n    }\n    return\n  }\n\n  // update current processed request\n  request.hash = hash\n  request.route = route\n\n  let result = await beforeEachRoute(getActiveHash(), request)\n\n  // test if a local hook is configured for the route\n  if (route.beforeNavigate) {\n    result = await route.beforeNavigate(getActiveHash(), request)\n  }\n\n  if (isBoolean(result)) {\n    // only if resolve value is explicitly true\n    // we continue the current route request\n    if (result) {\n      return resolveHashChange(request)\n    }\n  } else {\n    // if navigation guard didn't return true\n    // we cancel the current request\n    request.cancel()\n    navigateQueue.delete(queueId)\n\n    if (isString(result)) {\n      navigate(result)\n    } else if (isObject(result)) {\n      let store = true\n      if (isBoolean(result.store)) {\n        store = result.store\n      }\n      navigate(result.path, result.params, store)\n    }\n  }\n}\n\n/**\n * Continue processing the hash change if not blocked\n * by global or local hook\n * @param request - {}\n */\nconst resolveHashChange = request => {\n  const hash = request.hash\n  const route = request.route\n  const queueId = decodeURIComponent(hash)\n  // store last requested hash so we can\n  // prevent a route that resolved later\n  // from displaying itself\n  setLastHash(hash)\n\n  if (route.path) {\n    const component = getComponent(route.path)\n    // if a hook is provided for the current route\n    if (isFunction(route.hook)) {\n      const urlParams = getValuesFromHash(hash, route.path)\n      const params = {}\n      for (const key of urlParams.keys()) {\n        params[key] = urlParams.get(key)\n      }\n      route.hook(app, { ...params })\n    }\n    // if there is a component attached to the route\n    if (component) {\n      // force page to root state to prevent shared state issues\n      const activePage = getActivePage()\n      if (activePage) {\n        const keepAlive = keepActivePageAlive(getActiveRoute(), request)\n        if (activePage && route.path === getActiveRoute() && !keepAlive) {\n          activePage._setState('')\n        }\n      }\n\n      if (isPage(component, stage)) {\n        load(request).then(() => {\n          app._refocus()\n          navigateQueue.delete(queueId)\n        })\n      } else {\n        // of the component is not a constructor\n        // or a Component instance we can assume\n        // that it's a dynamic import\n        component()\n          .then(contents => {\n            return contents.default\n          })\n          .then(module => {\n            storeComponent(route.path, module)\n            return load(request)\n          })\n          .then(() => {\n            app._refocus()\n            navigateQueue.delete(queueId)\n          })\n      }\n    } else {\n      navigateQueue.delete(queueId)\n    }\n  }\n}\n\n/**\n * Directional step in history\n * @param direction\n */\nexport const step = (level = 0) => {\n  if (!level || isNaN(level)) {\n    return false\n  }\n  const history = getHistory()\n  // for now we only support negative numbers\n  level = Math.abs(level)\n\n  // we can't step back past the amount\n  // of history entries\n  if (level > history.length) {\n    if (isFunction(app._handleAppClose)) {\n      return app._handleAppClose()\n    }\n    return false\n  } else if (history.length) {\n    // for now we only support history back\n    const route = history.splice(history.length - level, level)[0]\n    // store changed history\n    setHistory(history)\n    return navigate(\n      route.hash,\n      {\n        [symbols.backtrack]: true,\n        [symbols.historyState]: route.state,\n      },\n      false\n    )\n  } else if (routerConfig.get('backtrack')) {\n    const hashLastPart = /(\\/:?[\\w%\\s-]+)$/\n    let hash = stripRegex(getHash())\n    let floor = getFloor(hash)\n\n    // test if we got deep-linked\n    if (floor > 1) {\n      while (floor--) {\n        // strip of last part\n        hash = hash.replace(hashLastPart, '')\n        // if we have a configured route\n        // we navigate to it\n        if (getRouteByHash(hash)) {\n          return navigate(hash, { [symbols.backtrack]: true }, false)\n        }\n      }\n    }\n  }\n  return false\n}\n\n/**\n * Resume Router's page loading process after\n * the BootComponent became visible;\n */\nconst resume = () => {\n  if (isString(resumeHash)) {\n    navigate(resumeHash, false)\n    resumeHash = ''\n  } else if (isFunction(resumeHash)) {\n    resumeHash().then(res => {\n      resumeHash = ''\n      if (isObject(res)) {\n        navigate(res.path, res.params)\n      } else {\n        navigate(res)\n      }\n    })\n  } else {\n    console.warn('[Router]: resume() called but no hash found')\n  }\n}\n\n/**\n * Query if the Router is still processing a Request\n * @returns {boolean}\n */\nconst isNavigating = () => {\n  if (navigateQueue.size) {\n    let isProcessing = false\n    for (let request of navigateQueue.values()) {\n      if (!request.isCancelled) {\n        isProcessing = true\n      }\n    }\n    return isProcessing\n  }\n  return false\n}\n\nexport const getResumeHash = () => {\n  return resumeHash\n}\n\n/**\n * By default we return the location hash\n * @returns {string}\n */\nlet getHash = () => {\n  return document.location.hash\n}\n\n/**\n * Update location hash\n * @param url\n */\nlet setHash = url => {\n  document.location.hash = url\n}\n\n/**\n * This can be called from the platform / bootstrapper to override\n * the default getting and setting of the hash\n * @param config\n */\nexport const initRouter = config => {\n  if (config.getHash) {\n    getHash = config.getHash\n  }\n  if (config.setHash) {\n    setHash = config.setHash\n  }\n}\n\n/**\n * On hash change we start processing\n */\nconst registerListener = () => {\n  Registry.addEventListener(window, 'hashchange', async () => {\n    if (mustUpdateLocationHash()) {\n      try {\n        await handleHashChange()\n      } catch (e) {\n        console.error(e)\n      }\n    }\n  })\n}\n// export API\nexport default {\n  startRouter,\n  navigate,\n  resume,\n  step,\n  go: step,\n  back: step.bind(null, -1),\n  activePage: getActivePage,\n  getActivePage() {\n    // warning\n    return getActivePage()\n  },\n  getActiveRoute,\n  getActiveHash,\n  focusWidget,\n  getActiveWidget,\n  restoreFocus,\n  isNavigating,\n  getHistory,\n  setHistory,\n  getHistoryState,\n  replaceHistoryState,\n  getQueryStringParams,\n  symbols,\n  App: RoutedApp,\n  // keep backwards compatible\n  focusPage: restoreFocus,\n  /**\n   * Deprecated api methods\n   */\n  setupRoutes() {\n    console.warn('Router: setupRoutes is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n  on() {\n    console.warn('Router.on() is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n  before() {\n    console.warn('Router.before() is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n  after() {\n    console.warn('Router.after() is deprecated, consolidate your configuration')\n    console.warn('https://rdkcentral.github.io/Lightning-SDK/#/plugins/router/configuration')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst defaultChannels = [\n  {\n    number: 1,\n    name: 'Metro News 1',\n    description: 'New York Cable News Channel',\n    entitled: true,\n    program: {\n      title: 'The Morning Show',\n      description: \"New York's best morning show\",\n      startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(), // started 5 minutes ago\n      duration: 60 * 30, // 30 minutes\n      ageRating: 0,\n    },\n  },\n  {\n    number: 2,\n    name: 'MTV',\n    description: 'Music Television',\n    entitled: true,\n    program: {\n      title: 'Beavis and Butthead',\n      description: 'American adult animated sitcom created by Mike Judge',\n      startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(), // started 20 minutes ago\n      duration: 60 * 45, // 45 minutes\n      ageRating: 18,\n    },\n  },\n  {\n    number: 3,\n    name: 'NBC',\n    description: 'NBC TV Network',\n    entitled: false,\n    program: {\n      title: 'The Tonight Show Starring Jimmy Fallon',\n      description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n      startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(), // started 10 minutes ago\n      duration: 60 * 60, // 1 hour\n      ageRating: 10,\n    },\n  },\n]\n\nexport const channels = () => Settings.get('platform', 'tv', defaultChannels)\n\nexport const randomChannel = () => channels()[~~(channels.length * Math.random())]\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nimport { channels, randomChannel } from './defaults'\n\nlet currentChannel\nconst callbacks = {}\n\nconst emit = (event, ...args) => {\n  callbacks[event] &&\n    callbacks[event].forEach(cb => {\n      cb.apply(null, args)\n    })\n}\n\n// local mock methods\nlet methods = {\n  getChannel() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      if (currentChannel) {\n        const channel = { ...currentChannel }\n        delete channel.program\n        resolve(channel)\n      } else {\n        reject('No channel found')\n      }\n    })\n  },\n  getProgram() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      currentChannel.program ? resolve(currentChannel.program) : reject('No program found')\n    })\n  },\n  setChannel(number) {\n    return new Promise((resolve, reject) => {\n      if (number) {\n        const newChannel = channels().find(c => c.number === number)\n        if (newChannel) {\n          currentChannel = newChannel\n          const channel = { ...currentChannel }\n          delete channel.program\n          emit('channelChange', channel)\n          resolve(channel)\n        } else {\n          reject('Channel not found')\n        }\n      } else {\n        reject('No channel number supplied')\n      }\n    })\n  },\n}\n\nexport const initTV = config => {\n  methods = {}\n  if (config.getChannel && typeof config.getChannel === 'function') {\n    methods.getChannel = config.getChannel\n  }\n  if (config.getProgram && typeof config.getProgram === 'function') {\n    methods.getProgram = config.getProgram\n  }\n  if (config.setChannel && typeof config.setChannel === 'function') {\n    methods.setChannel = config.setChannel\n  }\n  if (config.emit && typeof config.emit === 'function') {\n    config.emit(emit)\n  }\n}\n\n// public API\nexport default {\n  channel(number = null) {\n    return new Promise((resolve, reject) => {\n      try {\n        // call setChannel when number argument is passed, otherwise getChannel\n        methods[number ? 'setChannel' : 'getChannel'](number)\n          .then(channel => {\n            // to do: ensure consistent formatting of channel info here?\n            resolve(channel)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  program() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getProgram()\n          .then(program => {\n            // to do: ensure consistent formatting of program info here?\n            resolve(program)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  entitled() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getChannel()\n          .then(channel => {\n            'entitled' in channel ? resolve(!!channel.entitled) : reject()\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  addEventListener(event, cb) {\n    if (typeof cb === 'function') {\n      callbacks[event] = callbacks[event] || []\n      callbacks[event].push(cb)\n    } else {\n      Log.error('Please provide a function as a callback')\n    }\n  },\n  removeEventListener(event, cb = false) {\n    if (callbacks[event] && callbacks[event].length) {\n      callbacks[event] = cb ? callbacks[event].filter(_cb => _cb === cb) : []\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Profile from '../Profile'\nimport Settings from '../Settings'\nimport sequence from '../helpers/sequence'\n\nlet cspUrl = 'http://payment-csp-example.metrological.com:8080/'\nlet billingUrl = 'https://payment-sdk.metrological.com/'\n\nlet cspEndpoints = {\n  assets: {\n    uri: '/assets',\n    method: 'GET',\n  },\n  asset: {\n    uri: '/assets/:id',\n    method: 'GET',\n  },\n  signature: {\n    uri: '/assets/:id/signature',\n    method: 'POST',\n  },\n  subscribe: {\n    uri: '/assets/:id/subscribe',\n    method: 'POST',\n  },\n  unsubscribe: {\n    uri: '/assets/:id/unsubscribe',\n    method: 'POST',\n  },\n}\n\nexport const initPurchase = config => {\n  if (config.billingUrl) billingUrl = config.billingUrl\n}\n\nconst createUrl = (uri, baseUrl, params = {}) => {\n  return new URL(\n    // sprinkle in the params\n    Object.keys(params)\n      .reduce((res, key) => res.replace(new RegExp(':' + key, 'g'), params[key]), uri)\n      // remove any leading slash from uri\n      .replace(/^\\//, ''),\n    // make sure baseUrl always has a trailing slash\n    /\\/$/.test(baseUrl) ? baseUrl : baseUrl.replace(/$/, '/')\n  )\n}\n\nconst request = (url, method = 'GET', data, headers = {}) => {\n  if (method === 'GET' && data) {\n    url.search = new URLSearchParams(data)\n  }\n\n  return new Promise((resolve, reject) => {\n    fetch(url, {\n      headers: {\n        ...{\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n        ...headers,\n      },\n      method: method,\n      body: method !== 'GET' && data ? JSON.stringify(data) : null,\n    })\n      .then(response => (response.ok ? resolve(response.json()) : reject(response.statusText)))\n      .catch(reject)\n  })\n}\n\nconst cspRequest = (type, data = null, params = {}) => {\n  return new Promise((resolve, reject) => {\n    const endpoint = cspEndpoints[type]\n\n    if (!endpoint) {\n      reject('No endpoint found for \"' + type + '\" call')\n    } else {\n      if (endpoint.callback && typeof endpoint.callback === 'function') {\n        endpoint\n          .callback(data, params)\n          .then(resolve)\n          .catch(reject)\n      } else {\n        request(\n          createUrl(endpoint.uri, cspUrl, params),\n          endpoint.method,\n          {\n            ...(endpoint.data || {}),\n            ...data,\n          },\n          endpoint.headers || {}\n        )\n          .then(resolve)\n          .catch(reject)\n      }\n    }\n  })\n}\n\nconst billingRequest = (uri, data, method = 'POST') => {\n  return new Promise((resolve, reject) => {\n    request(createUrl(uri, billingUrl), method, data)\n      .then(resolve)\n      .catch(reject)\n  })\n}\n\nexport default {\n  setup(config) {\n    if (config.cspUrl) cspUrl = config.cspUrl\n    if (config.endpoints) cspEndpoints = { cspEndpoints, ...config.endpoints }\n  },\n  assets() {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('assets', { household })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  asset(id) {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('asset', { household }, { id })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  signature(id) {\n    return new Promise((resolve, reject) => {\n      Promise.all([Profile.household()]).then(([household]) => {\n        cspRequest('signature', { household }, { id })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  subscribe(id, transaction) {\n    return new Promise((resolve, reject) => {\n      cspRequest('subscribe', { ...transaction }, { id })\n        .then(resolve)\n        .catch(reject)\n    })\n  },\n  unsubscribe(id) {\n    return new Promise((resolve, reject) => {\n      Profile.household().then(household => {\n        cspRequest('unsubscribe', { household }, { id })\n          .then(resolve)\n          .catch(reject)\n      })\n    })\n  },\n  payment(signature = {}, type = 'in-app') {\n    return new Promise((resolve, reject) => {\n      Promise.all([\n        Profile.household(),\n        Profile.countryCode(),\n        Profile.operator(),\n        Profile.mac(),\n        Profile.uid(),\n      ])\n        .then(([household, country, operator, mac, uid]) => {\n          billingRequest('/', {\n            purchase: signature,\n            identifier: Settings.get('app', 'id'),\n            name: Settings.get('app', 'id'),\n            household,\n            country,\n            operator,\n            mac,\n            uid,\n            type,\n          })\n            .then(resolve)\n            .catch(reject)\n        })\n        .catch(reject)\n    })\n  },\n  confirm(transactionId) {\n    return new Promise((resolve, reject) => {\n      billingRequest('/confirm', {\n        transactionId,\n      })\n        .then(resolve)\n        .catch(reject)\n    })\n  },\n  buy(assetId, type) {\n    return new Promise((resolve, reject) => {\n      let transactionId\n      sequence([\n        () => this.signature(assetId),\n        signature => this.payment(signature, type),\n        transaction => {\n          transactionId = transaction.transactionId\n          return this.subscribe(assetId, transaction)\n        },\n        () => this.confirm(transactionId),\n      ])\n        .then(resolve)\n        .catch(reject)\n    })\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Pin from '../Pin'\n\nclass PinInput extends Lightning.Component {\n  static _template() {\n    return {\n      w: 120,\n      h: 150,\n      rect: true,\n      color: 0xff949393,\n      alpha: 0.5,\n      shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n      Nr: {\n        w: w => w,\n        y: 24,\n        text: {\n          text: '',\n          textColor: 0xff333333,\n          fontSize: 80,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n        },\n      },\n    }\n  }\n\n  set index(v) {\n    this.x = v * (120 + 24)\n  }\n\n  set nr(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    if (v) {\n      this.setSmooth('alpha', 1)\n    } else {\n      this.setSmooth('alpha', 0.5)\n    }\n\n    this.tag('Nr').patch({\n      text: {\n        text: (v && v.toString()) || '',\n        fontSize: v === '*' ? 120 : 80,\n      },\n    })\n\n    if (v && v !== '*') {\n      this._timeout = setTimeout(() => {\n        this._timeout = null\n        this.nr = '*'\n      }, 750)\n    }\n  }\n}\n\nexport default class PinDialog extends Lightning.Component {\n  static _template() {\n    return {\n      zIndex: 1,\n      w: w => w,\n      h: h => h,\n      rect: true,\n      color: 0xdd000000,\n      alpha: 0.000001,\n      Dialog: {\n        w: 648,\n        h: 320,\n        y: h => (h - 320) / 2,\n        x: w => (w - 648) / 2,\n        rect: true,\n        color: 0xdd333333,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n        Info: {\n          y: 24,\n          x: 48,\n          text: { text: 'Please enter your PIN', fontSize: 32 },\n        },\n        Msg: {\n          y: 260,\n          x: 48,\n          text: { text: '', fontSize: 28, textColor: 0xffffffff },\n        },\n        Code: {\n          x: 48,\n          y: 96,\n        },\n      },\n    }\n  }\n\n  _init() {\n    const children = []\n    for (let i = 0; i < 4; i++) {\n      children.push({\n        type: PinInput,\n        index: i,\n      })\n    }\n\n    this.tag('Code').children = children\n  }\n\n  get pin() {\n    if (!this._pin) this._pin = ''\n    return this._pin\n  }\n\n  set pin(v) {\n    if (v.length <= 4) {\n      const maskedPin = new Array(Math.max(v.length - 1, 0)).fill('*', 0, v.length - 1)\n      v.length && maskedPin.push(v.length > this._pin.length ? v.slice(-1) : '*')\n      for (let i = 0; i < 4; i++) {\n        this.tag('Code').children[i].nr = maskedPin[i] || ''\n      }\n      this._pin = v\n    }\n  }\n\n  get msg() {\n    if (!this._msg) this._msg = ''\n    return this._msg\n  }\n\n  set msg(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    this._msg = v\n    if (this._msg) {\n      this.tag('Msg').text = this._msg\n      this.tag('Info').setSmooth('alpha', 0.5)\n      this.tag('Code').setSmooth('alpha', 0.5)\n    } else {\n      this.tag('Msg').text = ''\n      this.tag('Info').setSmooth('alpha', 1)\n      this.tag('Code').setSmooth('alpha', 1)\n    }\n    this._timeout = setTimeout(() => {\n      this.msg = ''\n    }, 2000)\n  }\n\n  _firstActive() {\n    this.setSmooth('alpha', 1)\n  }\n\n  _handleKey(event) {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      const val = parseInt(event.key)\n      if (val > -1) {\n        this.pin += val\n      }\n    }\n  }\n\n  _handleBack() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      if (this.pin.length) {\n        this.pin = this.pin.slice(0, this.pin.length - 1)\n      } else {\n        Pin.hide()\n        this.resolve(false)\n      }\n    }\n  }\n\n  _handleEnter() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      Pin.submit(this.pin)\n        .then(val => {\n          this.msg = 'Unlocking ...'\n          setTimeout(() => {\n            Pin.hide()\n          }, 1000)\n          this.resolve(val)\n        })\n        .catch(e => {\n          this.msg = e\n          this.reject(e)\n        })\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport PinDialog from './dialog'\nimport { ApplicationInstance } from '../Launch'\nimport { Log } from '../../index'\n\n// only used during local development\nlet unlocked = false\nconst contextItems = ['purchase', 'parental']\n\nlet submit = (pin, context) => {\n  return new Promise((resolve, reject) => {\n    if (pin.toString() === Settings.get('platform', 'pin', '0000').toString()) {\n      unlocked = true\n      resolve(unlocked)\n    } else {\n      reject('Incorrect pin')\n    }\n  })\n}\n\nlet check = context => {\n  return new Promise(resolve => {\n    resolve(unlocked)\n  })\n}\n\nexport const initPin = config => {\n  if (config.submit && typeof config.submit === 'function') {\n    submit = config.submit\n  }\n  if (config.check && typeof config.check === 'function') {\n    check = config.check\n  }\n}\n\nlet pinDialog = null\n\nconst contextCheck = context => {\n  if (context === undefined) {\n    Log.info('Please provide context explicitly')\n    return contextItems[0]\n  } else if (!contextItems.includes(context)) {\n    Log.warn('Incorrect context provided')\n    return false\n  }\n  return context\n}\n\n// Public API\nexport default {\n  show() {\n    return new Promise((resolve, reject) => {\n      pinDialog = ApplicationInstance.stage.c({\n        ref: 'PinDialog',\n        type: PinDialog,\n        resolve,\n        reject,\n      })\n      ApplicationInstance.childList.a(pinDialog)\n      ApplicationInstance.focus = pinDialog\n    })\n  },\n  hide() {\n    ApplicationInstance.focus = null\n    ApplicationInstance.children = ApplicationInstance.children.map(\n      child => child !== pinDialog && child\n    )\n    pinDialog = null\n  },\n  submit(pin, context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context)\n        if (context) {\n          submit(pin, context)\n            .then(resolve)\n            .catch(reject)\n        } else {\n          reject('Incorrect Context provided')\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  unlocked(context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context)\n        if (context) {\n          check(context)\n            .then(resolve)\n            .catch(reject)\n        } else {\n          reject('Incorrect Context provided')\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  locked(context) {\n    return new Promise((resolve, reject) => {\n      try {\n        context = contextCheck(context)\n        if (context) {\n          check(context)\n            .then(unlocked => resolve(!!!unlocked))\n            .catch(reject)\n        } else {\n          reject('Incorrect Context provided')\n        }\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { initUtils } from '../Utils'\nimport { initProfile } from '../Profile'\nimport { initMetrics } from '../Metrics'\nimport { initSettings } from '../Settings'\nimport { initMediaPlayer } from '../MediaPlayer'\nimport { initVideoPlayer } from '../VideoPlayer'\nimport { initStorage } from '../Storage'\nimport { initAds } from '../Ads'\nimport { initRouter } from '../Router'\nimport { initTV } from '../TV'\nimport { initPurchase } from '../Purchase'\nimport { initPin } from '../Pin'\nimport { initMetadata } from '../Metadata'\nimport Application from '../Application'\n\nexport let ApplicationInstance\n\nexport default (App, appSettings, platformSettings, appData) => {\n  initSettings(appSettings, platformSettings)\n  initMetadata(appSettings)\n\n  initUtils(platformSettings)\n  initStorage()\n  // Initialize plugins\n  if (platformSettings.plugins) {\n    platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile)\n    platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics)\n    platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.ads && initAds(platformSettings.plugins.ads)\n    platformSettings.plugins.router && initRouter(platformSettings.plugins.router)\n    platformSettings.plugins.tv && initTV(platformSettings.plugins.tv)\n    platformSettings.plugins.purchase && initPurchase(platformSettings.plugins.purchase)\n    platformSettings.plugins.pin && initPin(platformSettings.plugins.pin)\n  }\n\n  const app = Application(App, appData, platformSettings)\n  ApplicationInstance = new app(appSettings)\n  return ApplicationInstance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Log from '../Log'\n\nexport default class VideoTexture extends Lightning.Component {\n  static _template() {\n    return {\n      Video: {\n        alpha: 1,\n        visible: false,\n        pivot: 0.5,\n        texture: { type: Lightning.textures.StaticTexture, options: {} },\n      },\n    }\n  }\n\n  set videoEl(v) {\n    this._videoEl = v\n  }\n\n  get videoEl() {\n    return this._videoEl\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  get videoTexture() {\n    return this.videoView.texture\n  }\n\n  get isVisible() {\n    return this.videoView.alpha === 1 && this.videoView.visible === true\n  }\n\n  _init() {\n    this._createVideoTexture()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n\n    this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision()\n    this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision()\n  }\n\n  start() {\n    const stage = this.stage\n    this._lastTime = 0\n    if (!this._updateVideoTexture) {\n      this._updateVideoTexture = () => {\n        if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n          const gl = stage.gl\n\n          const currentTime = new Date().getTime()\n          const getVideoPlaybackQuality = this.videoEl.getVideoPlaybackQuality()\n\n          // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n          // We'll fallback to fixed 30fps in this case.\n          // As 'webkitDecodedFrameCount' is about to deprecate, check for the 'totalVideoFrames'\n          const frameCount = getVideoPlaybackQuality\n            ? getVideoPlaybackQuality.totalVideoFrames\n            : this.videoEl.webkitDecodedFrameCount\n\n          const mustUpdate = frameCount\n            ? this._lastFrame !== frameCount\n            : this._lastTime < currentTime - 30\n\n          if (mustUpdate) {\n            this._lastTime = currentTime\n            this._lastFrame = frameCount\n            try {\n              gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n              gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n              gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n              this._lastFrame = this.videoEl.webkitDecodedFrameCount\n              this.videoView.visible = true\n\n              this.videoTexture.options.w = this.videoEl.width\n              this.videoTexture.options.h = this.videoEl.height\n              const expectedAspectRatio = this.videoView.w / this.videoView.h\n              const realAspectRatio = this.videoEl.width / this.videoEl.height\n\n              if (expectedAspectRatio > realAspectRatio) {\n                this.videoView.scaleX = realAspectRatio / expectedAspectRatio\n                this.videoView.scaleY = 1\n              } else {\n                this.videoView.scaleY = expectedAspectRatio / realAspectRatio\n                this.videoView.scaleX = 1\n              }\n            } catch (e) {\n              Log.error('texImage2d video', e)\n              this.stop()\n            }\n            this.videoTexture.source.forceRenderUpdate()\n          }\n        }\n      }\n    }\n    if (!this._updatingVideoTexture) {\n      stage.on('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = true\n    }\n  }\n\n  stop() {\n    const stage = this.stage\n    stage.removeListener('frameStart', this._updateVideoTexture)\n    this._updatingVideoTexture = false\n    this.videoView.visible = false\n\n    if (this.videoTexture.options.source) {\n      const gl = stage.gl\n      gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n      gl.clearColor(0, 0, 0, 1)\n      gl.clear(gl.COLOR_BUFFER_BIT)\n    }\n  }\n\n  position(top, left) {\n    this.videoView.patch({\n      smooth: {\n        x: left,\n        y: top,\n      },\n    })\n  }\n\n  size(width, height) {\n    this.videoView.patch({\n      smooth: {\n        w: width,\n        h: height,\n      },\n    })\n  }\n\n  show() {\n    this.videoView.setSmooth('alpha', 1)\n  }\n\n  hide() {\n    this.videoView.setSmooth('alpha', 0)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport executeAsPromise from '@michieljs/execute-as-promise'\n\nimport Metrics from '../Metrics'\nimport Log from '../Log'\nimport Ads from '../Ads'\n\nimport events from './events'\nimport autoSetupMixin from '../helpers/autoSetupMixin'\nimport easeExecution from '../helpers/easeExecution'\nimport { ApplicationInstance } from '../Launch'\nimport Settings from '../Settings'\nimport VideoTexture from './VideoTexture'\n\nexport let mediaUrl = url => url\nlet videoEl\nlet videoTexture\nlet metrics\nlet consumer\nlet precision = 1\nlet textureMode = false\n\nexport const initVideoPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\n// todo: add this in a 'Registry' plugin\n// to be able to always clean this up on app close\nlet eventHandlers = {}\n\nconst state = {\n  adsEnabled: false,\n  playing: false,\n  _playingAds: false,\n  get playingAds() {\n    return this._playingAds\n  },\n  set playingAds(val) {\n    if (this._playingAds !== val) {\n      this._playingAds = val\n      fireOnConsumer(val === true ? 'AdStart' : 'AdEnd')\n    }\n  },\n  skipTime: false,\n  playAfterSeek: null,\n}\n\nconst hooks = {\n  play() {\n    state.playing = true\n  },\n  pause() {\n    state.playing = false\n  },\n  seeked() {\n    state.playAfterSeek === true && videoPlayerPlugin.play()\n    state.playAfterSeek = null\n  },\n  abort() {\n    deregisterEventListeners()\n  },\n}\n\nconst withPrecision = val => Math.round(precision * val) + 'px'\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$videoPlayer' + event, args, videoEl.currentTime)\n    consumer.fire('$videoPlayerEvent', event, args, videoEl.currentTime)\n  }\n}\n\nconst fireHook = (event, args) => {\n  hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args)\n}\n\nlet customLoader = null\nlet customUnloader = null\n\nconst loader = (url, videoEl, config) => {\n  return customLoader && typeof customLoader === 'function'\n    ? customLoader(url, videoEl, config)\n    : new Promise(resolve => {\n        url = mediaUrl(url)\n        videoEl.setAttribute('src', url)\n        videoEl.load()\n        resolve()\n      })\n}\n\nconst unloader = videoEl => {\n  return customUnloader && typeof customUnloader === 'function'\n    ? customUnloader(videoEl)\n    : new Promise(resolve => {\n        videoEl.removeAttribute('src')\n        videoEl.load()\n        resolve()\n      })\n}\n\nexport const setupVideoTag = () => {\n  const videoEls = document.getElementsByTagName('video')\n  if (videoEls && videoEls.length) {\n    return videoEls[0]\n  } else {\n    const videoEl = document.createElement('video')\n    videoEl.setAttribute('id', 'video-player')\n    videoEl.setAttribute('width', withPrecision(1920))\n    videoEl.setAttribute('height', withPrecision(1080))\n    videoEl.style.position = 'absolute'\n    videoEl.style.zIndex = '1'\n    videoEl.style.display = 'none'\n    videoEl.style.visibility = 'hidden'\n    videoEl.style.top = withPrecision(0)\n    videoEl.style.left = withPrecision(0)\n    videoEl.style.width = withPrecision(1920)\n    videoEl.style.height = withPrecision(1080)\n    document.body.appendChild(videoEl)\n    return videoEl\n  }\n}\n\nexport const setUpVideoTexture = () => {\n  if (!ApplicationInstance.tag('VideoTexture')) {\n    const el = ApplicationInstance.stage.c({\n      type: VideoTexture,\n      ref: 'VideoTexture',\n      zIndex: 0,\n      videoEl,\n    })\n    ApplicationInstance.childList.addAt(el, 0)\n  }\n  return ApplicationInstance.tag('VideoTexture')\n}\n\nconst registerEventListeners = () => {\n  Log.info('VideoPlayer', 'Registering event listeners')\n  Object.keys(events).forEach(event => {\n    const handler = e => {\n      // Fire a metric for each event (if it exists on the metrics object)\n      if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n        metrics[event]({ currentTime: videoEl.currentTime })\n      }\n      // fire an internal hook\n      fireHook(event, { videoElement: videoEl, event: e })\n\n      // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n      fireOnConsumer(events[event], { videoElement: videoEl, event: e })\n    }\n\n    eventHandlers[event] = handler\n    videoEl.addEventListener(event, handler)\n  })\n}\n\nconst deregisterEventListeners = () => {\n  Log.info('VideoPlayer', 'Deregistering event listeners')\n  Object.keys(eventHandlers).forEach(event => {\n    videoEl.removeEventListener(event, eventHandlers[event])\n  })\n  eventHandlers = {}\n}\n\nconst videoPlayerPlugin = {\n  consumer(component) {\n    consumer = component\n  },\n\n  loader(loaderFn) {\n    customLoader = loaderFn\n  },\n\n  unloader(unloaderFn) {\n    customUnloader = unloaderFn\n  },\n\n  position(top = 0, left = 0) {\n    videoEl.style.left = withPrecision(left)\n    videoEl.style.top = withPrecision(top)\n    if (textureMode === true) {\n      videoTexture.position(top, left)\n    }\n  },\n\n  size(width = 1920, height = 1080) {\n    videoEl.style.width = withPrecision(width)\n    videoEl.style.height = withPrecision(height)\n    videoEl.width = parseFloat(videoEl.style.width)\n    videoEl.height = parseFloat(videoEl.style.height)\n    if (textureMode === true) {\n      videoTexture.size(width, height)\n    }\n  },\n\n  area(top = 0, right = 1920, bottom = 1080, left = 0) {\n    this.position(top, left)\n    this.size(right - left, bottom - top)\n  },\n\n  open(url, config = {}) {\n    if (!this.canInteract) return\n    metrics = Metrics.media(url)\n\n    this.hide()\n    deregisterEventListeners()\n\n    if (this.src == url) {\n      this.clear().then(this.open(url, config))\n    } else {\n      const adConfig = { enabled: state.adsEnabled, duration: 300 }\n      if (config.videoId) {\n        adConfig.caid = config.videoId\n      }\n      Ads.get(adConfig, consumer).then(ads => {\n        state.playingAds = true\n        ads.prerolls().then(() => {\n          state.playingAds = false\n          loader(url, videoEl, config)\n            .then(() => {\n              registerEventListeners()\n              this.show()\n              this.play()\n            })\n            .catch(e => {\n              fireOnConsumer('error', { videoElement: videoEl, event: e })\n            })\n        })\n      })\n    }\n  },\n\n  reload() {\n    if (!this.canInteract) return\n    const url = videoEl.getAttribute('src')\n    this.close()\n    this.open(url)\n  },\n\n  close() {\n    Ads.cancel()\n    if (state.playingAds) {\n      state.playingAds = false\n      Ads.stop()\n      // call self in next tick\n      setTimeout(() => {\n        this.close()\n      })\n    }\n    if (!this.canInteract) return\n    this.clear()\n    this.hide()\n    deregisterEventListeners()\n  },\n\n  clear() {\n    if (!this.canInteract) return\n    // pause the video first to disable sound\n    this.pause()\n    if (textureMode === true) videoTexture.stop()\n    return unloader(videoEl).then(() => {\n      fireOnConsumer('Clear', { videoElement: videoEl })\n    })\n  },\n\n  play() {\n    if (!this.canInteract) return\n    if (textureMode === true) videoTexture.start()\n    executeAsPromise(videoEl.play, null, videoEl).catch(e => {\n      fireOnConsumer('error', { videoElement: videoEl, event: e })\n    })\n  },\n\n  pause() {\n    if (!this.canInteract) return\n    videoEl.pause()\n  },\n\n  playPause() {\n    if (!this.canInteract) return\n    this.playing === true ? this.pause() : this.play()\n  },\n\n  mute(muted = true) {\n    if (!this.canInteract) return\n    videoEl.muted = muted\n  },\n\n  loop(looped = true) {\n    videoEl.loop = looped\n  },\n\n  seek(time) {\n    if (!this.canInteract) return\n    if (!this.src) return\n    // define whether should continue to play after seek is complete (in seeked hook)\n    if (state.playAfterSeek === null) {\n      state.playAfterSeek = !!state.playing\n    }\n    // pause before actually seeking\n    this.pause()\n    // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n    videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1))\n  },\n\n  skip(seconds) {\n    if (!this.canInteract) return\n    if (!this.src) return\n\n    state.skipTime = (state.skipTime || videoEl.currentTime) + seconds\n    easeExecution(() => {\n      this.seek(state.skipTime)\n      state.skipTime = false\n    }, 300)\n  },\n\n  show() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.show()\n    } else {\n      videoEl.style.display = 'block'\n      videoEl.style.visibility = 'visible'\n    }\n  },\n\n  hide() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.hide()\n    } else {\n      videoEl.style.display = 'none'\n      videoEl.style.visibility = 'hidden'\n    }\n  },\n\n  enableAds(enabled = true) {\n    state.adsEnabled = enabled\n  },\n\n  /* Public getters */\n  get duration() {\n    return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration)\n  },\n\n  get currentTime() {\n    return videoEl && videoEl.currentTime\n  },\n\n  get muted() {\n    return videoEl && videoEl.muted\n  },\n\n  get looped() {\n    return videoEl && videoEl.loop\n  },\n\n  get src() {\n    return videoEl && videoEl.getAttribute('src')\n  },\n\n  get playing() {\n    return state.playing\n  },\n\n  get playingAds() {\n    return state.playingAds\n  },\n\n  get canInteract() {\n    // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n    return state.playingAds === false\n  },\n\n  get top() {\n    return videoEl && parseFloat(videoEl.style.top)\n  },\n\n  get left() {\n    return videoEl && parseFloat(videoEl.style.left)\n  },\n\n  get bottom() {\n    return videoEl && parseFloat(videoEl.style.top - videoEl.style.height)\n  },\n\n  get right() {\n    return videoEl && parseFloat(videoEl.style.left - videoEl.style.width)\n  },\n\n  get width() {\n    return videoEl && parseFloat(videoEl.style.width)\n  },\n\n  get height() {\n    return videoEl && parseFloat(videoEl.style.height)\n  },\n\n  get visible() {\n    if (textureMode === true) {\n      return videoTexture.isVisible\n    } else {\n      return videoEl && videoEl.style.display === 'block'\n    }\n  },\n\n  get adsEnabled() {\n    return state.adsEnabled\n  },\n\n  // prefixed with underscore to indicate 'semi-private'\n  // because it's not recommended to interact directly with the video element\n  get _videoEl() {\n    return videoEl\n  },\n\n  get _consumer() {\n    return consumer\n  },\n}\n\nexport default autoSetupMixin(videoPlayerPlugin, () => {\n  precision =\n    (ApplicationInstance &&\n      ApplicationInstance.stage &&\n      ApplicationInstance.stage.getRenderPrecision()) ||\n    precision\n\n  videoEl = setupVideoTag()\n\n  textureMode = Settings.get('platform', 'textureMode', false)\n  if (textureMode === true) {\n    videoEl.setAttribute('crossorigin', 'anonymous')\n    videoTexture = setUpVideoTexture()\n  }\n})\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mediaUrl } from '../VideoPlayer'\n\nlet consumer\n\nlet getAds = () => {\n  // todo: enable some default ads during development, maybe from the settings.json\n  return Promise.resolve({\n    prerolls: [],\n    midrolls: [],\n    postrolls: [],\n  })\n}\n\nexport const initAds = config => {\n  if (config.getAds) {\n    getAds = config.getAds\n  }\n}\n\nconst state = {\n  active: false,\n}\n\nconst playSlot = (slot = []) => {\n  return slot.reduce((promise, ad) => {\n    return promise.then(() => {\n      return playAd(ad)\n    })\n  }, Promise.resolve(null))\n}\n\nconst playAd = ad => {\n  return new Promise(resolve => {\n    if (state.active === false) {\n      Log.info('Ad', 'Skipping add due to inactive state')\n      return resolve()\n    }\n    // is it safe to rely on videoplayer plugin already created the video tag?\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.style.display = 'block'\n    videoEl.style.visibility = 'visible'\n    videoEl.src = mediaUrl(ad.url)\n    videoEl.load()\n\n    let timeEvents = null\n    let timeout\n\n    const cleanup = () => {\n      // remove all listeners\n      Object.keys(handlers).forEach(handler =>\n        videoEl.removeEventListener(handler, handlers[handler])\n      )\n      resolve()\n    }\n    const handlers = {\n      play() {\n        Log.info('Ad', 'Play ad', ad.url)\n        fireOnConsumer('Play', ad)\n        sendBeacon(ad.callbacks, 'defaultImpression')\n      },\n      ended() {\n        fireOnConsumer('Ended', ad)\n        sendBeacon(ad.callbacks, 'complete')\n        cleanup()\n      },\n      timeupdate() {\n        if (!timeEvents && videoEl.duration) {\n          // calculate when to fire the time based events (now that duration is known)\n          timeEvents = {\n            firstQuartile: videoEl.duration / 4,\n            midPoint: videoEl.duration / 2,\n            thirdQuartile: (videoEl.duration / 4) * 3,\n          }\n          Log.info('Ad', 'Calculated quartiles times', { timeEvents })\n        }\n        if (\n          timeEvents &&\n          timeEvents.firstQuartile &&\n          videoEl.currentTime >= timeEvents.firstQuartile\n        ) {\n          fireOnConsumer('FirstQuartile', ad)\n          delete timeEvents.firstQuartile\n          sendBeacon(ad.callbacks, 'firstQuartile')\n        }\n        if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n          fireOnConsumer('MidPoint', ad)\n          delete timeEvents.midPoint\n          sendBeacon(ad.callbacks, 'midPoint')\n        }\n        if (\n          timeEvents &&\n          timeEvents.thirdQuartile &&\n          videoEl.currentTime >= timeEvents.thirdQuartile\n        ) {\n          fireOnConsumer('ThirdQuartile', ad)\n          delete timeEvents.thirdQuartile\n          sendBeacon(ad.callbacks, 'thirdQuartile')\n        }\n      },\n      stalled() {\n        fireOnConsumer('Stalled', ad)\n        timeout = setTimeout(() => {\n          cleanup()\n        }, 5000) // make timeout configurable\n      },\n      canplay() {\n        timeout && clearTimeout(timeout)\n      },\n      error() {\n        fireOnConsumer('Error', ad)\n        cleanup()\n      },\n      // this doesn't work reliably on sky box, moved logic to timeUpdate event\n      // loadedmetadata() {\n      //   // calculate when to fire the time based events (now that duration is known)\n      //   timeEvents = {\n      //     firstQuartile: videoEl.duration / 4,\n      //     midPoint: videoEl.duration / 2,\n      //     thirdQuartile: (videoEl.duration / 4) * 3,\n      //   }\n      // },\n      abort() {\n        cleanup()\n      },\n      // todo: pause, resume, mute, unmute beacons\n    }\n    // add all listeners\n    Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]))\n\n    videoEl.play()\n  })\n}\n\nconst sendBeacon = (callbacks, event) => {\n  if (callbacks && callbacks[event]) {\n    Log.info('Ad', 'Sending beacon', event, callbacks[event])\n    return callbacks[event].reduce((promise, url) => {\n      return promise.then(() =>\n        fetch(url)\n          // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n          // note: for fetch failed http responses don't throw an Error :)\n          .then(response => {\n            if (response.status === 200) {\n              fireOnConsumer('Beacon' + event + 'Sent')\n            } else {\n              fireOnConsumer('Beacon' + event + 'Failed' + response.status)\n            }\n            Promise.resolve(null)\n          })\n          .catch(() => {\n            Promise.resolve(null)\n          })\n      )\n    }, Promise.resolve(null))\n  } else {\n    Log.info('Ad', 'No callback found for ' + event)\n  }\n}\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$ad' + event, args)\n    consumer.fire('$adEvent', event, args)\n  }\n}\n\nexport default {\n  get(config, videoPlayerConsumer) {\n    if (config.enabled === false) {\n      return Promise.resolve({\n        prerolls() {\n          return Promise.resolve()\n        },\n      })\n    }\n    consumer = videoPlayerConsumer\n\n    return new Promise(resolve => {\n      Log.info('Ad', 'Starting session')\n      getAds(config).then(ads => {\n        Log.info('Ad', 'API result', ads)\n        resolve({\n          prerolls() {\n            if (ads.preroll) {\n              state.active = true\n              fireOnConsumer('PrerollSlotImpression', ads)\n              sendBeacon(ads.preroll.callbacks, 'slotImpression')\n              return playSlot(ads.preroll.ads).then(() => {\n                fireOnConsumer('PrerollSlotEnd', ads)\n                sendBeacon(ads.preroll.callbacks, 'slotEnd')\n                state.active = false\n              })\n            }\n            return Promise.resolve()\n          },\n          midrolls() {\n            return Promise.resolve()\n          },\n          postrolls() {\n            return Promise.resolve()\n          },\n        })\n      })\n    })\n  },\n  cancel() {\n    Log.info('Ad', 'Cancel Ad')\n    state.active = false\n  },\n  stop() {\n    Log.info('Ad', 'Stop Ad')\n    state.active = false\n    // fixme: duplication\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.pause()\n    videoEl.removeAttribute('src')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class ScaledImageTexture extends Lightning.textures.ImageTexture {\n  constructor(stage) {\n    super(stage)\n    this._scalingOptions = undefined\n  }\n\n  set options(options) {\n    this.resizeMode = this._scalingOptions = options\n  }\n\n  _getLookupId() {\n    return `${this._src}-${this._scalingOptions.type}-${this._scalingOptions.w}-${this._scalingOptions.h}`\n  }\n\n  getNonDefaults() {\n    const obj = super.getNonDefaults()\n    if (this._src) {\n      obj.src = this._src\n    }\n    return obj\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Utils from '../Utils'\nimport Settings from '../Settings'\nimport ScaledImageTexture from './ScaledImageTexture'\n\nexport default (imageUrl, options) => {\n  const imageServerUrl = Settings.get('platform', 'imageServerUrl')\n\n  // make and return ScaledImageTexture\n  const make = options => {\n    // local asset, wrap it in Utils.asset()\n    if (!/^(?:https?:)?\\/\\//i.test(imageUrl)) {\n      imageUrl = Utils.asset(imageUrl)\n    }\n\n    // only pass to image server if imageServerUrl is configured\n    // and if the asset isn't local to the app (i.e. has same origin)\n    if (imageServerUrl && imageUrl.indexOf(window.location.origin) === -1) {\n      imageUrl = Utils.ensureUrlWithProtocol(\n        imageServerUrl + '?' + Utils.makeQueryString(imageUrl, options)\n      )\n    } else {\n      // Lightning will handle the resizing and has only 2 flavours (cover and contain)\n      if (options.type === 'crop') options.type = 'cover'\n      else options.type = 'contain'\n    }\n\n    return {\n      type: ScaledImageTexture,\n      src: imageUrl,\n      options: options,\n    }\n  }\n\n  // merge options with default\n  const setOptions = options => {\n    options = {\n      ...{\n        type: 'contain',\n        w: 0,\n        h: 0,\n      },\n      ...options,\n    }\n    const imageQuality = Math.max(\n      0.1,\n      Math.min(1, (parseFloat(Settings.get('platform', 'image.quality')) || 100) / 100)\n    )\n\n    options.w = options.w * imageQuality\n    options.h = options.h * imageQuality\n    return options\n  }\n\n  // if options are passed, return scaled image right away\n  if (options) {\n    return make(setOptions(options))\n  }\n\n  // otherwise return 'chained' functions\n  return {\n    // official api\n    exact: (w, h) => make(setOptions({ type: 'exact', w, h })),\n    landscape: w => make(setOptions({ type: 'landscape', w })),\n    portrait: h => make(setOptions({ type: 'portrait', h })),\n    cover: (w, h) => make(setOptions({ type: 'cover', w, h })),\n    contain: (w, h) => make(setOptions({ type: 'contain', w, h })),\n    original: () => make(setOptions({ type: 'contain' })),\n\n    // todo: add positioning - i.e. top, bottom, center, left etc.\n  }\n}\n","import { Lightning } from \"@lightningjs/sdk\";\nexport const transition = (target, value, resetDur = 0.3) => {\n    if(target.isRunning() && value === target.targetValue) {\n        return;\n    }\n    if(target.isRunning()) {\n        target.reset(value, resetDur);\n    }\n    else {\n        target.start(value);\n    }\n}\n\nexport const animation = (animation, target, scope, settings) => {\n    if(animation) {\n        animation.pause();\n    }\n    animation = scope.tag(target).animation(settings);\n    animation.start();\n    return animation;\n}\n\nexport const extractCommonColor = (texture, gl) => {\n    const fb = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\n    gl.framebufferTexture2D(\n        gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0,\n        gl.TEXTURE_2D, texture, 0);\n\n    const tmp = new Uint8Array(4);\n    let colors = [];\n    const offset = Math.floor(texture.w / 6);\n    const step = offset;\n    for (let i = offset, n = texture.w - offset; i < n; i += step) {\n        for (let j = offset, o = texture.h - offset; j < o; j += step) {\n            gl.readPixels(j, i, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, tmp);\n            colors.push(Lightning.StageUtils.getArgbNumber(tmp))\n        }\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.deleteFramebuffer(fb);\n\n    // const filtered = colors.filter(color => {\n    //     const hsv = rgbToHsv(Lightning.StageUtils.getRgbComponentsNormalized(color));\n    //     return hsv.s > 50 && hsv.v > 50;\n    // });\n\n    const filtered = colors.filter(color => {\n        return color>4283190348\n    })\n\n    const availableColors = filtered.length ? filtered : colors\n    let color;\n    if(!filtered.length){\n        color = colors.sort((a,b)=>{\n            return a>b?1:-1\n        }).pop()\n    }else{\n        color = availableColors.sort((a,b) =>\n            availableColors.filter(v => v===a).length\n            - availableColors.filter(v => v===b).length\n        ).pop();\n    }\n\n    return color;\n}\n\nconst rgbToHsv = (arr) => {\n    let rabs = arr[0];\n    let gabs = arr[1];\n    let babs = arr[2];\n    let h, s;\n    let v = Math.max(rabs, gabs, babs);\n    let diff = v - Math.min(rabs, gabs, babs);\n    let diffc = c => (v - c) / 6 / diff + 1 / 2;\n    let percentRound = num => Math.round(num * 100) / 100;\n\n    if(diff === 0) {\n        h = s = 0;\n    }\n    else {\n        s = diff / v;\n        let rr = diffc(rabs);\n        let gg = diffc(gabs);\n        let bb = diffc(babs);\n\n        if(rabs === v) {\n            h = bb - gg;\n        }\n        else if(gabs === v) {\n            h = (1 / 3) + rr - bb;\n        }\n        else if(babs === v) {\n            h = (2 / 3) + gg - rr;\n        }\n\n        if(h < 0) {\n            h += 1;\n        }\n        else if(h > 1) {\n            h -= 1;\n        }\n    }\n\n    return {\n        h: Math.round(h * 360),\n        s: percentRound(s * 100),\n        v: percentRound(v * 100)\n    }\n}","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning } from \"@lightningjs/sdk\";\nexport default class SwirlShader extends Lightning.shaders.WebGLDefaultShader {\n    constructor(ctx) {\n        super(ctx);\n\n        this._blur = 1;\n        this._pull = 0;\n    }\n\n    get pull() {\n        return this._pull;\n    }\n\n    set pull(v) {\n        this._pull = v;\n        this.redraw();\n    }\n\n    get blur() {\n        return this._blur;\n    }\n\n    set blur(v) {\n        this._blur = v;\n        this.redraw();\n    }\n\n    setupUniforms(operation) {\n        super.setupUniforms(operation);\n\n        // We substract half a pixel to get a better cutoff effect.\n        if (!this._start) {\n            this._start = Date.now();\n        }\n\n        const time = (0.0005 * (Date.now() - this._start)) % 16.0;\n\n        this._setUniform(\"t\", time, this.gl.uniform1f);\n\n        this._setUniform(\"pull\", this._pull, this.gl.uniform1f);\n        this._setUniform(\"blur\", this._blur, this.gl.uniform1f);\n\n        const period = (((time / 4) % 2.0) * Math.PI);\n        this._setUniform(\"period\", period, this.gl.uniform1f);\n\n        // Force redraw to keep painting while visible.\n        this.redraw()\n    }\n\n}\n\nSwirlShader.fragmentShaderSource = `\n    #ifdef GL_ES\n    precision lowp float;\n    #endif\n    varying vec2 vTextureCoord;\n    varying vec4 vColor;\n    uniform sampler2D uSampler;\n    uniform float t;\n    uniform float pull;\n    uniform float blur;\n    uniform float period;\n    void main(void){\n        float x = vTextureCoord.x - 0.5;\n        \n        float g = sin(sin(0.7854*t)*(4.0*x)+0.3927*t)+sin(sin(0.3927*t)*(2.0*x)+0.3927*t);\n        g -= pull * cos(6.0 * x) * 1.5; \n        g = 0.1 * g - (vTextureCoord.y - 0.5);\n        \n        float bl = 40.0 - 20.0 * abs(sin(period + x * 3.0));\n        g = g * bl * blur;\n        \n        float ga = max(0.0, g);\n        float deltaSquared = ga * ga;\n        \n        float value = 1.0 / (deltaSquared + 1.0);\n                \n        vec4 color = texture2D(uSampler, vTextureCoord) * vColor * value;\n        \n        // if (g < 0.0) {\n        //      color = color * max(0.0, (1.0 + 0.05 * g));\n        // }\n        \n        gl_FragColor = color;\n    }\n`;","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning, Colors, Utils } from \"@lightningjs/sdk\";\nimport { animation } from \"../lib/helpers.js\";\nimport Swirl from '../shaders/Swirl.js';\n\nexport default class AmbientBackground extends Lightning.Component {\n    static _template() {\n        return {\n            w: 1920,\n            h: 1080,\n            rect: true,\n            color: Colors('background').get(),\n            Swirl: {\n                w: 1920, h: 1080,\n                src: Utils.asset('images/swirlBackground.jpg'),\n                shader: {type: Swirl, blur: 0.008, pull: 8}\n            }\n        }\n    }\n\n    _changeColor(argb) {\n        const prevColor = this._targetColor || Colors('background').get();\n        const color = this._targetColor = argb || Colors('background').get();\n\n        this._colorAnimation = animation(this._colorAnimation, 'Swirl', this, {\n            duration: 1, actions: [\n                {p: 'colorTop', v: {0: Colors(prevColor).darker(0.2), 1: Colors(color).darker(0.2)}},\n                {p: 'colorBottom', v: {0: prevColor, 1: color}}\n            ]\n        });\n    }\n\n    update(argb) {\n        this._changeColor(argb);\n    }\n}","import { Lightning, Colors, Utils } from \"@lightningjs/sdk\";\n\nexport default class Button extends Lightning.Component {\n    static _template() {\n        return {\n            Background: {\n                w: w => w, h: h => h, rect: true, color: Colors('white').alpha(0.5).get(), shader: {type: Lightning.shaders.RoundedRectangle, stroke: 7, strokeColor: 0xffffffff, fillColor: 0x00ffffff, radius: 22, blend: 1}\n            },\n            Content: {mount: 0.5, x: w => w / 2, color: Colors('white').get(), y: h => h / 2},\n            Text: {w: 50, text: {fontFace: 'Bold', wrap: true, fontSize: 24, lineHeight: 30}}\n        }\n    }\n\n    set icon (src) {\n        this._icon = src;\n        this.tag('Content').src = Utils.asset(src);\n    }\n\n    get icon() {\n        return this._icon;\n    }\n\n    set content(obj) {\n        this.tag('Content').patch(obj);\n    }\n\n    get content() {\n        return this.tag('Content');\n    }\n\n    set text(text) {\n        console.log({text}) // TODO: Show text\n        this.tag('Text').patch({\n            text\n        });\n    }\n\n    get text(){\n        return this.tag('Text');\n    }\n    _init() {\n        const whiteAlpha = Colors('white').alpha(0.5).get();\n        this._focusAnimation = this.animation({duration: 0.2, actions: [\n            {t: 'Background', p: 'shader.fillColor', v: {0: 0x00ffffff, 1: 0xffffffff}},\n            {t: 'Background', p: 'colorTop', v: {0: whiteAlpha, 1: Colors('focus').get()}},\n            {t: 'Background', p: 'colorBottom', v: {0: whiteAlpha, 1: Colors('focus2').get()}},\n        ]})\n    }\n\n    _focus() {\n        this._focusAnimation.start();\n    }\n\n    _unfocus() {\n        this._focusAnimation.stop();\n    }\n}","const _baseUrl = 'http://192.168.1.172:4000'; //'https://api.themoviedb.org/3/';\nconst _headers = {\n    'Content-Type': 'application/json'\n};\nconst _tmdbBaseUrl = 'https://api.themoviedb.org/3'\nconst _params = {\n    'api_key': '66683917a94e703e14ca150023f4ea7c',\n};\n\nconst _executeRequest = (config, retryCounter = 0) => {\n    const {url, target, body, headers = {}, exceptions = {}, method, timeout} = config;\n    return new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open(method, url, true);\n        xhr.timeout = timeout || 10000;\n\n        for(let key in headers) {\n            xhr.setRequestHeader(key, headers[key]);\n        }\n\n        xhr.onload = () => {\n            if(xhr.status !== 200 && exceptions[xhr.status]) {\n                resolve(xhr);\n            }\n            else if(xhr.status !== 200) {\n                reject(target);\n            }\n            else {\n                resolve(JSON.parse(xhr.response));\n            }\n        }\n\n        xhr.onerror = () => {\n            if(xhr.status !== 200 && exceptions[xhr.status]) {\n                resolve(xhr);\n            }\n            else {\n                reject(target);\n            }\n        }\n\n        xhr.ontimeout = () => {\n            if(retryCounter === 3) {\n                reject(target);\n            }\n            else {\n                retryCounter++;\n                resolve(_executeRequest(config, retryCounter))\n            }\n        }\n        xhr.send(body);\n    })\n}\n\nconst _request = ({url, target, params = {}, body = {}, headers = {}, exceptions = {}, method, timeout}) => {\n    headers = {..._headers, ...headers};\n    params = {..._params, ...params};\n    url = url || _baseUrl + target;\n\n    if(method !== 'GET') {\n        body = JSON.stringify(body);\n    }\n    if(method === 'GET' && params) {\n        url += `?${qsify(params)}`;\n    }\n    return _executeRequest({url, target, body, headers, exceptions, method, timeout})\n}\n\nconst qsify = obj => {\n    const ec = v=>encodeURIComponent(v);\n    return Object.keys(obj).map((key) => {\n        return `${ec(key)}=${ec(obj[key])}`;\n    }).join(\"&\");\n};\n\n//public functions\nexport const getRequest = (obj) => {\n    return _request({...obj, method: 'GET'});\n};\n\nexport const generateRequestIterable = (obj, amount) => {\n    return new Array(amount).fill(\"\").map(() => _request({...obj, method: 'GET'}));\n}\n\nexport const postRequest = (obj) => {\n    return _request({...obj, method: 'POST'});\n};\n\n\nconst groupByGenre = (list) => {\n    return list.reduce((acc, cur) => {\n        if(!acc[cur.genres[0]]) {\n            acc[cur.genres[0]] = [];\n        }\n        acc[cur.genres[0]].push(cur);\n        return acc;\n    }, {})\n}\n\n\nconst capitalize = (string) => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nconst _fetchPageData = (queryTemplate, itemParams = {}) => {\n    const [query] = queryTemplate\n\n    return postRequest({\n        url: `${_baseUrl}/graphql`,\n        body: {query}\n    }).then(({data}) => {\n        const { moviesList } = data\n        const groupedMovies = groupByGenre(moviesList);\n        const movies = Object.keys(groupedMovies).map(key => ({\n            title: capitalize(key),\n            media_type: 'movie',\n            items: groupedMovies[key]\n        }));\n\n        return movies.sort((a, b) =>  b.items.length - a.items.length)\n    })\n}\n\nexport const getSearchResults = (query) => {\n    console.log(query.trim().toLowerCase())\n\n    const gqlQuery = `\n        query {\n            moviesSearch(arguments: { keyword: \"${query.trim().toLowerCase()}\" }) {\n                id\n                title\n                description\n                genres\n                rating\n                year\n                images {\n                    bannerUrl\n                    posterUrl\n                    fanartUrl\n                }\n            }\n        }\n        `;\n\n    return postRequest({url: `${_baseUrl}/graphql`, body: {query: gqlQuery}})\n            .then(({data}) => {\n                const { moviesSearch: results } = data\n                return results\n            })\n}\n\nexport const getHomePage = () => {\n    return _fetchPageData`\n    query {\n        moviesList {\n            id\n            title\n            description\n            genres\n            rating\n            year\n            images {\n                bannerUrl\n                posterUrl\n                fanartUrl\n            }\n        }\n    }\n    `\n}\n\nexport const getMoviesPage = () => {\n    const currentDate = new Date();\n    const futureDate = _futureDate(currentDate);\n    const pastDate = _pastDate(currentDate);\n    return _fetchPageData([\n        {path: 'discover/movie', title: 'Most Popular'},\n        {path: 'discover/movie', params: {sort_by: 'vote_count.desc'}, title: 'Top Rated'},\n        {path: 'discover/movie', params: {with_watch_monetization_types: 'free'}, title: 'Free to Watch'},\n        {path: 'discover/movie', params: {'release_date.gte': futureDate.gte, 'release_date.lte': futureDate.lte, 'with_release_type': 3}, title: 'Upcoming'},\n        {path: 'discover/movie', params: {'release_date.gte': pastDate.gte, 'release_date.lte': pastDate.lte, 'with_release_type': 3}, title: 'In Theaters'},\n    ], {media_type: 'movie'});\n}\n\nexport const getSeriesPage = () => {\n    const currentDate = new Date();\n    const formatCurrentDate = `${_nomalizeDatePart(currentDate.getDay())}-${_nomalizeDatePart(currentDate.getMonth() + 1)}-${currentDate.getFullYear()}`;\n    return _fetchPageData([\n        {path: 'discover/tv', title: 'Most Popular'},\n        {path: 'discover/tv', params: {sort_by: 'vote_count.desc'}, title: 'Top Rated'},\n        {path: 'discover/tv', params: {'release_date.gte': formatCurrentDate, 'release_date.lte': formatCurrentDate}, title: 'Airing Today'}\n    ], {media_type: 'tv'});\n}\n\nexport const getBackdropUrl = (imdbId) => {\n    return getRequest({url: `${_tmdbBaseUrl}/find/${imdbId}`, params: {..._params, external_source: 'imdb_id'}})\n        .then(({movie_results}) => {\n            const [movie] = movie_results;\n            return `https://image.tmdb.org/t/p/original${movie.backdrop_path}`;\n        })\n}\n\nexport const getDetailPage = (mediaType, mediaId) => {\n\n    const query = `\n    query {\n        movieById(id: \"${mediaId}\") {\n            id\n            title\n            runtime\n            description\n            originalLanguage\n            genres\n            rating\n            year\n            images {\n                bannerUrl\n                posterUrl\n                fanartUrl\n            }\n            torrents {\n                quality\n            }\n        }\n    }\n    `\n\n    return postRequest({url: `${_baseUrl}/graphql`, body: {query}})\n        .then(({data}) => {\n            const { movieById: movie } = data\n            return {media_type: mediaType, ...movie};\n        })\n}\n\nexport const getVideo = (mediaType, mediaId) => {\n\n    const query = `\n    query {\n        getMovieFile(id: \"${mediaId}\") {\n            id\n            title\n            filePath\n        }\n    }\n    `\n\n    return postRequest({url: `${_baseUrl}/graphql`, body: {query}})\n        .then(({data}) => {\n            const { getMovieFile: video } = data\n            return {media_type: mediaType, videoUrl: video?.filePath ? `${_baseUrl}/files${video.filePath}` : null, title: video?.title, id: video?.id};\n        })\n}\n\nexport const destroyMovieTorrent = (movieId) => {\n    const query = `\n    query {\n        destroyMovieTorrent(id: \"${movieId}\", quality: FHD) {\n            isDestroyed\n        }\n    }\n    `\n\n    return postRequest({url: `${_baseUrl}/graphql`, body: {query}})\n        .then(({data}) => {\n            const { destroyMovieTorrent: { isDestroyed } } = data\n            return { id: movieId, isDestroyed };\n        })\n}\n\nconst _futureDate = (date) => {\n    const currentYear = date.getFullYear();\n    const currentMonth = date.getMonth();\n    const currentDay = date.getDay();\n\n    let futureMonth = currentMonth + 1;\n    let futureYear = currentYear;\n    if(futureMonth > 11) {\n        futureMonth = 0;\n        futureYear = currentYear + 1;\n    }\n    return {\n        gte: `${_nomalizeDatePart(currentYear)}-${_nomalizeDatePart(currentMonth + 1)}-${currentDay < 22 ? 22 : currentDay}`,\n        lte: `${_nomalizeDatePart(futureYear)}-${_nomalizeDatePart(futureMonth + 1)}-14`\n    }\n}\n\nconst _pastDate = (date) => {\n    const currentYear = date.getFullYear();\n    const currentMonth = date.getMonth();\n    const currentDay = date.getDay();\n\n    let pastMonth = currentMonth - 1;\n    let pastYear = currentYear;\n    const pastDay = Math.min(28, currentDay);\n\n    if(pastMonth < 0) {\n        pastMonth = 11;\n        pastYear = currentYear - 1;\n    }\n    return {\n        lte: `${_nomalizeDatePart(currentYear)}-${_nomalizeDatePart(currentMonth)}-${currentDay}`,\n        gte: `${_nomalizeDatePart(pastYear)}-${_nomalizeDatePart(pastMonth)}-${pastDay}`\n    }\n}\n\nconst _nomalizeDatePart = (num) => {\n    if((num + '').length === 1) {\n        return '0' + num;\n    }\n    return num;\n}","import { Lightning, Img, Colors } from '@lightningjs/sdk';\nimport { transition, extractCommonColor } from '../lib/helpers';\nimport { getBackdropUrl } from '../lib/api';\n\nexport default class Backdrop extends Lightning.Component {\n    static _template() {\n        return {\n            w: 1920,\n            h: 1080,\n            ImgSource: {\n                x: -299.5, w: 300, h: 168,\n            },\n            Backdrop: {\n                alpha: 0.001, w: w => w, h: 740, shader: {type: Lightning.shaders.FadeOut, fade: [0, 900, 900, 0]}, transitions: {alpha: {duration: 1}},\n            }\n        }\n    }\n\n    _construct() {\n        this._targetSrc = null;\n    }\n\n    _init() {\n        const backdrop = this.tag('Backdrop');\n        this._transitionAlpha = backdrop.transition('alpha');\n        this.tag('Backdrop').on('txLoaded', (texture) => {\n            if(this._backdrop.src === texture.src) {\n                this._backdropLoaded = true;\n                this._animateBackdrop();\n            }\n        });\n        this.tag('ImgSource').on('txError', (texture) => {\n            this.fireAncestors('$updateAmbientBackground', {color: 0xff9300e0});\n        });\n        this.tag('ImgSource').on('txLoaded', (texture) => {\n            if(this._imgSource.src === texture.src) {\n                this._imgSrcLoaded = texture.source.nativeTexture;\n                this._animateBackdrop();\n            }\n        });\n        this._transitionAlpha.on('finish', () => {\n            if(backdrop.alpha === 0.001) {\n                this._loadSrc();\n            }\n        });\n        this._baseColor = Colors('background').get();\n    }\n\n    _animateBackdrop() {\n        if(!this._backdropLoaded || !this._imgSrcLoaded) {\n            return;\n        }\n        if(this.stage.gl) {\n            const color = this._extractedColor = extractCommonColor(this._imgSrcLoaded, this.stage.gl);\n            this.fireAncestors('$updateAmbientBackground', {color});\n        }\n        this._backdropLoaded = false;\n        this._imgSrcLoaded = false;\n        transition(this._transitionAlpha, 1);\n    }\n\n    _loadSrc() {\n        if(this._debounce) {\n            clearTimeout(this._debounce);\n        }\n        this._debounce = setTimeout(() => {\n            this._loadTextures(this._targetSrc);\n        }, 50);\n    }\n\n    _loadTextures(src) {\n        this._imgSource = Img(src).contain(300, 168);\n        this._backdrop = Img(src).cover(1920, 740);\n\n        this.tag('ImgSource').texture = this._imgSource;\n        this.tag('Backdrop').texture = this._backdrop;\n    }\n\n    async update(movieId) {\n        const backdropUrl = await getBackdropUrl(movieId)\n\n        if(backdropUrl === this._targetSrc) {\n            this.fireAncestors('$updateAmbientBackground', {color: this._extractedColor});\n            return;\n        }\n        this.setSmooth('alpha', !!(backdropUrl !== null));\n        if(this.tag('Backdrop').alpha === 0.001) {\n            this._loadTextures(backdropUrl);\n        }\n        else {\n            transition(this._transitionAlpha, 0.001);\n        }\n        this._targetSrc = backdropUrl;\n    }\n}","import { Colors, Img, Lightning, Router, Utils } from '@lightningjs/sdk';\n\nexport default class Item extends Lightning.Component {\n    static _template() {\n        return {\n            Focus: {\n                alpha: 0, y: -36, x: -20, w: w => w + 40, h: h => h + 40, rect: true, colorBottom: Colors('focus').get(), colorTop: Colors('focus').get(), shader: {type: Lightning.shaders.RoundedRectangle, stroke: 5, strokeColor: 0xffffffff, fillColor: 0xffffffff, radius: 22, blend: 0.25}\n            },\n            Poster: {w: w => w, h: h => h, shader: {type: Lightning.shaders.RoundedRectangle, radius: 12}}\n        }\n    }\n\n    _firstActive() {\n        this.patch({\n            Poster: {texture: Img(this.item.poster).original()}\n        });\n    }\n\n    _init() {\n        const poster = this.tag('Poster');\n        poster.on('txError', () => {\n            poster.src = Utils.asset('images/missingImage.jpg')\n        });\n    }\n\n    _focus() {\n        const {backdrop, id, title, description} = this.item;\n        this.fireAncestors('$updateBackdrop', {id});\n        this.fireAncestors('$getDetailWidget').show({id, title, description});\n        this.patch({\n            Focus: {smooth: {alpha: 1}},\n            Poster: {smooth: {y: -15}}\n        });\n    }\n\n    _unfocus() {\n        this.patch({\n            Focus: {smooth: {alpha: 0}},\n            Poster: {smooth: {y: 0}}\n        });\n    }\n\n    _handleEnter() {\n        const {id, media_type} = this.item;\n        Router.navigate(`detail/${media_type}/${id}`, {keepAlive: true});\n    }\n\n    static get width() {\n        return 185;\n    }\n\n    static get height() {\n        return 278;\n    }\n\n    static get marginRight() {\n        return 40;\n    }\n\n    static get marginBottom() {\n        return 40;\n    }\n}","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning } from \"@lightningjs/sdk\";\n\nexport default class ItemDescription extends Lightning.Component {\n    static _template() {\n        return {\n            alpha: 0.001,\n            Wrapper: { flex: {direction: 'column'},\n                ItemTitle: {w: 1260, text: {fontFace: 'Bold', wrap: true, fontSize: 74, lineHeight: 88}},\n                ItemDescription: {w: 960, text: {fontFace: 'Regular', wrap: true, maxLines: 4, fontSize: 36, lineHeight: 44}}\n            }\n        }\n    }\n\n    set item(obj) {\n        this._item = obj;\n        this._update();\n    }\n\n    _update() {\n        if(!this.active || !this._item) {\n            return;\n        }\n        const { title, description } = this._item;\n        this.tag('Wrapper').patch({\n            ItemTitle: {text: title},\n            ItemDescription: {text: description},\n        });\n        this._fadeAnimation.start();\n    }\n\n    _init() {\n        this._fadeAnimation = this.animation({delay: 0.2, duration: 0.3, actions: [\n            {p: 'alpha', v: {0: 0.001, 1: 1}},\n            {p: 'x', v: {0: 270, 1: 230}}\n        ]});\n    }\n\n    _active() {\n        this._update();\n    }\n\n    hide() {\n        this._fadeAnimation.stopNow();\n    }\n}","import {Lightning, Router} from '@lightningjs/sdk';\n\nexport default class Page extends Lightning.Component {\n    pageTransition(pageIn, pageOut) {\n        return this._pageTransition(pageIn, pageOut);\n    }\n\n    _pageTransition(pageIn, pageOut) {\n        pageOut.setSmooth('alpha', 0, {delay: 0.0, duration: 0.2});\n\n        if(this.hideBackground) {\n            this.fireAncestors('$hideBackground');\n        }\n        else {\n            this.fireAncestors('$showBackground');\n        }\n\n        return new Promise((resolve) => {\n            pageIn.visible = true;\n            pageIn.alpha = 0.001;\n            pageIn.transition('alpha').on('finish', () => {\n                if(pageIn.alpha === 1) {\n                    pageOut.visible = false;\n                    resolve(true);\n                }\n            });\n            pageIn.setSmooth('alpha', 1, {delay: 0.2, duration: 0.2});\n        });\n    }\n\n    _inactive() {\n        this.stage.gc();\n    }\n\n    _handleBack(e) {\n        const navCheck = Router.isNavigating();\n        if(navCheck) {\n            return true;\n        }\n        return false;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '@lightningjs/core';\nimport { limitWithinRange } from './index.js';\n\nexport default class CollectionWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            Wrapper: {\n            }\n        }\n    }\n\n    _construct() {\n        this._direction = CollectionWrapper.DIRECTION.row;\n        this._scrollTransitionSettings = this.stage.transitions.createSettings({});\n\n        this._spacing = 0;\n        this._autoResize = false;\n        \n        this._requestingItems = false;\n        this._requestThreshold = 1;\n        this._requestsEnabled = false;\n\n        this._gcThreshold = 5;\n        this._gcIncrement = 0;\n        this._forceLoad = false;\n        this.clear();\n    }\n\n    _setup() {\n        this._updateScrollTransition();\n    }\n\n    _updateScrollTransition() {\n        const axis = this._direction === 1 ? 'y' : 'x';\n        this.wrapper.transition(axis, this._scrollTransitionSettings);\n        this._scrollTransition = this.wrapper.transition(axis);\n    }\n    \n    _indexChanged(obj) {    \n        let {previousIndex:previous, index:target, dataLength:max, mainIndex, previousMainIndex, lines} = obj;\n        if(!isNaN(previousMainIndex) && !isNaN(mainIndex) && !isNaN(lines)) {\n            previous = previousMainIndex;\n            target = mainIndex;\n            max = lines;\n        }\n        if(this._requestsEnabled && !this._requestingItems) {\n            if(previous < target && target + this._requestThreshold >= max) {\n                this._requestingItems = true;\n                this.signal('onRequestItems', obj)\n                    .then((response) => {\n                        const type = typeof response;\n                        if(Array.isArray(response) || type === 'object' ||  type === 'string' || type === 'number') {\n                            this.add(response);\n                        }\n                        if(response === false) {\n                            this.enableRequests = false;\n                        }\n                        this._requestingItems = false;\n                    })\n            }\n        }\n\n        this._refocus();\n        this.scrollCollectionWrapper(obj);\n        this.signal('onIndexChanged', obj);\n    }\n\n    setIndex(index) {\n        const targetIndex = limitWithinRange(index, 0, this._items.length - 1);\n        const previousIndex = this._index;\n        this._index = targetIndex;\n        this._indexChanged({previousIndex, index: targetIndex, dataLength: this._items.length});\n        return previousIndex !== targetIndex;\n    }\n\n    clear() {\n        this._uids = [];\n        this._items = [];\n        this._index = 0;\n        if(this.wrapper) {\n            const hadChildren = this.wrapper.children > 0;\n            this.wrapper.patch({\n                x: 0, y: 0, children: []\n            });\n            if(hadChildren) {\n                this._collectGarbage(true);\n            }\n        }\n    }\n\n    add(item) {\n        this.addAt(item);\n    }\n\n    addAt(item, index = this._items.length) {\n        if(index >= 0 && index <= this._items.length) {\n            if(!Array.isArray(item)) {\n                item = [item];\n            }\n            const items = this._normalizeDataItems(item);\n            this._items.splice(index, 0, ...items);\n            this.plotItems();\n            this.setIndex(this._index);\n        }\n        else {\n            throw new Error('addAt: The index ' + index + ' is out of bounds ' + this._items.length);\n        }\n    }\n\n    remove(item) {\n        if(this.hasItems && item.assignedID) {\n            for(let i = 0; i < this.wrapper.children.length; i++) {\n                if(this.wrapper.children[i].assignedID === item.assignedID) {\n                    return this.removeAt(i);\n                }\n            }\n        }\n        else {\n            throw new Error('remove: item not found');\n        }\n    }\n\n    removeAt(index, amount = 1)  {\n        if(index < 0 && index >= this._items.length) {\n            throw new Error('removeAt: The index ' + index + ' is out of bounds ' + this._items.length);\n        }\n        const item = this._items[index];\n        this._items.splice(index, amount);\n        this.plotItems();\n        return item;\n    }\n\n    reload(item) {\n        this.clear();\n        this.add(item)\n    }\n\n    plotItems(items, options) {\n        //placeholder\n    }\n\n    reposition(time = 70) {\n        if(this._repositionDebounce) {\n            clearTimeout(this._repositionDebounce);\n        }\n        this._repositionDebounce = setTimeout(() => {\n            this.repositionItems();\n        }, time);\n    }\n\n    repositionItems() {\n        //placeHolder\n        this.signal('onItemsRepositioned')\n    }\n\n    up() {\n        return this._attemptNavigation(-1, 1);\n    }\n\n    down() {\n        return this._attemptNavigation(1, 1);\n    }\n\n    left() {\n        return this._attemptNavigation(-1, 0);\n    }\n\n    right() {\n        return this._attemptNavigation(1, 0);\n    }\n\n    first() {\n        return this.setIndex(0);\n    }\n\n    last() {\n        return this.setIndex(this._items.length - 1);\n    }\n\n    next() {\n        return this.setIndex(this._index + 1);\n    }\n\n    previous() {\n        return this.setIndex(this._index - 1);\n    }\n\n    _attemptNavigation(shift, direction) {\n        if(this.hasItems) {\n            return this.navigate(shift, direction);\n        }\n        return false;\n    }\n\n    navigate(shift, direction = this._direction) {\n        if(direction !== this._direction) {\n            return false;\n        }\n        return this.setIndex(this._index + shift);\n    }\n\n    scrollCollectionWrapper(obj) {\n        let {previousIndex:previous, index:target, dataLength:max, mainIndex, previousMainIndex, lines} = obj;\n        if(!isNaN(previousMainIndex) && !isNaN(mainIndex) && !isNaN(lines)) {\n            previous = previousMainIndex;\n            target = mainIndex;\n            max = lines;\n        }\n        const {directionIsRow, main, mainDim, mainMarginFrom, mainMarginTo} = this._getPlotProperties(this._direction);\n        const cw = this.currentItemWrapper;\n        let bound = this[mainDim];\n        if(bound === 0) {\n            bound = directionIsRow ? 1920 : 1080;\n        }\n        const offset = Math.min(this.wrapper[main], this._scrollTransition && this._scrollTransition.targetValue || 0);\n\n        const sizes = this._getItemSizes(cw);\n        const marginFrom = (sizes[mainMarginFrom] || sizes.margin || 0);\n        const marginTo = (sizes[mainMarginTo] || sizes.margin || 0);\n\n        let scroll = this._scroll;\n\n        if(!isNaN(scroll)) {\n            if(scroll >= 0 && scroll <= 1) {\n                scroll = bound * scroll - (cw[main] + cw[mainDim] * scroll);\n            }\n            else {\n                scroll = scroll - cw[main];\n            }\n        }\n        else if(typeof scroll === 'function') {\n            scroll = scroll.apply(this, [cw, obj]);\n        }\n        else if(typeof scroll === 'object') {\n            const {jump = false, after = false, backward = 0.0, forward = 1.0} = scroll;\n            if(jump) {\n                let mod = target % jump;\n                if(mod === 0) {\n                    scroll = marginFrom - cw[main];\n                }\n                if(mod === jump - 1) {\n                    const actualSize = marginFrom + cw[mainDim] + marginTo;\n                    scroll = (mod * actualSize) + marginFrom - cw[main]; \n                }\n            }\n            else if(after) {\n                scroll = 0;\n                if(target >= after - 1) {\n                    const actualSize = marginFrom + cw[mainDim] + marginTo;\n                    scroll = ((after - 1) * actualSize) + marginFrom - cw[main];\n                }\n            }\n            else {\n                const backwardBound = bound * this._normalizePixelToPercentage(backward, bound);\n                const forwardBound = bound * this._normalizePixelToPercentage(forward, bound);\n                if(target < max - 1 && (previous < target && offset + cw[main] + cw[mainDim] > forwardBound)) {\n                    scroll = forwardBound - (cw[main] + cw[mainDim]);\n                }\n                else if(target > 0 && (target < previous && offset + cw[main] < backwardBound)) {\n                    scroll = backwardBound - cw[main];\n                }\n                else if(target === max - 1) {\n                    scroll = bound - (cw[main] + cw[mainDim]);\n                }\n                else if(target === 0) {\n                    scroll = marginFrom - cw[main];\n                }\n            }\n        }\n        else if(isNaN(scroll)){\n            if(previous < target && offset + cw[main] + cw[mainDim] > bound) {\n                scroll = bound - (cw[main] + cw[mainDim])\n            }\n            else if(target < previous && offset + cw[main] < 0) {\n                scroll = marginFrom - cw[main]\n            }\n        }\n\n        if(this.active && !isNaN(scroll) && this._scrollTransition) {\n            if(this._scrollTransition.isRunning()) {\n                this._scrollTransition.reset(scroll, 0.05);\n            }\n            else {\n                this._scrollTransition.start(scroll);\n            }\n        }\n        else if(!isNaN(scroll)) {\n            this.wrapper[main] = scroll\n        }\n    }\n\n    $childInactive({child}) {\n        if(typeof child === 'object') {\n            const index = child.componentIndex;\n            for(let key in this._items[index]) {\n                if(child.component[key] !== undefined) {\n                    this._items[index][key] = child.component[key];\n                }\n            }\n        }\n        this._collectGarbage();\n    }\n\n    $getChildComponent({index}) {\n        return this._items[index];\n    }\n\n    _resizeWrapper(crossSize) {\n        let obj = crossSize;\n        if(!isNaN(crossSize)) {\n            const {main, mainDim, crossDim} = this._getPlotProperties(this._direction);\n            const lastItem = this.wrapper.childList.last;\n            obj = {\n                [mainDim]: lastItem[main] + lastItem[mainDim],\n                [crossDim]: crossSize\n            }\n        }\n        this.wrapper.patch(obj);\n        if(this._autoResize) {\n            this.patch(obj);\n        }\n    }\n\n    _generateUniqueID() {\n        let id = '';\n        while(this._uids[id] || id === '') {\n            id = Math.random().toString(36).substr(2, 9);\n        }\n        this._uids[id] = true;\n        return id;\n    }\n\n    _getPlotProperties(direction) {\n        const directionIsRow = direction === 0;\n        return {\n            directionIsRow: directionIsRow ? true : false,\n            mainDirection: directionIsRow ? 'rows' : 'columns',\n            main: directionIsRow ? 'x' : 'y',\n            mainDim: directionIsRow ? 'w' : 'h',\n            mainMarginTo: directionIsRow ? 'marginRight' : 'marginBottom',\n            mainMarginFrom: directionIsRow ? 'marginLeft' : 'marginUp',\n            crossDirection: !directionIsRow ? 'columns' : 'rows',\n            cross: directionIsRow ? 'y' : 'x',\n            crossDim: directionIsRow ? 'h' : 'w',\n            crossMarginTo: directionIsRow ? 'marginBottom' : 'marginRight',\n            crossMarginFrom: directionIsRow ? 'marginUp' : 'marginLeft',\n        }\n    }\n    \n    _getItemSizes(item) {\n        const itemType = item.type;\n        if(item.component && item.component.__attached) {\n            item = item.component;\n        }\n        return {\n            w: item.w || (itemType && itemType['width']),\n            h: item.h || (itemType && itemType['height']),\n            margin: item.margin || (itemType && itemType['margin']) || 0,\n            marginLeft: item.marginLeft || (itemType && itemType['marginLeft']),\n            marginRight: item.marginRight || (itemType && itemType['marginRight']),\n            marginTop: item.marginTop || (itemType && itemType['marginTop']),\n            marginBottom: item.marginBottom || (itemType && itemType['marginBottom'])\n        }\n    }\n\n    _collectGarbage(immediate) {\n        this._gcIncrement++;\n        if(immediate || (this.active && this._gcThreshold !== 0 && this._gcIncrement >= this._gcThreshold)) {\n            this._gcIncrement = 0;\n            this.stage.gc();\n        }\n    }\n\n    _normalizeDataItems(array) {\n        return array.map((item, index) => {\n            return this._normalizeDataItem(item) || index;\n        })\n        .filter((item) => {\n            if(!isNaN(item)) {\n                console.warn(`Item at index: ${item}, is not a valid item. Removing it from dataset`);\n                return false;\n            }\n            return true;\n        });\n    }\n\n    _normalizeDataItem(item, index) {\n        if(typeof item === 'string' || typeof item === 'number') {\n            item = {label: item.toString()}\n        }\n        if(typeof item === 'object') {\n            let id = this._generateUniqueID();\n            return {assignedID: id, type: this.itemType, collectionWrapper: this, isAlive: false, ...item}\n        }\n        return index;\n    }\n\n    _normalizePixelToPercentage(value, max) {\n        if(value && value > 1) {\n            return value / max;\n        }\n        return value || 0;\n    }\n\n    _getFocused() {\n        if(this.hasItems) {\n            return this.currentItemWrapper;\n        }\n        return this;\n    }\n\n    _handleRight() {\n        return this.right()\n    }\n\n    _handleLeft() {\n        return this.left()\n    }\n\n    _handleUp() {\n        return this.up();\n    }\n\n    _handleDown() {\n        return this.down();\n    }\n\n    _inactive() {\n        if(this._repositionDebounce) {\n            clearTimeout(this._repositionDebounce);\n        }\n        this._collectGarbage(true);\n    }\n\n    static get itemType() {\n        return undefined;\n    }\n\n    set forceLoad(bool) {\n        this._forceLoad = bool;\n    }\n\n    get forceLoad() {\n        return this._forceLoad;\n    }    \n\n    get requestingItems() {\n        return this._requestingItems;\n    }\n\n    set requestThreshold(num) {\n        this._requestThreshold = num;\n    }\n\n    get requestThreshold() {\n        return this._requestThreshold;\n    }\n\n    set enableRequests(bool) {\n        this._requestsEnabled = bool\n    }\n\n    get enableRequests() {\n        return this._requestsEnabled\n    }\n\n    set gcThreshold(num) {\n        this._gcThreshold = num;\n    }\n\n    get gcThreshold() {\n        return this._gcThreshold;\n    }\n\n    get wrapper() {\n        return this.tag('Wrapper');\n    }\n\n    get hasItems() {\n        return this.wrapper && this.wrapper.children && this.wrapper.children.length > 0;\n    }\n\n    get currentItemWrapper() {\n        return this.wrapper.children[this._index];\n    }\n\n    get currentItem() {\n        return this.currentItemWrapper.component;\n    }\n\n    set direction(string) {\n        this._direction = CollectionWrapper.DIRECTION[string] || CollectionWrapper.DIRECTION.row;\n    }\n\n    get direction() {\n        return Object.keys(CollectionWrapper.DIRECTION)[this._direction];\n    }\n\n    set items(array) {\n        this.clear();\n        this.add(array);\n    }\n\n    get items() {\n        const itemWrappers = this.itemWrappers;\n        return this._items.map((item, index) => {\n            if(itemWrappers[index] && itemWrappers[index].component.isAlive) {\n                return itemWrappers[index].component;\n            }\n            return item;\n        });\n    }\n\n    get length() {\n        return this._items.length;\n    }\n\n    set index(index) {\n        this.setIndex(index);\n    }\n\n    get itemWrappers() {\n        return this.wrapper.children;\n    }\n\n    get index() {\n        return this._index;\n    }\n\n    set scrollTransition(obj) {\n        this._scrollTransitionSettings.patch(obj);\n        if(this.active) {\n            this._updateScrollTransition();\n        }\n    }\n\n    get scrollTransition() {\n        return this._scrollTransition;\n    }\n\n    set scroll(value) {\n        this._scroll = value;\n    }\n\n    get scrollTo() {\n        return this._scroll;\n    }\n\n    set autoResize(bool) {\n        this._autoResize = bool;\n    }\n\n    get autoResize() {\n        return this._autoResize;\n    }\n\n    set spacing(num) {\n        this._spacing = num;\n    }\n\n    get spacing() {\n        return this._spacing;\n    }\n}\n\nCollectionWrapper.DIRECTION = {\n    row: 0,\n    column: 1\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class Cursor extends Lightning.Component {\n    static _template() {\n        return {\n            alpha: 0\n        }\n    }\n\n    _construct() {\n        this._blink = true;\n    }\n\n    _init() {\n        this._blinkAnimation = this.animation({duration: 1, repeat: -1, actions: [\n            {p: 'alpha', v: {0: 0, 0.5: 1, 1: 0}}\n        ]});\n    }\n\n    show() {\n        if(this._blink) {\n            this._blinkAnimation.start();\n        }\n        else {\n            this.alpha = 1;\n        }\n    }\n\n    hide() {\n        if(this._blink) {\n            this._blinkAnimation.stop();\n        }\n        else {\n            this.alpha = 0;\n        }\n    }\n\n    set blink(bool) {\n        this._blink = bool;\n        if(this.active) {\n            if(bool) {\n                this.show();\n            }\n            else {\n                this.hide();\n            }\n        }\n    }\n\n    get blink() {\n        return this._blink;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class ItemWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            clipbox: true\n        }\n    }\n\n    create() {\n        if(this.children.length > 0) {\n            return;\n        }\n        const component = this.fireAncestors('$getChildComponent', {index: this.componentIndex});\n        component.isAlive = true;\n        const {w, h, margin, marginUp, marginBottom, marginRight, marginLeft} = this;\n        this.children = [{...component, w, h, margin, marginUp, marginRight, marginLeft, marginBottom}];\n        if(this.hasFocus()) {\n            this._refocus();\n        }\n    }\n\n    get component() {\n        return this.children[0] || this.fireAncestors('$getChildComponent', {index: this.componentIndex});\n    }\n\n    _active() {\n        this.create();\n    }\n\n    _inactive() {\n        this._setState('');\n        this.children[0].isAlive = true;\n        this.fireAncestors('$childInactive', {child: this});\n        this.childList.clear();\n    }\n\n    _getFocused() {\n        return this.children && this.children[0] || this;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class KeyWrapper extends Lightning.Component {\n    static _template() {\n        return {\n            clipbox: true\n        }\n    }\n\n    _update() {\n        let currentKey = this.children && this.children[0];\n        if(currentKey && currentKey.action === this._key.data.action) {\n            currentKey.patch({\n                ...this._key\n            });\n        }\n        else {\n            this.children = [{type: this._key.keyType, ...this._key}];\n        }\n        if(this.hasFocus()) {\n            this._refocus();\n        }\n    }\n\n    set key(obj) {\n        this._key = obj;\n        if(this.active) {\n            this._update();\n        }\n    }\n\n    get key() {\n        return this._key;\n    }\n\n    _active() {\n        this._update();\n    }\n\n    _inactive() {\n        this.childList.clear();\n    }\n\n    _getFocused() {\n        return this.children && this.children[0] || this;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport {default as CollectionWrapper} from './CollectionWrapper.js';\nexport {default as Cursor} from './Cursor.js';\nexport {default as ItemWrapper} from './ItemWrapper.js';\nexport {default as KeyWrapper} from './KeyWrapper.js';\n\nexport const limitWithinRange = (num, min, max) => {\n    return Math.min(Math.max(num, min), max)\n}\n\nexport const isFunction = value => {\n    return typeof value === 'function'\n}\n\nexport const isNumber = value => {\n    return typeof value === 'number';\n}\n\nexport const isInteger = value => {\n    return (isNumber(value) && (value % 1) === 0);\n}\n\nexport const isFloat = value => {\n    return (isNumber(value) && (value % 1) !== 0);\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CollectionWrapper, ItemWrapper, limitWithinRange } from \"./helpers\";\n\nexport default class Grid extends CollectionWrapper {\n    _construct() {\n        this._crossSpacing = 5;\n        this._mainSpacing = 5;\n        this._rows = 0;\n        this._columns = 0;\n        super._construct();\n    }\n\n    clear() {\n        super.clear();\n        this._mainIndex = 0;\n        this._crossIndex = 0;\n    }\n\n    setIndex(index) {\n        const targetIndex = limitWithinRange(index, 0, this._items.length - 1);\n        const previousIndex = this._index;\n        const {mainIndex:previousMainIndex, crossIndex:previousCrossIndex} = this._findLocationOfIndex(this._index);\n        const {mainIndex, crossIndex} = this._findLocationOfIndex(targetIndex);\n        this._mainIndex = mainIndex;\n        this._crossIndex = crossIndex;\n        this._index = targetIndex;\n        this._indexChanged({previousIndex, index: targetIndex, mainIndex, previousMainIndex, crossIndex, previousCrossIndex, lines: this._lines.length, dataLength: this._items.length});\n    }\n\n    _findLocationOfIndex(index) {\n        for(let i = 0; i < this._lines.length; i++) {\n            if(this._lines[i].includes(index)) {\n                return {mainIndex: i, crossIndex: this._lines[i].indexOf(index)};\n            }\n        }\n        return {mainIndex: -1, crossIndex: -1};\n    }\n\n    plotItems() {\n        const items = this._items;\n        const wrapper = this.wrapper;\n\n        const {directionIsRow, mainDirection, main, mainDim, mainMarginTo, mainMarginFrom, cross, crossDim, crossMarginTo, crossMarginFrom} = this._getPlotProperties(this._direction);\n        const crossSize = this[crossDim];\n        let mainPos = 0, crossPos = 0, lineIndex = 0;\n\n        const animateItems = [];\n\n        const viewboundMain = directionIsRow ? 1920 : 1080;\n        const viewboundCross = directionIsRow ? 1080 : 1920;\n        const renderContext = this.core.renderContext\n\n        this._lines = [[]];\n        //create empty line array\n        let cl = [];\n\n        const newChildren = items.map((item, index) => {\n            const sizes = this._getItemSizes(item);\n            const targetCrossFromMargin = (sizes[crossMarginFrom] || sizes.margin || 0);\n\n            if(index === 0) {\n                mainPos += (sizes[mainMarginFrom] || sizes.margin || 0);\n            }\n\n            if(cl.length > 0 && ((this[mainDirection] > 0 && this[mainDirection] === cl.length) || (this[mainDirection] === 0 && crossPos + targetCrossFromMargin + sizes[crossDim] > crossSize))) {\n                const bil = this._getBiggestInLine(cl);\n                mainPos = bil[main] + bil[mainDim] + (bil[mainMarginTo] || bil.margin || this._mainSpacing);\n                crossPos = targetCrossFromMargin;\n                this._lines.push([]);\n                cl = [];\n                lineIndex++;\n            }\n            else {\n                crossPos += targetCrossFromMargin;\n            }\n            \n            const ref = `IW-${item.assignedID}`;\n            let tmp = mainPos;\n            let tcp = crossPos;\n\n            const existingItemWrapper = wrapper.tag(ref);\n            \n            if(existingItemWrapper && \n                ((existingItemWrapper.active && (crossPos !== existingItemWrapper[cross] || mainPos !== existingItemWrapper[main])) ||\n                (!existingItemWrapper.active && ((renderContext[`p${main}`] + wrapper[main] + mainPos <= viewboundMain) || (renderContext[`p${cross}`] + wrapper[cross] + crossPos <= viewboundCross))))){\n                tmp = existingItemWrapper[main];\n                tcp = existingItemWrapper[cross];\n                animateItems.push(index);\n            }\n            \n            const newItem = {\n                ref,\n                type: ItemWrapper,\n                componentIndex: index,\n                forceLoad: this._forceLoad,\n                ...sizes,\n                [`assigned${main.toUpperCase()}`]: mainPos,\n                [`assigned${cross.toUpperCase()}`]: crossPos,\n                [main]: tmp,\n                [cross]: tcp\n            }\n            \n            crossPos += sizes[crossDim] + (sizes[crossMarginTo] || sizes.margin || this._crossSpacing);\n            this._lines[lineIndex].push(index);\n            cl.push(newItem);\n            return newItem; \n        });\n        \n        wrapper.children = newChildren;\n\n        animateItems.forEach((index) => {\n            const item = wrapper.children[index];\n            item.patch({\n                smooth: {x: item.assignedX, y: item.assignedY}\n            });\n        });\n\n        const biggestInLastLine = this._getBiggestInLine(cl);\n        this._resizeWrapper({\n            [mainDim]: biggestInLastLine[main] + biggestInLastLine[mainDim],\n            [crossDim]: crossSize\n        });\n    }\n\n    repositionItems() {\n        const wrapper = this.wrapper;\n        if(!wrapper && wrapper.children.length) {\n            return true;\n        }\n\n        const {main, mainDim, mainMarginTo, mainMarginFrom, cross, crossDim, crossMarginTo, crossMarginFrom} = this._getPlotProperties(this._direction);\n        const crossSize = this[crossDim];\n        let mainPos = 0, crossPos = 0, lineIndex = 0;\n\n        //create empty line array\n        let cl = [];\n\n        this.lines = [[]];\n\n        wrapper.children.forEach((item, index) => {\n            const sizes = this._getItemSizes(item);\n            const targetCrossFromMargin = (sizes[crossMarginFrom] || sizes.margin || 0);\n\n            if(index === 0) {\n                mainPos += (sizes[mainMarginFrom] || sizes.margin || 0);\n            }\n            if(cl.length > 0 && ((this[mainDirection] > 0 && this[mainDirection] === cl.length) || (this[mainDirection] === 0 && crossPos + targetCrossFromMargin + sizes[crossDim] > crossSize))) {\n                const bil = this._getBiggestInLine(cl);\n                mainPos = bil[main] + bil[mainDim] + (bil[mainMarginTo] || bil.margin || this._mainSpacing);\n                crossPos = targetCrossFromMargin;\n                this._lines.push([]);\n                cl = [];\n                lineIndex++;\n            }\n            else {\n                crossPos += targetCrossFromMargin;\n            }\n            \n            item.patch({\n                [`assigned${main.toUpperCase()}`]: mainPos,\n                [`assigned${cross.toUpperCase()}`]: crossPos,\n                [main]: mainPos,\n                [cross]: crossPos\n            });\n            crossPos += sizes[crossDim] + (sizes[crossMarginTo] || sizes.margin || this._crossSpacing)\n            this._lines[lineIndex].push(index);\n            cl.push(newItem);\n        });\n\n        const biggestInLastLine = this._getBiggestInLine(cl);\n        this._resizeWrapper({\n            [mainDim]: biggestInLastLine[main] + biggestInLastLine[mainDim],\n            [crossDim]: crossSize\n        });\n        super.repositionItems();\n    }\n\n    _getBiggestInLine(line) {\n        const {mainDim} = this._getPlotProperties(this._direction);\n        return line.reduce((biggestItem, newItem) => {\n            if(newItem[mainDim] > biggestItem[mainDim]) {\n                return newItem;\n            }\n            return biggestItem;\n        });\n    }\n\n    navigate(shift, direction) {\n        const {directionIsRow, cross, crossDim} = this._getPlotProperties(this._direction);\n        const overCross = ((directionIsRow && direction === CollectionWrapper.DIRECTION.column) \n                            || (!directionIsRow && direction === CollectionWrapper.DIRECTION.row));\n\n        let targetMainIndex = this._mainIndex + !!(!overCross) * shift;\n        let targetCrossIndex = this._crossIndex + !!overCross * shift;\n        let targetIndex = this._index;\n        \n        if(overCross && targetCrossIndex > -1 && targetCrossIndex <= this._lines[targetMainIndex].length) {\n            if(this._lines[targetMainIndex][targetCrossIndex] !== undefined) {\n                targetIndex = this._lines[targetMainIndex][targetCrossIndex];\n                this._previous = undefined;\n            }\n        }\n        else if (!overCross && targetMainIndex < this._lines.length && targetMainIndex > -1){\n            const targetLine = this._lines[targetMainIndex];\n            if(this._previous && this._previous.mainIndex === targetMainIndex) {\n                targetIndex = this._previous.realIndex;\n                targetCrossIndex = this._previous.crossIndex;\n            }\n            else if(targetLine){\n                const currentItem = this.currentItemWrapper;\n                const m = targetLine.map((item) => {\n                    const targetItem = this.wrapper.children[item];\n                    if(targetItem[cross] <= currentItem[cross] && currentItem[cross] <= targetItem[cross] + targetItem[crossDim]) {\n                        return targetItem[cross] + targetItem[crossDim] - currentItem[cross];\n                    }\n                    if(targetItem[cross] >= currentItem[cross] && targetItem[cross] <= currentItem[cross] + currentItem[crossDim]) {\n                        return currentItem[cross] + currentItem[crossDim] - targetItem[cross];\n                    }\n                    return -1;\n                });\n\n                let acc = -1;\n                let t = -1;\n                for(let i = 0; i < m.length; i++) {\n                    if(m[i] === -1 && acc > -1) {\n                        break;\n                    }\n                    if(m[i] > acc) {\n                        acc = m[i];\n                        t = i;\n                    }\n                }\n                if(t > -1) {\n                    targetCrossIndex = t;\n                    targetIndex = targetLine[t];\n                }\n            }\n            this._previous = {mainIndex: this._mainIndex, crossIndex: this._crossIndex, realIndex: this._index};\n        }\n\n        if(this._index !== targetIndex) {\n            this.setIndex(targetIndex);\n            return true;\n        }\n        return false;\n    }\n\n    set rows(num) {\n        this._rows = num;\n        this.direction = 'row';\n    }\n\n    get rows() {\n        return this._rows;\n    }\n\n    set columns(num) {\n        this._columns = num;\n        this.direction = 'column';\n    }\n\n    get columns() {\n        return this._columns;\n    }\n\n    set crossSpacing(num) {\n        this._crossSpacing = num;\n    }\n\n    get crossSpacing() {\n        return this._crossSpacing;\n    }\n\n    set mainSpacing(num) {\n        this._mainSpacing = num;\n    }\n\n    get mainSpacing() {\n        return this._mainSpacing;\n    }\n\n    set spacing(num) {\n        this._spacing = num;\n        this._mainSpacing = num;\n        this._crossSpacing = num;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\nimport Cursor from './helpers/Cursor.js';\n\nexport default class InputField extends Lightning.Component {\n    static _template () {\n        return {\n            PreLabel: {},\n            PostLabel: {},\n            Cursor: {type: Cursor, rect: true, w: 4, h: 54, x: 0, y: 0},\n        }\n    }\n\n    _construct() {\n        this._input = '';\n        this._previousInput = '';\n        this._description = '';\n        this._cursorX = 0;\n        this._cursorIndex = 0;\n    }\n\n    _init() {\n        const preLabel = this.tag('PreLabel');\n        const cursor = this.tag('Cursor');\n        const postLabel = this.tag('PostLabel');\n\n        const positionCursor = () => {\n            this.h = preLabel.renderHeight || postLabel.renderHeight;\n            cursor.x = preLabel.renderWidth + this._cursorX;\n            postLabel.x = cursor.x + cursor.w * (1 - cursor.mountX);\n        };\n\n        preLabel.on('txLoaded', positionCursor);\n        postLabel.on('txLoaded', positionCursor);\n    }\n\n    onInputChanged({input = ''}) {\n        let targetIndex = Math.max((input.length - this._input.length) + this._cursorIndex, 0);\n        this._input = input;\n        this._update(targetIndex);\n    }\n\n    _update(index = 0) {\n        const hasInput = this._input.length > 0;\n        const cursor = this.tag('Cursor');\n        let pre = this._description;\n        let post = '';\n\n        if(hasInput) {\n            pre = this._input.substring(0, index);\n            post = this._input.substring(index, this._input.length);\n            cursor.show();\n        }\n        else {\n            cursor.hide();\n        }\n        \n        this.patch({\n            PreLabel: {text: {text: pre}},\n            PostLabel: {text: {text: post}},\n        });\n\n        if(this.h === 0) {\n            this.tag('PreLabel').loadTexture();\n            this.h = this.tag('PreLabel').renderHeight;\n        }\n        this._cursorIndex = index;\n    }\n\n    _handleRight() {\n        this._update(Math.min(this._input.length, this._cursorIndex + 1));\n    }\n\n    _handleLeft() {\n        this._update(Math.max(0, this._cursorIndex - 1));\n    }\n\n    _firstActive() {\n        this._update();\n    }\n\n    get input() {\n        return this._input;\n    }\n\n    get hasInput() {\n        return this._input.length > 0;\n    }\n\n    get cursorIndex() {\n        return this._cursorIndex;\n    }\n\n    set inputText (obj) {\n        this._inputText = obj;\n        this.tag('PreLabel').patch({text: obj});\n        this.tag('PostLabel').patch({text: obj});\n    }\n\n    get inputText() {\n        return this._inputText;\n    }\n\n    set description(str) {\n        this._description = str;\n    }\n\n    get description() {\n        return this._description;\n    }\n\n    set cursor(obj) {\n        if(obj.x) {\n            this._cursorX = obj.x;\n            delete obj.x;\n        }\n        this.tag('Cursor').patch(obj);\n    }\n\n    get cursor() {\n        return this.tag('Cursor');\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\n\nexport default class Key extends Lightning.Component {\n    static _template() {\n        return {\n            Background: {\n                w: w => w, h: h => h, rect: true\n            },\n            Label: {\n                mount: 0.5, x: w => w / 2, y: h => h / 2\n            }\n        }\n    }\n\n    _construct() {\n        this._backgroundColors = {};\n        this._labelColors = {};\n    }\n\n    set data(obj) {\n        this._data = obj;\n        this._update();\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    set labelText(obj) {\n        this._labelText = obj;\n        this.tag('Label').patch({text: obj});\n    }\n\n    get labelText() {\n        return this._labelText;\n    }\n\n    set label(obj) {\n        this.tag('Label').patch(obj);\n    }\n\n    get label() {\n        return this.tag('Label');\n    }\n\n    set labelColors(obj) {\n        this._labelColors = obj;\n        this._update();\n    }\n\n    get labelColors() {\n        return this._labelColors;\n    }\n\n    set backgroundColors(obj) {\n        this._backgroundColors = obj;\n        this._update();\n    }\n\n    get backgroundColors() {\n        return this._backgroundColors;\n    }\n\n    set background(obj) {\n        this.tag('Background').patch(obj);\n    }\n\n    get background() {\n        return this.tag('Background');\n    }\n\n    _update() {\n        if(!this.active) {\n            return;\n        }\n        const { label = '' } = this._data;\n        const hasFocus = this.hasFocus();\n\n        let {focused, unfocused = 0xff000000} = this._backgroundColors;\n        let {focused: labelFocused, unfocused: labelUnfocused = 0xffffffff} = this._labelColors;\n        \n        this.patch({\n            Background: {color: hasFocus && focused ? focused : unfocused},\n            Label: {text: {text: label}, color: hasFocus && labelFocused ? labelFocused : labelUnfocused}\n        });\n    }\n\n    _firstActive() {\n        this._update();\n    }\n\n    _focus() {\n        let {focused, unfocused = 0xff000000} = this._backgroundColors;\n        let {focused: labelFocused, unfocused: labelUnfocused = 0xffffffff} = this._labelColors;\n\n        this.patch({\n            Background: {smooth: {color: focused || unfocused}},\n            Label: {smooth: {color: labelFocused || labelUnfocused}}\n        });\n    }\n\n    _unfocus() {\n        let {unfocused = 0xff000000} = this._backgroundColors;\n        let {unfocused: labelUnfocused = 0xffffffff} = this._labelColors;\n\n        this.patch({\n            Background: {smooth: {color: unfocused}},\n            Label: {smooth: {color: labelUnfocused}}\n        });\n    }\n\n    static get width() {\n        return 80;\n    }\n\n    static get height() {\n        return 80;\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from \"@lightningjs/core\";\nimport KeyWrapper from \"./helpers/KeyWrapper.js\";\nimport Key from \"./Key.js\";\n\nexport default class Keyboard extends Lightning.Component {\n    static _template() {\n        return {\n            Keys: {w: w => w}\n        }\n    }\n\n    _construct() {\n        this._input = '';\n        this._inputField = undefined;\n        this._maxCharacters = 56;\n        this.resetFocus();\n    }\n\n    resetFocus() {\n        this._columnIndex = 0;\n        this._rowIndex = 0;\n        this._previousKey = null;\n    }\n\n    _setup() {\n        this._keys = this.tag('Keys');\n        this._update();\n    }\n\n    _update() {\n        const {layouts, buttonTypes = {}, styling = {}} = this._config;\n        if(!this._layout || (this._layout && layouts[this._layout] === undefined)) {\n            console.error(`Configured layout \"${this._layout}\" does not exist. Picking first available: \"${Object.keys(layouts)[0]}\"`);\n            this._layout = Object.keys(layouts)[0];\n        }\n        const {horizontalSpacing = 0, verticalSpacing = 0, align = 'left'} = styling;\n        let rowPosition = 0;\n        const isEvent = /^[A-Z][A-Za-z0-9]{1}/;\n        const hasLabel = /\\:/;\n\n        if(buttonTypes.default === undefined) {\n            buttonTypes.default = Key;\n        }\n\n        this._keys.children = layouts[this._layout].map((row, rowIndex) => {\n            const {\n                x = 0,\n                margin = 0,\n                marginRight,\n                marginLeft,\n                marginTop,\n                marginBottom,\n                spacing: rowHorizontalSpacing = horizontalSpacing || 0,\n                align: rowAlign = align\n            } = styling[`Row${rowIndex+1}`] || {};\n\n            let keyPosition = 0;\n            let rowHeight = 0;\n            const rowKeys = row.map((key, keyIndex) => {\n                const origin = key;\n                let keyType = buttonTypes.default;\n                let action = 'Input';\n                let label = key;\n\n                if(isEvent.test(key)) {\n                    if(hasLabel.test(key)) {\n                        key = key.split(':');\n                        label = key[1].toString();\n                        key = key[0];\n                    }\n                    if(buttonTypes[key]) {\n                        keyType = buttonTypes[key];\n                        action = key.action || key;\n                    }\n                }\n\n                const keySpacing = keyType.margin || keyType.type.margin;\n                const {\n                    w = keyType.type.width || 0,\n                    h = keyType.type.height || 0,\n                    marginLeft = keyType.type.marginLeft || keySpacing || 0,\n                    marginRight = keyType.type.marginRight || keySpacing || rowHorizontalSpacing,\n                } = keyType;\n\n                rowHeight = h > rowHeight ? h : rowHeight;\n                const currentPosition = keyPosition + marginLeft;\n                keyPosition += marginLeft + w + marginRight;\n                return {ref: `Key-{${keyIndex + 1}}`, type: KeyWrapper, keyboard: this, x: currentPosition, w, h, key: {data: {origin, key, label, action}, w, h, ...keyType}}\n            });\n\n            let rowOffset = x + (marginLeft || margin);\n            let rowMount = 0;\n\n            if(this.w && rowAlign === 'center') {\n                rowOffset = this.w / 2;\n                rowMount = 0.5;\n            }\n\n            if(this.w && rowAlign === 'right') {\n                rowOffset = this.w - (marginRight || margin);\n                rowMount = 1;\n            }\n\n            const currentPosition = rowPosition + (marginTop|| margin);\n            rowPosition = currentPosition + rowHeight + (marginBottom || margin || verticalSpacing);\n            return {\n                ref: `Row-${rowIndex + 1}`, \n                x: rowOffset,\n                mountX: rowMount,\n                w: keyPosition,\n                y: currentPosition,\n                children: rowKeys\n            }\n        });\n        this._refocus();\n    }\n\n    _getFocused() {\n        return this.currentKeyWrapper || this;\n    }\n\n    _handleRight() {\n        return this.navigate('row', 1);\n    }\n\n    _handleLeft() {\n        return this.navigate('row', -1);\n    }\n\n    _handleUp() {\n        return this.navigate('column', -1);\n    }\n\n    _handleDown() {\n        return this.navigate('column', 1);\n    }\n\n    _handleKey({key, code = 'CustomKey'}) {\n        if(code === 'Backspace' && this._input.length === 0) {\n            return false;\n        }\n        if(key === ' ') {\n            key = 'Space';\n        }\n        const targetFound = this._findKey(key);\n        if(targetFound) {\n            this._handleEnter();\n        }\n        return targetFound;\n    }\n\n    _findKey(str) {\n        const rows = this._config.layouts[this._layout];\n        let i = 0, j = 0;\n        for(; i < rows.length; i++) {\n            for (j = 0; j < rows[i].length; j++) {\n                let key = rows[i][j];\n                if((str.length > 1 && key.indexOf(str) > -1) || key.toUpperCase() === str.toUpperCase()) {\n                    this._rowIndex = i;\n                    this._columnIndex = j;\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    _handleEnter() {\n        const {origin, action} = this.currentKey.data;\n        const event = {\n            index: this._input.length,\n            key: origin\n        };\n        if(this._inputField && this._inputField.cursorIndex) {\n            event.index = this._inputField.cursorIndex;\n        }\n        if(action !== 'Input') {\n            const split = event.key.split(':')\n            const call = `on${split[0]}`;\n            const eventFunction = this[call];\n            event.key = split[1];\n            if(eventFunction && eventFunction.apply && eventFunction.call) {\n                eventFunction.call(this, event);\n            }\n            this.signal(call, event);\n        }\n        else {\n            this.addAt(event.key, event.index);\n        }\n    }\n\n    _changeInput(input) {\n        if(input >= this._maxCharacters) {\n            return;\n        }\n        const eventData = {\n            previousInput: this._input, \n            input: this._input = input\n        };\n        if(this._inputField && this._inputField.onInputChanged) {\n            this._inputField.onInputChanged(eventData);\n        }\n        this.signal('onInputChanged', eventData);\n    }\n\n    focus(str) {\n        this._findKey(str);\n    }\n\n    add(str) {\n        this._changeInput(this._input + str);\n    }\n\n    addAt(str, index) {\n        if(index > this._input.length - 1) {\n            this.add(str);\n        }\n        else if(index > -1) {\n            this._changeInput(this._input.substring(0, index) + str + this._input.substring(index, this._input.length));\n        }\n    }\n\n    remove() {\n        this._changeInput(this._input.substring(0, this._input.length - 1));\n    }\n\n    removeAt(index) {\n        if(index > this._input.length - 1) {\n            this.remove();\n        }\n        else if(index > -1) {\n            this._changeInput(this._input.substring(0, index-1) + this._input.substring(index, this._input.length));\n        }\n    }\n\n    clear() {\n        this._changeInput('');\n    }\n    \n    layout(key) {\n        if(key === this._layout) {\n            return;\n        }\n        this._layout = key;\n        if(this.attached) {\n            this.resetFocus();\n            this._update();\n        }\n    }\n\n    inputField(component) {\n        if(component && component.isComponent) {\n            this._inputField = component;\n        }\n        else {\n            this._inputField = undefined;\n        }\n    }\n\n    navigate(direction, shift) {\n        const targetIndex = (direction === 'row' ? this._columnIndex : this._rowIndex) + shift;\n        const currentRow = this.rows[this._rowIndex];\n        if(direction === 'row' && targetIndex > -1 && targetIndex < currentRow.children.length) {\n            this._previous = null;\n            return this._columnIndex = targetIndex;\n        }\n        if(direction === 'column' && targetIndex > -1 && targetIndex < this.rows.length ) {    \n            const currentRowIndex = this._rowIndex;\n            const currentColumnIndex = this._columnIndex;\n            if(this._previous && this._previous.row === targetIndex) {\n                const tmp = this._previous.column;\n                this._previous.column = this._columnIndex;\n                this._columnIndex = tmp;\n                this._rowIndex = this._previous.row;\n            }\n            else {\n                const targetRow = this.rows[targetIndex];\n                const currentKey = this.currentKeyWrapper;\n                const currentX = this.rows[this._rowIndex].x + currentKey.x;\n                const m = targetRow.children.map((key) => {\n                    const keyX = targetRow.x + key.x;\n                    if(keyX <= currentX && currentX < keyX + key.w) {\n                        return (keyX + key.w) - currentX;\n                    }\n                    if(keyX >= currentX && keyX <= currentX + currentKey.w) {\n                        return (currentX + currentKey.w) - keyX;\n                    }\n                    return -1;\n                });\n                let acc = -1;\n                let t = -1;\n\n                for(let i = 0; i < m.length; i++) {\n                    if(m[i] === -1 && acc > -1) {\n                        break;\n                    }\n                    if(m[i] > acc) {\n                        acc = m[i];\n                        t = i;\n                    }\n                }\n                if(t > -1) {\n                    this._rowIndex = targetIndex;\n                    this._columnIndex = t;\n                }\n            }\n            if(this._rowIndex !== currentRowIndex) {\n                this._previous = {column: currentColumnIndex, row: currentRowIndex};\n                return this._rowIndex = targetIndex;\n            }\n        }\n        return false;\n    }\n\n    onSpace({index}) {\n        this.addAt(' ', index);\n    }\n\n    onBackspace({index}) {\n        this.removeAt(index);\n    }\n\n    onClear() {\n        this.clear();\n    }\n\n    onLayout({key}) {\n        this.layout(key);\n    }\n\n    set config(obj) {\n        this._config = obj;\n        if(this.active) {\n            this._update();\n        }\n    }\n\n    get config() {\n        return this._config;\n    }\n\n    set currentInputField(component) {\n        this.inputField(component);\n    }\n\n    get currentInputField() {\n        return this._inputField;\n    }\n\n    set currentLayout(str) {\n        this.layout(str);\n    }\n\n    get currentLayout() {\n        return this._layout;\n    }\n\n    set maxCharacters(num) {\n        this._maxCharacters = num;\n    }\n\n    get maxCharacters() {\n        return this._maxCharacters;\n    }\n\n    get rows() {\n        return this._keys && this._keys.children;\n    }\n\n    get currentKeyWrapper() {\n        return this.rows && this.rows[this._rowIndex].children[this._columnIndex];\n    }\n\n    get currentKey() {\n        return this.currentKeyWrapper && this.currentKeyWrapper.key\n    }\n}","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2021 Metrological\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CollectionWrapper, ItemWrapper } from './helpers';\n\nexport default class List extends CollectionWrapper {\n    plotItems() {\n        const items = this._items;\n        const wrapper = this.wrapper;\n        const {directionIsRow, main, mainDim, mainMarginTo, mainMarginFrom, cross, crossDim} = this._getPlotProperties(this._direction);\n        let crossPos = 0, crossSize = 0, position = 0;\n        const animateItems = [];\n\n        const viewboundMain = directionIsRow ? 1920 : 1080;\n        const viewboundCross = directionIsRow ? 1080 : 1920;\n        const renderContext = this.core.renderContext\n\n        const newChildren = items.map((item, index) => {\n            const sizes = this._getItemSizes(item);\n            position += (sizes[mainMarginFrom] || sizes.margin || 0);\n            \n            if(crossSize < sizes[crossDim]) {\n                crossSize = sizes[crossDim];\n            }\n            const ref = `IW-${item.assignedID}`;\n            let mainPos = position;\n            crossPos = item[cross] || crossPos;\n\n            let tmp = mainPos;\n            let tcp = crossPos;\n\n            const existingItemWrapper = wrapper.tag(ref);\n\n            if(existingItemWrapper && \n                ((existingItemWrapper.active && (crossPos !== existingItemWrapper[cross] || mainPos !== existingItemWrapper[main])) ||\n                (!existingItemWrapper.active && ((renderContext[`p${main}`] + wrapper[main] + mainPos <= viewboundMain) || (renderContext[`p${cross}`] + wrapper[cross] + crossPos <= viewboundCross))))){\n                tmp = existingItemWrapper[main];\n                tcp = existingItemWrapper[cross];\n                animateItems.push(index);\n            }\n            position += sizes[mainDim] + (sizes[mainMarginTo] || sizes.margin || this._spacing);\n            return {\n                ref,\n                type: ItemWrapper,\n                componentIndex: index,\n                forceLoad: this._forceLoad,\n                ...sizes,\n                [`assigned${main.toUpperCase()}`]: mainPos,\n                [`assigned${cross.toUpperCase()}`]: crossPos,\n                [main]: tmp,\n                [cross]: tcp\n            }\n        });\n        wrapper.children = newChildren;\n        animateItems.forEach((index) => {\n            const item = wrapper.children[index];\n            item.patch({\n                smooth: {x: item.assignedX, y: item.assignedY}\n            });\n        })\n        this._resizeWrapper(crossSize);\n    }\n\n    repositionItems() {\n        const wrapper = this.wrapper;\n        if(!wrapper && wrapper.children.length) {\n            return true;\n        }\n        const {main, mainDim, mainMarginTo, mainMarginFrom, cross, crossDim} = this._getPlotProperties(this._direction);\n        let crossPos = 0, crossSize = 0, position = 0;\n        wrapper.children.forEach((item) => {\n            const sizes = this._getItemSizes(item.component);\n            position += sizes[mainMarginFrom] || sizes.margin || 0;\n            crossPos = item[cross] || crossPos;\n\n            if(crossSize < sizes[crossDim]) {\n                crossSize = sizes[crossDim];\n            }\n            const mainPos = position;\n            position += sizes[mainDim] + (sizes[mainMarginTo] || sizes.margin || this.spacing);\n            item.patch({\n                [`assigned${main.toUpperCase()}`]: mainPos,\n                [`assigned${cross.toUpperCase()}`]: 0,\n                [main]: mainPos,\n                [cross]: crossPos,\n                ...sizes\n            });\n        });\n        this._resizeWrapper(crossSize);\n        super.repositionItems();\n    }\n}","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning } from '@lightningjs/sdk';\nimport { List } from '@lightningjs/ui';\nimport { transition } from '../lib/helpers';\n\nexport default class Strip extends Lightning.Component {\n    static _template() {\n        return {\n            alpha: 0.001, transitions: {alpha: {duration: 0.25}},\n            Label: {x: 90, y: 0, pivotX: 0, pivotY: 1, scale: 0.8, text: {fontFace: 'Medium', fontSize: 48}},\n            List: {\n                y: 80, x: 90, type: List, w: 1600, spacing: 40\n            }\n        }\n    }\n\n    set index(num) {\n        this._index = num;\n    }\n\n    get index() {\n        return this.tag('List').index;\n    }\n\n    _init()  {\n        this._transitionAlpha = this.transition('alpha');\n        this._transitionLabel = this.tag('Label').transition('y');\n\n        this._labelAnimation = this.tag('Label').animation({duration: 0.2, actions: [\n            {p: 'y', v: {0: 0, 1: -30}},\n            {p: 'scale', v: {0: 0.8, 1: 1}},\n        ]})\n    }\n\n    _firstActive() {\n        const parentIndex = this.collectionWrapper.index;\n        const index = this.cparent.componentIndex;\n        this.patch({\n            alpha: index >= parentIndex,\n            Label: {text: {text: this.title}},\n            List: {\n                itemType: this.itemType, items: this.items, index: this._index\n            }\n        });\n    }\n\n    _unfocus() {\n        if(!this.cparent) {\n            return;\n        }\n\n        const parentIndex = this.collectionWrapper.index;\n        const index = this.cparent.componentIndex;\n\n        if(index !== parentIndex) {\n            this.tag('List').setIndex(0);\n        }\n        if(index < parentIndex) {\n            transition(this._transitionAlpha, 0.001);\n        }\n        this._labelAnimation.stop();\n    }\n\n    _focus() {\n        transition(this._transitionAlpha, 1);\n        this._labelAnimation.start();\n    }\n\n    _getFocused() {\n        return this.tag('List');\n    }\n\n    static get marginBottom () {\n        return 30;\n    }\n}","import { Lightning, Img, Utils, Router } from \"@lightningjs/sdk\";\nimport { Button } from \"../components\";\n\nexport default class Detail extends Lightning.Component {\n    static _template() {\n        return {\n            zIndex: 9,\n            Info: { x: 230, y: 90, alpha: 0.001, flex: {direction: 'column'},\n                Title: {w: 1060, renderOffscreen: true, text: {fontFace: 'Bold', wrap: true, fontSize: 74, lineHeight: 88}},\n                DescriptionWrapper: { h: 580, w: 960,\n                    Description: {w: 960, renderOffscreen: true, text: {fontFace: 'Regular', wrap: true, maxLines: 4, fontSize: 36, lineHeight: 44}},\n                    DescriptionFull: {alpha: 0, w: 960, renderOffscreen: true, text: {fontFace: 'Regular', wrap: true, maxLines: 10, fontSize: 36, lineHeight: 44}}\n                }\n            },\n            MoreInfo: {\n                alpha: 0.001, mountX: 1, x: 1690, y: 90, w: 300, h: 450,\n                LargePoster: {\n                    shader: {type: Lightning.shaders.RoundedRectangle, radius: 18}\n                },\n                PlayButton: {\n                    type: Button, y: 780, w: 90, h: 90, text: { fontSize: 24, text: 'Watch Now', lineHeight: 30}, icon: 'images/play.png', text: 'Watch Now', content: {w: 70, h: 70}\n                },\n                Runtime: {\n                    y: 805, x: 120, text: {fontFace: 'Bold', fontSize: 32, lineHeight: 28},\n                }\n            },\n            MoreInfo2: {\n                alpha: 0.001, x: 230, y: 40, flex: {direction: 'column'},\n                TitleInfo: {text: {fontFace: 'MediumItalic', fontSize: 32, lineHeight: 28}}\n            }\n        }\n    }\n    \n    _init() {\n        const poster = this.tag('LargePoster');\n        const moreInfo = this.tag('MoreInfo');\n        poster.on('txError', () => {\n            poster.src = Utils.asset('images/largeMissingImage.jpg');\n        });\n        poster.on('txLoaded', () => {\n            moreInfo.x = 1730;\n            this.patch({\n                Info: {\n                    DescriptionWrapper: {\n                        Description: {smooth: {alpha: 0}},\n                        DescriptionFull: {smooth: {alpha: 1}},\n                    }\n                },\n                MoreInfo: {\n                    smooth: {\n                        x: [1690, {duration: 0.2}],\n                        alpha: [1, {duration: 0.2}]\n                    }\n                },\n                MoreInfo2: {\n                    smooth: {\n                        alpha: 1\n                    }\n                }\n            });\n        });\n\n        const fullDescription = this.tag('DescriptionFull');\n        fullDescription.on('txLoaded', () => {\n            this.tag('MoreInfo2').y = 110 + this.tag('DescriptionWrapper').finalY + fullDescription.renderHeight;\n        });\n\n        this._fadeAnimation = this.tag('Info').animation({delay: 0.2, duration: 0.3, actions: [\n            {p: 'alpha', v: {0: 0.001, 1: 1}},\n            {p: 'x', v: {0: 270, 1: 230}}\n        ]});\n    }\n\n    show(data) {\n        if(this._data && this._data.id === data.id) {\n            return;\n        }\n        this._data = data;\n        const {title, description} = data;\n        this.tag('Info').patch({\n            Title: {text: title},\n            DescriptionWrapper: {\n                Description: {text: description},\n                DescriptionFull: {text: description},\n            }\n        });\n        this._fadeAnimation.start();\n    }\n\n    showMore(data) {\n        this._loadingData = true;\n        let { number_of_episodes, number_of_seasons, media_type, large_poster, backdrop, genres, runtime = ''} = data;\n\n        const titleInfo = [media_type.charAt(0).toUpperCase() + media_type.slice(1)];\n\n        if(genres.length > 0) {\n            titleInfo.push(genres.map((genre) => genre).join(', '))\n        }\n\n        if(runtime && (runtime + '').length > 0) {\n            let formatted = runtime + ' m';\n            if(runtime > 59) {\n                formatted = `${Math.floor(runtime / 60)} h ${(runtime % 60)} m`\n            }\n            runtime = formatted;\n        }\n\n        if(number_of_episodes && number_of_seasons) {\n            if(number_of_seasons === 1) {\n                runtime = `${number_of_episodes} episodes`;\n            }\n            else {\n                runtime = `${number_of_seasons} seasons`;\n            }\n        }\n\n        this.fireAncestors('$updateBackdrop', {src: backdrop});\n        this.patch({\n            MoreInfo: {\n                LargePoster: {\n                    texture: Img(large_poster).original()\n                },\n                Runtime: {text: runtime}\n            },\n            MoreInfo2: {\n                TitleInfo: {\n                    text: titleInfo.join(' \\u2022 ')\n                }\n            }\n        });\n        this._data = data;\n    }\n\n    _unfocus() {\n        this.patch({\n            Info: {\n                DescriptionWrapper: {\n                    Description: {alpha: 1},\n                    DescriptionFull: {alpha: 0},\n                }\n            },\n            MoreInfo: {\n                smooth: {alpha: 0.001, x: 1730}\n            },\n            MoreInfo2: {\n                smooth: {alpha: 0.001}\n            }\n        });\n    }\n\n    _handleKey() {\n        return true;\n    }\n\n    _handleBack() {\n        Router.back();\n    }\n\n    _handleEnter() {\n        const {id, media_type} = this._data;\n        Router.navigate(`player/${media_type}/${id}`);\n    }\n\n    _getFocused() {\n        return this.tag('PlayButton');\n    }\n}","import { Lightning, Colors, Utils } from \"@lightningjs/sdk\";\nimport { Key as BaseKey } from '@lightningjs/ui';\nexport class Key extends BaseKey {\n    static _template() {\n        return {\n            w: 0, h: 0,\n            Focus: {\n                alpha: 0, mount: 0.5, x: w => w / 2, y: h => h /2, w: w => w + 10, h: h => h + 10, rect: true, colorBottom: Colors('focus2').get(), colorTop: Colors('focus').get(), shader: {type: Lightning.shaders.RoundedRectangle, stroke: 7, strokeColor: 0xffffffff, fillColor: 0x00ffffff, radius: 22, blend: 1}\n            },\n            Label: {alpha: 0.8, mountX: 0.5, x: w => w / 2, color: Colors('white').get(), mountY: 0.42, y: h => h / 2, text: {fontFace: 'Regular', fontSize: 44}}\n        }\n    }\n\n    _init() {\n        this._focusAnimation = this.animation({duration: 0.2, actions: [\n            {t: 'Focus', p: 'alpha', v: {0: 0, 1: 1}},\n            {t: 'Focus', p: 'h', v: {0: this.h, 1: this.h + 10}},\n            {t: 'Focus', p: 'w', v: {0: this.w, 1: this.w + 10}},\n            {t: 'Label', p: 'alpha', v: {0: 0.8, 1: 1}},\n        ]});\n    }\n\n    set data(obj) {\n        this._data = obj;\n        this._update();\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    _update() {\n        if(!this.active) {\n            return;\n        }\n        const {label} = this._data;\n        this.patch({\n            Label: {text: label}\n        });\n    }\n\n    _firstActive() {\n        this._update();\n    }\n\n    _focus() {\n        this._focusAnimation.start();\n    }\n\n    _unfocus() {\n        this._focusAnimation.stop();\n    }\n\n    static get width() {\n        return 80;\n    }\n\n    static get height() {\n        return 80;\n    }\n}\n\nexport class IconKey extends Key {\n    static _template() {\n        return {\n            Focus: {\n                alpha: 0, mount: 0.5, x: w => w / 2, y: h => h /2, w: w => w + 10, h: h => h + 10, rect: true, colorBottom: Colors('focus2').get(), colorTop: Colors('focus').get(), shader: {type: Lightning.shaders.RoundedRectangle, stroke: 7, strokeColor: 0xffffffff, fillColor: 0x00ffffff, radius: 22, blend: 1}\n            },\n            Icon: {mount: 0.5, x: w => w / 2, y: h => h /2}\n        }\n    }\n\n    _update() {\n        //block parent update\n    }\n\n    set icon(src) {\n        this._icon = src;\n        this.patch({\n            Icon: {src: Utils.asset(this._icon)}\n        });\n    }\n\n    get icon() {\n        return this._icon;\n    }\n}","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Colors, Lightning, Router } from \"@lightningjs/sdk\"\nimport { List } from \"@lightningjs/ui\";\nimport { Key } from \"../components/Key.js\";\n\nexport default class Dialog extends Lightning.Component {\n    static _template() {\n        return {\n            zIndex: 9, w: 1920, h: 1080, rect: true, color: Colors('black').alpha(0.8).get(),\n            Background: {\n                x: 610, y:300, w: 700, h: 480, rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 22},\n                FastBlur: {\n                    w: 700, h: 480, zIndex: 9, type: Lightning.components.FastBlurComponent, amount: 3, content: {\n                        MirrorContent: {color: Colors('white').darker(0.4).get()}\n                    }\n                },\n            },\n            Wrapper: {\n                x: 610, y:300, w: 700, h: 480, \n                Labels: {w: 660, x: 350, y: 220, mountX: 0.5, mountY: 1, flex: {direction: 'column'},\n                    Header: {mountX: 0.5, x: w => w / 2, text: {text: this.bindProp('header'), fontSize: 54, fontFace: 'Regular'}},\n                    Message: {mountX: 0.5, x: w => w / 2, y: 50, w: 620, color: Colors('white').alpha(0.65).get(), text: {text: this.bindProp('message'), wordWrap: true, fontSize: 36, lineHeight: 48, textAlign: 'center', fontFace: 'MediumItalic'}},\n                },\n                Buttons: {type: List, mountX: 0.5, y: 320, x: 350, spacing: 50, autoResize: true, direction: 'row', signals: {onItemsRepositioned: true}}\n            }\n        }\n    }\n\n    _init() {\n        this.transition('alpha').on('finish', () => {\n            if(this.alpha === 0) {\n                this.visible = false;\n            }\n        });\n        this._blurContent();\n    }\n\n    _blurContent() {\n        const mirror = this.tag('FastBlur').content.tag('MirrorContent');\n        mirror.texture = this.fireAncestors('$getAppContentTexture');\n        mirror.texture.enableClipping(0, 0, 700, 480);\n    }\n\n    _handleKey() {\n        return true;\n    }\n\n    _handleEnter() {\n        const index = this.tag('Buttons').index;\n        const current = this._actions[index];\n        if(!!(current && current.action && current.action.call && current.action.apply)) {\n            current.action.call();\n        }\n    }\n\n    open({header = '', message = '', actions = []}) {\n        Router.focusWidget('Dialog');\n        if(actions.length === 0) {\n            actions.push({\n                label: \"Back\",\n                action: () => {this.close()}\n            });\n        }\n        this._actions = actions;\n        this.patch({\n            header,\n            message: message,\n            Wrapper: {\n                Buttons: {items: actions.map((action) => {\n                    return {type: Key, w: 170, h: 80, data: {label: action.label}}\n                })}\n            }\n        });\n        this.visible = true;\n        this.setSmooth('alpha', 1);\n    }\n\n    close() {\n        this.tag('Buttons').clear();\n        this.setSmooth('alpha', 0);\n        Router.focusPage();\n    }\n\n    _getFocused() {\n        return this.tag('Buttons');\n    }\n}","import { Colors, Lightning, Router, Utils } from \"@lightningjs/sdk\";\nimport { List } from \"@lightningjs/ui\";\nimport { transition, animation } from \"../lib/helpers\";\n\nexport default class Menu extends Lightning.Component {\n    static _template() {\n        return {\n            w: 140,\n            h: 1080,\n            Shadow: {\n                x: 140,\n                w: 110,\n                h: 1080,\n                rect: true,\n                zIndex: 8,\n                color: Colors('black').alpha(0.8).get(),\n                shader: {type: Lightning.shaders.FadeOut, right: 110}\n            },\n            RadialShadow: {\n                w: 1920,\n                h: 1080,\n                rect: true,\n                color: 0x00ffffff,\n                zIndex: 8,\n                shader: {\n                    type: Lightning.shaders.RadialGradient, radius: 70, innerColor: Colors('black').alpha(0.8).get(), outerColor:  Colors('white').alpha(0).get(), pivotX: 0, pivotY: 0.5\n                }\n            },\n            Background: {\n                FastBlur: {\n                    w: 140, h: 1080, zIndex: 9, type: Lightning.components.FastBlurComponent, amount: 3, content: {\n                        MirrorContent: {color: Colors('white').darker(0.4).get()}\n                    }\n                }\n            },\n            Focus: {\n                zIndex: 10, x: w => w, mountX: 0.5, w: 14, h: 100, y: Menu.focusDefaultPosition, rtt: true, shader: { type: Lightning.shaders.RoundedRectangle, radius: 7 }, transitions: {y: {duration: 0.2}, h: {duration: 0.2}},\n                Lighting: {\n                    w: w => w, h: h => h, rect: true,\n                    shader: {\n                        type: Lightning.shaders.RadialGradient, innerColor: Colors('white').get(), outerColor: Colors('white').get(), radius: 50, pivot: 0.5\n                    }\n                }\n            },\n            List: {\n                zIndex: 10, forceLoad: true, direction: 'column', y: 375, x: 20, w: 140, h: 620, type: List, signals: { onIndexChanged: true }\n            }\n        }\n    }\n\n    _blurContent() {\n        const mirror = this.tag('FastBlur').content.tag('MirrorContent');\n        mirror.texture = this.fireAncestors('$getAppContentTexture');\n        mirror.texture.enableClipping(0, 0, 140, 1080);\n    }\n\n    _setup() {\n        this._items = ['home','search', 'close'];\n        // 'movies', 'series',\n        const items = this._items.map((item) => {\n            return { type: MenuItem, item, selected: false };\n        });\n        this.tag('List').add(items);\n        this._blurContent();\n    }\n\n    _init() {\n        const focus = this.tag('Focus')\n        this._focusTransitionH = focus.transition('h');\n        this._focusTransitionY = focus.transition('y');\n\n        this._focusTransitionY.on('finish', () => {\n            transition(this._focusTransitionH, 100);\n        });\n\n        this._focusTransitionH.on('finish', () => {\n            if (focus.h === 100) {\n                this._pivotAnimation(0.5);\n            }\n        });\n\n        this._focusMenuAnimation = this.animation({duration: 0.3, actions: [\n            {t: 'Focus.Lighting', p: 'shader.innerColor', v: {0: Colors('white').get(), 1: Colors('focus').get()}},\n            {t: 'Focus.Lighting', p: 'shader.outerColor', v: {0: Colors('white').get(), 1: Colors('focus2').get()}},\n            {t: 'RadialShadow', p: 'shader.radius', v: {0: 70, 1: 1400}}\n        ]});\n    }\n\n    onIndexChanged({ previousIndex = this.tag('List').index, index = this._selectedIndex }) {\n        if (this.active && previousIndex !== index) {\n            this._navigatingDirection = (previousIndex < index ? 1 : -1);\n            const focus = this.tag('Focus')\n            const targetMount = this._navigatingDirection > 0 ? 1 : 0;\n            const mod = targetMount * 100;\n\n            if (focus.mountY !== targetMount) {\n                focus.mountY = targetMount;\n                focus.y = focus.y + this._navigatingDirection * 100;\n            }\n\n            this._pivotAnimation(targetMount);\n\n            this._navigatingTo = Menu.focusDefaultPosition + 130 * index + mod;\n            if (this._focusTransitionH.targetValue !== 200) {\n                transition(this._focusTransitionH, 200, 0.1);\n            }\n            transition(this._focusTransitionY, this._navigatingTo);\n        }\n    }\n\n    _pivotAnimation(value) {\n        if(value === this._pivotValue) {\n            return;\n        }\n        this._anim = animation(this._anim, 'Focus', this, {\n            duration: 0.3,\n            actions: [\n                {t: 'Lighting', p: 'shader.pivotY', v: {0: this.tag('Lighting').shader.pivotY, 1: value}}\n            ]\n        });\n        this._pivotValue = value;\n    }\n\n    _handleUp() {\n        this.tag('Focus').animation({\n            duration: 0.4, actions: [\n                { p: 'mountY', v: { 0.5: 1 } },\n                { p: 'y', v: { 0.5: this._focusTransitionY.targetValue + 100 } },\n                { p: 'h', v: { 0.5: 125, 1: 100 } },\n                { t: 'Lighting', p: 'shader.pivotY', v: {0: this.tag('Lighting').shader.pivotY, 0.5: 0, 1:0.5} }\n            ]\n        }).start();\n        this._pivotValue = 0.5;\n    }\n\n    _handleDown() {\n        this.tag('Focus').animation({\n            duration: 0.4, actions: [\n                { p: 'mountY', v: { 0.5: 0 } },\n                { p: 'y', v: { 0.5: this._focusTransitionY.targetValue - 100 } },\n                { p: 'h', v: { 0.5: 125, 1: 100 } },\n                { t: 'Lighting', p: 'shader.pivotY', v: {0: this.tag('Lighting').shader.pivotY, 0.5: 1, 1:0.5} }\n            ]\n        }).start();\n        this._pivotValue = 0.5;\n    }\n\n    _handleKey() {\n        return true;\n    }\n\n    _handleRight() {\n        Router.focusPage();\n    }\n\n    _focus() {\n        this._focusMenuAnimation.start();\n    }\n\n    _unfocus() {\n        this._focusMenuAnimation.stop();\n        if(!Router.isNavigating()) {\n            this.tag('List').setIndex(this._selectedIndex);\n        }\n    }\n\n    _getFocused() {\n        return this.tag('List');\n    }\n\n    _onActivated(page) {\n        const list = this.tag('List');\n        const currentRouteIndex = this._selectedIndex = this._items.indexOf(page[Router.symbols['route']]);\n\n        list.items.forEach((item, index) => {\n            item.selected = index === currentRouteIndex;\n        });\n        list.setIndex(currentRouteIndex);\n        if(!this.active) {\n            transition(this._focusTransitionY, Menu.focusDefaultPosition + 130 * currentRouteIndex, 1);\n            this._focusTransitionY.finish();\n        }\n    }\n\n    static get focusDefaultPosition() {\n        return 375;\n    }\n}\n\nclass MenuItem extends Lightning.Component {\n    static _template() {\n        return {\n            alpha: 0.8,\n            Icon: { scale: 0.7 },\n            Label: {alpha: 0, x: 170, y: 50, mountY: 0.43, text: {fontFace: 'Medium', fontSize: 56}}\n        }\n    }\n\n    _init() {\n        this._updateFocusAnimation();\n    }\n\n    _firstActive() {\n        this.patch({\n            Icon: {src: Utils.asset(`images/${this.item}.png`)},\n            Label: {text: this.item.charAt(0).toUpperCase() + this.item.slice(1)}\n        });\n    }\n\n    _handleEnter() {\n        if(this.item === 'close') {\n            this.application.closeApp();\n        }\n        else {\n            Router.navigate(this.item.toLowerCase());\n        }\n    }\n\n    _focus() {\n        this._focusAnimation.start();\n    }\n\n    _unfocus() {\n        this._focusAnimation.stop();\n    }\n\n    _updateFocusAnimation(bool = this._selected) {\n        if(this._focusAnimation && this._focusAnimation.isActive()) {\n            this._focusAnimation.stopNow();\n        }\n\n        this._focusAnimation = this.animation({duration: 0.2, actions: [\n            {p: 'alpha', v: {0: bool ? 1 : 0.8, 1: 1}},\n            {t: 'Label', p: 'alpha', v: {0: 0, 1: 1}},\n            {t: 'Label', p: 'x', v: {0: 190, 1: 170}}\n        ]});\n    }\n\n    set selected(bool) {\n        this._updateFocusAnimation(bool);\n        this.alpha = bool ? 1 : 0.8;\n        this._selected = bool;\n    }\n\n    get selected() {\n        return this._selected;\n    }\n\n    static get marginBottom() {\n        return 30;\n    }\n\n    static get width() {\n        return 100;\n    }\n\n    static get height() {\n        return 100;\n    }\n}","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning, Colors, Utils } from \"@lightningjs/sdk\";\nimport { InputField as Input } from \"@lightningjs/ui\";\n\nexport default class InputField extends Lightning.Component {\n    static _template () {\n        return {\n            x: 330, y: 140, zIndex: 9,\n            onPositionChanged: this.bindProp('positionX', (comp) => {\n                if(comp.active) {\n                    comp.mirroredContent.x = 330-comp.positionX;\n                    comp.x = comp.positionX;\n                }\n                return comp.positionX;\n            }),\n            positionX: 330,\n            Background: {\n                w: 1260, h: 140, rtt: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 22},\n                FastBlur: {\n                    w: 1260, h: 140, zIndex: 9, type: Lightning.components.FastBlurComponent, amount: 3, content: {\n                        MirrorContent: {color: Colors('white').darker(0.4).get()}\n                    }\n                }\n            },\n            Labels: {\n                Icon: {x: 70, y: 70, mount: 0.5, zIndex: 10, src: Utils.asset(`images/search.png`)},\n                Input: {\n                    type: Input,\n                    x: 140,\n                    y: 70,\n                    h: 54,\n                    mountY: 0.43,\n                    zIndex: 10,\n                    description: 'Search...',\n                    inputText: {\n                        fontFace: 'Regular',\n                        fontSize: 54\n                    },\n                    cursor: {\n                        y: 3,\n                        w: 7, \n                        h: 62,\n                        shader: {\n                            type: Lightning.shaders.RoundedRectangle,\n                            radius: 3\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    get mirroredContent () {\n        return this.tag('FastBlur').content.tag('MirrorContent');\n    }\n\n    _setup() {\n        this.mirroredContent.texture = this.fireAncestors('$getAppContentTexture');\n        this.mirroredContent.texture.enableClipping(330, 140, 1590, 140);\n    }\n\n    _init() {\n        this._minimize = this.animation({duration: 0.4, actions: [\n            {p: 'positionX', v: {0: 330, 0.5: 1330}},\n        ]});\n    }\n\n    get input() {\n        return this.tag('Input');\n    }\n\n    maximize() {\n        if(!this._minized) {\n            return;\n        }\n        this._minized = false;\n        this._minimize.stop();\n        this.tag('Input').cursor.show();\n    }\n\n    minimize() {\n        if(this._minized) {\n            return;\n        }\n        this._minized = true;\n        this._minimize.start();\n        this.tag('Input').cursor.hide();\n    }\n\n    _focus() {\n        this.tag('Input').cursor.setSmooth('color', Colors('focus').get())\n    }\n\n    _getFocused() {\n        return this.tag('Input');\n    }\n}","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning } from \"@lightningjs/sdk\";\nexport default class CutOut extends Lightning.shaders.WebGLDefaultShader {\n    constructor(ctx) {\n        super(ctx);\n        this._ic = 0xffffffff;\n        this._normalizedIC = this._getNormalizedColor(this._ic);\n        this._oc = 0xffffffff;\n        this._normalizedOC = this._getNormalizedColor(this._oc);\n    }\n\n    set innerColor(argb) {\n        this._ic = argb;\n        this._normalizedIC = this._getNormalizedColor(argb);\n        this.redraw();\n    }\n\n    get innerColor() {\n        return this._ic;\n    }\n\n    set outerColor(argb) {\n        this._oc = argb;\n        this._normalizedOC = this._getNormalizedColor(argb);\n        this.redraw();\n    }\n\n    get outerColor() {\n        return this._oc;\n    }\n\n    _getNormalizedColor(color) {\n        const col = Lightning.StageUtils.getRgbaComponentsNormalized(color);\n        col[0] *= col[3];\n        col[1] *= col[3];\n        col[2] *= col[3];\n        return new Float32Array(col);\n    }\n\n    setupUniforms(operation) {\n        super.setupUniforms(operation);\n        this._setUniform('innerColor', this._normalizedIC, this.gl.uniform4fv);\n        this._setUniform('outerColor', this._normalizedOC, this.gl.uniform4fv);\n    }\n\n}\n\nCutOut.fragmentShaderSource = `\n    #ifdef GL_ES\n    precision lowp float;\n    #endif\n    varying vec2 vTextureCoord;\n    varying vec4 vColor;\n    uniform sampler2D uSampler;\n    uniform vec4 innerColor;\n    uniform vec4 outerColor;\n    void main(void){\n        vec4 tx = texture2D(uSampler, vTextureCoord) * vColor;\n        gl_FragColor = mix( outerColor * vColor, innerColor * vColor, tx.a);\n    }\n`;","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Lightning, Utils, Router } from \"@lightningjs/sdk\";\nimport CutOut from \"../shaders/CutOut.js\";\n\nexport default class Splash extends Lightning.Component {\n    static _template() {\n        return {\n            CutOut: {\n                w: 1920, h: 1080, rtt: true, shader: {type: CutOut},\n                Logo: {\n                    h: 270, w: 844, y: 480, x: 960, mount: 0.5,\n                    V: {\n                        y: 70, src: Utils.asset('images/logo/v.png')\n                    },\n                    O: {\n                        y: 70, x: 276, src: Utils.asset('images/logo/o.png')\n                    },\n                    D: {\n                        y: 70, x: 576, src: Utils.asset('images/logo/d.png')\n                    }\n                },\n                ExampleApp: {\n                    x: 815, y: 655, src: Utils.asset('images/logo/example-app.png')\n                }\n            }\n        }\n    }\n\n    _init() {\n        this._openAnimation = this.tag('CutOut').animation({\n            duration: 1.4, actions: [\n                {t: 'V', p: 'alpha', v: {0: 0, 0.25: 1}},\n                {t: 'V', p: 'y', v: {0: 70, 0.25: -20, 0.35: 0}},\n                {t: 'O', p: 'alpha', v: {0.25: 0, 0.5: 1}},\n                {t: 'O', p: 'y', v: {0.25: 70, 0.5: -20, 0.6: 0}},\n                {t: 'D', p: 'alpha', v: {0.5: 0, 0.75: 1}},\n                {t: 'D', p: 'y', v: {0.5: 70, 0.75: -20, 0.85: 0}},\n                {t: 'ExampleApp', p: 'x', v: {0.6: 680, 0.9: 815}},\n                {t: 'ExampleApp', p: 'alpha', v: {0.6: 0, 0.9: 1}},\n                {p: 'shader.outerColor', v: {0.80: 0xffffffff, 1: 0x00ffffff}},\n                {p: 'shader.innerColor', v: {0.80: 0x00ffffff, 1: 0xffffffff}}\n            ]\n        });\n\n        this._openAnimation.on('finish', () => {\n            setTimeout(() => {\n                Router.resume();\n            }, 1000)\n        })\n    }\n\n    _active() {\n        this.fireAncestors('$updateAmbientBackground', {color: 0xff9300e0});\n        this._openAnimation.start();\n    }\n}","import { Router } from \"@lightningjs/sdk\";\nimport { List } from \"@lightningjs/ui\";\nimport { Page } from \"../components\";\n\nexport default class Main extends Page {\n    static _template() {\n        return {\n            Content: {x: 140, type: List, w: w => w, y: 580, h: 500, direction: 'column', scroll: 0, scrollTransition: {duration: 0.4}}\n        }\n    }\n\n    pageTransition(pageIn, pageOut) {\n        const menu = pageIn.widgets.menu;\n        if(menu.alpha !== 1) {\n            menu.visible = true;\n            menu.alpha = 0.001;\n            menu.setSmooth('alpha', 1, {delay: 0.2, duration: 0.2});\n        }\n        return super.pageTransition(pageIn, pageOut);\n    }\n\n    _getFocused() {\n        return this.tag('Content');\n    }\n\n    $updateItemTitle(e) {\n        this.tag('ItemDescription').item = e;\n    }\n\n    addStrips(array) {\n        if(this._hasData) {\n            return;\n        }\n        this._hasData = true;\n        const content = this.tag('Content');\n        content.add(array);\n    }\n\n    _handleLeft() {\n        Router.focusWidget('Menu');\n    }\n}","import { IconKey, Key } from \"../components/Key.js\";\n\nexport default {\n    layouts: {\n        'ABC': [\n            ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'],\n            ['K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'], \n            ['Layout:123', 'U', 'V', 'W', 'X', 'Y', 'Z', 'Space', 'Backspace']\n        ],\n        '123': [\n            ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n            ['Layout:ABC', 'Space', 'Backspace']\n        ]\n    },\n    styling: {\n        align: 'center',\n        horizontalSpacing: 15,\n        verticalSpacing: 20,\n    },\n    buttonTypes: {\n        default: {\n            type: Key,\n        },\n        Layout: {\n            type: Key, w: 110,\n        },\n        Backspace: {\n            type: IconKey, icon: '/images/backspace.png'\n        },\n        Space: {\n            type: IconKey, w: 110, icon: '/images/space.png',\n        }\n    }\n};","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Router } from '@lightningjs/sdk';\nimport {\n  Grid,\n  Keyboard,\n} from '@lightningjs/ui';\n\nimport { Page } from '../components';\nimport { transition } from '../lib/helpers.js';\nimport keyboardConfig from '../lib/keyboardConfig.js';\n\nexport default class Search extends Page {\n    static _template () {\n        return {\n            Keyboard: {mountX: 0.5, y: 330, x: 960, w: 935, type: Keyboard, currentLayout: 'ABC', config: keyboardConfig, signals: {onInputChanged: true}},\n            Content: {alpha: 0.001, y: 90, mountX: 0.5, x: 960, type: SearchGrid, w: 1535, h: 1080, columns: 7, scroll: 640, scrollTransition: {duration: 0.4}}\n        }\n    }\n\n    pageTransition(pageIn, pageOut) {\n        //hide menu widget\n        pageIn.widgets.menu.setSmooth('alpha', 0, {delay: 0.0, duration: 0.2});\n        const inputfield = pageIn.widgets.inputfield;\n        //show inputfield widget if not visible\n        if(inputfield.alpha !== 1) {\n            inputfield.visible = true;\n            inputfield.alpha = 0.001;\n            inputfield.setSmooth('alpha', 1, {delay: 0.2, duration: 0.2});\n        }\n        //fire super\n        return super.pageTransition(pageIn, pageOut);\n    }\n\n    onInputChanged({input}) {\n        //hide grid when input has changed\n        const grid = this.tag('Content');\n        grid.setSmooth('alpha', 0.001);\n\n        //if input length is 0 clear timeout else start search timeout\n        if(input.length === 0) {\n            this._clearSearchTimeout();\n        }\n        else {\n            this._startSearchTimeout();\n        }\n        //store input value to be used when search timeout is fired\n        this._input = input;\n    }\n\n    _setup() {\n        //connect inputfield widget with keyboard\n        this.tag('Keyboard').inputField(this.widgets.inputfield.input);\n    }\n\n    _firstActive() {\n        //when active for the first time focus keyboard\n        this._setState('Keyboard')\n    }\n\n    _startSearchTimeout() {\n        this._clearSearchTimeout();\n        //after 600 ms fire _doSearch\n        this._searchTimeout = setTimeout(() => {\n            this._doSearch();\n        }, 600);\n    }\n\n    _clearSearchTimeout() {\n        if(this._searchTimeout) {\n            clearTimeout(this._searchTimeout);\n        }\n    }\n\n    _doSearch() {\n        //if onSearch exists and is a function, execute function and handle results\n        if (this._input.length <= 4) return\n        \n        if(this.onSearch?.apply?.call) {\n            this.onSearch(this._input)\n                .then((response) => {\n                    //clear grid of current items\n                    const grid = this.tag('Content');\n                    grid.clear();\n                    //when response data length is bigger than 0 add them to grid\n                    if(response.length > 0) {\n                        grid.add(response);\n                        grid.setSmooth('alpha', 1, {delay: 0.2});\n                    }\n                });\n        }\n    }\n\n    _init() {\n        const grid = this.tag('Content');\n        this._focusTransitionY = grid.transition('y');\n        grid.transition('alpha').on('finish', () => {\n            if(grid.alpha === 0.001 && this._input.length === 0) {\n                grid.clear();\n            }\n        })\n        this._hideKeyboard = this.tag('Keyboard').animation({duration: 0.4, actions: [\n            {p: 'x', v: {0: 960, 0.5: 1000}},\n            {p: 'alpha', v: {0: 1, 0.5: 0}},\n        ]});\n    }\n\n    static _states() {\n        return [\n            class Keyboard extends this {\n                $enter() {\n                    this.fireAncestors('$updateBackdrop', {src: null});\n                    this.fireAncestors('$updateAmbientBackground', {color: 0xff9300e0});\n                    \n                    this._hideKeyboard.stop();\n                    this.widgets.inputfield.maximize();\n                    this.widgets.detail.setSmooth('alpha', 0.001, {duration: 0.2, delay: 0});\n                }\n\n                $exit() {\n                    this._hideKeyboard.start();\n                    this.widgets.inputfield.minimize();\n                    this.widgets.detail.setSmooth('alpha', 1, {duration: 0.2, delay: 0.2});\n                }\n\n                _getFocused() {\n                    return this.tag('Keyboard');\n                }\n\n                _handleUp() {\n                    Router.focusWidget('InputField');\n                }\n\n                _handleDown() {\n                    if(this.tag('Content').hasItems) {\n                        this._setState('Grid');\n                    }\n                }\n            },\n            class Grid extends this {\n                $enter() {\n                    transition(this._focusTransitionY, 0);\n                }\n\n                $exit() {\n                    transition(this._focusTransitionY, 90);\n                }\n\n                _getFocused() {\n                    return this.tag('Content');\n                }\n\n                _handleUp() {\n                    this._setState('Keyboard');\n                }\n            }\n        ]\n    }\n}\n\nclass SearchGrid extends Grid {\n    _indexChanged(event) {\n        super._indexChanged(event);\n        this._lines.forEach((line, lineIndex) => {\n            line.forEach((wrapper) => {\n                this.itemWrappers[wrapper].setSmooth('alpha', lineIndex < event.mainIndex ? 0.001 : 1);\n            });\n        });\n    }\n}","import { Router } from \"@lightningjs/sdk\";\nimport { Page } from \"../components\";\n\nexport default class Detail extends Page {\n    pageTransition(pageIn, pageOut) {\n        pageIn.widgets.menu.setSmooth('alpha', 0, {delay: 0.0, duration: 0.2});\n        pageIn.widgets.inputfield.setSmooth('alpha', 0, {delay: 0.0, duration: 0.2});\n        pageIn.widgets.detail.setSmooth('alpha', 1, {delay: 0.2, duration: 0.2});\n        return super.pageTransition(pageIn, pageOut);\n    }\n\n    _active() {\n        Router.focusWidget('detail');\n    }\n}","import {\n  Colors,\n  Router,\n  Lightning,\n  VideoPlayer,\n} from '@lightningjs/sdk';\nimport { List } from '@lightningjs/ui';\nimport { destroyMovieTorrent } from '../lib/api';\nimport { Dialog } from '../widgets';\nimport { Page } from '../components';\nimport { IconKey } from '../components/Key';\n\nexport default class Player extends Page {\n    static _template() {\n        return {\n            Dialog: {\n                visible: false, type: Dialog, zIndex: 101\n            },\n            Placeholder: {alpha: 0.001, w: 1920, h: 1080},\n            ScreenBlock: {w: 1920, h: 1080, rect: true, color: Colors('black').get()},\n            Overlay: {\n                Top: {rect: true, w: 1920, h: 540, colorBottom: Colors('black').alpha(0.3).get(), colorTop: Colors('black').alpha(0.85).get()},\n                Bottom: {rect: true, w: 1920, h: 540, mountY: 1, y: 1080, colorTop: Colors('black').alpha(0.3).get(), colorBottom: Colors('black').alpha(0.85).get()}\n            },\n            Title: {x: 230, y: 90, w: 1060, text: {fontFace: 'Bold', wrap: true, fontSize: 74, lineHeight: 88}},\n            PlayerButtons: {\n                y: 890, x: 960, mountX: 0.5, type: List, autoResize: true, spacing: 50, forceLoad: true,\n            },\n            Progressbar: {y: 830, x: 960, w: 1620, h: 8, mountX: 0.5,\n                Frame: {\n                    w: w => w, h: h => h, rect: true, alpha: 0.7, shader: {type: Lightning.shaders.RoundedRectangle, radius: 2}\n                },\n                Troth: {\n                    mountY: 0.5, y: 4, x: -10, w: 20, h: 20, rect: true, shader: {type: Lightning.shaders.RoundedRectangle, radius: 10}\n                },\n                TimeLeft: {\n                    mountX: 1,\n                    x: 1620,\n                    y: 20,\n                    text: {\n                        fontSize: 24,\n                        text: '1:20:30',\n                        lineHeight: 30,\n                    }\n                },\n                CurrentTime: {\n                    mountX: 1,\n                    x: 75,\n                    y: 20,\n                    text: {\n                        fontSize: 24,\n                        text: '00:00:00',\n                        lineHeight: 30,\n                    }\n                }\n            },\n        }\n    }\n\n    pageTransition(pageIn, pageOut) {\n        const widgets = pageIn.widgets;\n        //hide all widgets in app;\n        for(let key in widgets) {\n            widgets[key].setSmooth('alpha', 0, {delay: 0.0, duration: 0.2});\n        }\n        //fire super\n        return super.pageTransition(pageIn, pageOut);\n    }\n\n    setData(data) {\n        this._data = data;\n        this._update();\n        this.movieId = data.id;\n\n        if (!data.videoUrl){\n            // Router.back()\n            this.showError('Video MP4 File Not Found');\n            return\n        }\n\n        this.initializeVideo(data.videoUrl);\n    }\n\n    showError(message) {\n        const dialog = this.tag('Dialog');\n        dialog.open({header: \"Error!\", message});\n\n        setTimeout(() => {\n            dialog.close();\n            Router.back()\n\n        }, 3000)\n    }\n\n    _setup() {\n        //map player buttons\n        const buttons = ['previous', 'play', 'next'].map((icon) => {\n            return {type: IconKey, w: 110, h: 110, icon: `images/${icon}.png`, action: icon}\n        });\n\n        //playerButtons list\n        const playerButtons = this.tag('PlayerButtons')\n        //add mapped player buttons\n        playerButtons.add(buttons);\n        //force playerButtons list index to 1\n        playerButtons.index = 1;\n\n        //use the animation functinality to fake playback replace the following events with player events\n        this._progressAnimation = this.animation({duration: 60, repeat: -1, actions: [\n        ]});\n\n\n        this._progressAnimation.on('progress', () => {\n            const { currentTime, duration } = VideoPlayer\n            const w = this.tag('Progressbar').w;\n            this.tag('Troth').w = w * (currentTime / duration)\n        });\n\n        //When the asset is starting\n        this._progressAnimation.on('start', () => {\n            this._showOverlay();\n            this._startOverlayTimeout();\n            this._updatePlayButton(false);\n            this._hideScreenBlock();\n        });\n\n        //This event should be fired when the play event is fired. resume == play\n        this._progressAnimation.on('resume', () => {\n            this._startOverlayTimeout();\n            this._updatePlayButton(false);\n        })\n\n        //this event should be fired when the pause event is fired.\n        this._progressAnimation.on('pause', () => {\n            this._updatePlayButton(true);\n        });\n\n        //this event should be fired when the stop event is fired.\n        this._progressAnimation.on('stop', (p) => {\n            this._showOverlay();\n            this._showScreenBlock();\n        });\n\n        this.tag('Placeholder').on('txLoaded', () => {\n            this.tag('Placeholder').setSmooth('alpha', 1, {duration: 0.1});\n            this._progressAnimation.start();\n        });\n\n        const blackAlpha = Colors('black').alpha(0.3).get();\n\n        //create overlay hide animation\n        this._hideControls = this.animation({duration: 0.2, stopMethod: 'reverse', actions: [\n            {t: 'Top', p: 'alpha', v: {0: 1, 1: 0}},\n            {t: 'Top', p: 'colorBottom', v: {0: blackAlpha, 1: 0x00000000}},\n            {t: 'Title', p: 'y', v: {0: 90, 1: 50}},\n            {t: 'Title', p: 'alpha', v: {0: 1, 1: 0}},\n            {t: 'Bottom', p: 'alpha', v: {0: 1, 1: 0}},\n            {t: 'Bottom', p: 'colorTop', v: {0: blackAlpha, 1: 0x00000000}},\n            {t: 'Progressbar', p: 'y', v: {0: 830, 1: 870}},\n            {t: 'Progressbar', p: 'alpha', v: {0: 1, 1: 0}},\n            {t: 'PlayerButtons', p: 'y', v: {0: 890, 1: 930}},\n            {t: 'PlayerButtons', p: 'alpha', v: {0: 1, 1: 0}},\n        ]});\n\n        this._hideControls.on('stopFinish', () => {\n            //when controls are visible try hiding after delay\n            this._startOverlayTimeout();\n        });\n    }\n\n    _showOverlay() {\n        //show controls.\n        this._hideControls.stop();\n    }\n\n    _startOverlayTimeout() {\n        this._clearOverlayTimeout();\n        //create timeout for 3000 ms\n        this._overlayTimeout = setTimeout(() => {\n            //if active and player is progressing (player is playing)\n            if(this.active && this._progressAnimation.isActive()) {\n                this._hideControls.start();\n            }\n        }, 3000)\n    }\n\n    _clearOverlayTimeout() {\n        if(this._overlayTimeout) {\n            clearTimeout(this._overlayTimeout);\n        }\n    }\n\n    _update() {\n        // //if not active or no data dont update\n        // if(!this.active || !this._data) {\n        //     return;\n        // }\n        // const {title, backdrop} = this._data;\n        // this.patch({\n        //     Placeholder: {texture: Img(backdrop).contain(1920, 1080)},\n        //     Title: {text: title}\n        // });\n    }\n\n     _showScreenBlock() {\n        this.tag('ScreenBlock').alpha = 1;\n    }\n\n    _hideScreenBlock() {\n        this.tag('ScreenBlock').alpha = 0;\n    }\n\n    _updatePlayButton(toPlay = true) {\n        //update play pause buttong to play icon when toPlay is true.\n        this.tag('PlayerButtons').items[1].icon = `images/${toPlay ? 'play' : 'pause'}.png`;\n        if(!toPlay) {\n            this._startOverlayTimeout();\n        }\n    }\n\n\n    $videoPlayerPlaying () {\n        this._hideScreenBlock();\n        this._updatePlayButton(false)\n        this._progressAnimation.play()\n    }\n\n    formatTime (seconds) {\n        if (!seconds) {\n            return '00:00:00';\n        }\n        return new Date(seconds * 1000).toISOString().slice(11, -5)\n    }\n\n    // this will be invoked on timeupdate\n    $videoPlayerTimeUpdate(_, currentTime) {\n        const formattedCurrentTime = this.formatTime(currentTime);\n        const formattedTimeLeft = this.formatTime(VideoPlayer.duration - currentTime);\n        this.tag('CurrentTime').text = formattedCurrentTime;\n        this.tag('TimeLeft').text = formattedTimeLeft;\n    }\n \n    // this will be invoked when the video ends\n    $videoPlayerEnded() {\n \n    }\n \n    // this will be invoked when the video starts playing\n    $videoPlayerPlay() {\n \n    }\n \n    // this will be invoked when the video pauses\n    $videoPlayerPause() {\n \n    }\n \n    // this will be invoked when the video stops\n    $videoPlayerStop() {\n \n    }\n \n    // this will be invoked when the video raises an error\n    $videoPlayerError() {\n \n    }\n\n    _handleEnter() {\n        const currentButton = this.tag('PlayerButtons').currentItem;\n\n        switch(currentButton.action) {\n            case 'play':\n                if(this._progressAnimation.isActive()) {\n                    this._progressAnimation.pause();\n                    VideoPlayer.pause()\n                }\n                else {\n                    this._progressAnimation.play();\n                    VideoPlayer.play()\n                }\n                break;\n            case 'next':\n                VideoPlayer.skip(30);\n                break;\n                case 'previous':\n                VideoPlayer.skip(-30);\n                break;\n        }\n    }\n\n    _captureKey() {\n        if(this._hideControls.p !== 0) {\n            this._showOverlay();\n        }\n        return false;\n    }\n\n    _firstActive() {\n        // this._update();\n        // this.tag('Loader').start();\n    }\n\n    initializeVideo(videoUrl){\n        VideoPlayer._videoEl.style.backgroundColor = 'black';\n        VideoPlayer.consumer(this)\n        VideoPlayer.open(videoUrl);\n    }\n\n    _inactive() {\n        super._inactive();\n        //stop fake media progress\n        this._progressAnimation.stopNow();\n        //show controls instantly reverting it to starting point\n        this._hideControls.stopNow();\n\n        VideoPlayer.close()\n\n        //playback placeholder remove from code when implementing player\n        this.tag('Placeholder').alpha = 0.001;\n    }\n\n    _getFocused() {\n        return this.tag('PlayerButtons');\n    }\n    \n    get hideBackground() {\n        return true;\n    }\n\n\n     _handleBack () {\n         destroyMovieTorrent(this.params.mediaId).then(\n            (data) => {\n                console.log(data)\n            }\n         )\n\n        const navCheck = Router.isNavigating();\n        if(navCheck) {\n            return true;\n        }\n        return false;\n\n    }\n}","import { Strip, Item} from \"@/components\"\n\nexport const createPageComponents = (strips) => {\n    return strips.map(({title, media_type, items}) => {\n        return {type: Strip, itemType: Item, h: Item.height + 80, title, index: 0, items: createItemCollection(items, media_type)}\n    });\n}\n\nexport const createItemCollection = (items, media_type = 'tv') => {\n    console.log({items})\n    return items.map((item) => {\n        return {item: applyItemModel({media_type, ...item})}\n    })\n};\n\nexport const applyItemModel = (item) => {\n    const {id, title, name, media_type = 'tv', number_of_episodes, number_of_seasons, genres, runtime, description, images: { posterUrl, bannerUrl, fanartUrl }} = item;\n    return {\n        id,\n        media_type,\n        number_of_episodes,\n        number_of_seasons,\n        genres,\n        runtime,\n        title: media_type === 'tv' ? name : title,\n        description,\n        poster: posterUrl,\n        large_poster: posterUrl,\n        backdrop: bannerUrl\n    }\n}\n\nexport const applyPlayerModel = (item) => {\n    return {\n        ...item\n    }\n} ","import { Item } from \"../components\";\nimport { Main, Search, Splash, Detail, Player } from \"../pages\";\nimport { getDetailPage, getHomePage, getMoviesPage, getSearchResults, getSeriesPage, getVideo } from \"./api.js\";\nimport { applyItemModel, applyPlayerModel, createItemCollection, createPageComponents } from \"./Factory.js\";\nconst routes = [\n    {\n        path: 'home',\n        component: Main,\n        on: async (page) => {\n            getHomePage()\n                .then((response) => {\n                    console.log({response})\n                    page.addStrips(createPageComponents(response));\n                    return true;\n                })\n        },\n        widgets: ['menu', 'detail']\n    },\n    // {\n    //     path: 'movies',\n    //     component: Main,\n    //     on: async (page) => {\n    //         getMoviesPage()\n    //             .then((response) => {\n    //                 page.addStrips(createPageComponents(response));\n    //                 return true;\n    //             })\n    //     },\n    //     widgets: ['menu', 'detail']\n    // },\n    // {\n    //     path: 'series',\n    //     component: Main,\n    //     on: async (page) => {\n    //         getSeriesPage()\n    //             .then((response) => {\n    //                 page.addStrips(createPageComponents(response));\n    //                 return true;\n    //             })\n    //     },\n    //     widgets: ['menu', 'detail']\n    // },\n    {\n        path: 'search',\n        component: Search,\n        widgets: ['inputfield'],\n        on: async (page) => {\n            page.tag('Content').itemType = Item;\n            page.onSearch = async (input) => {\n                return getSearchResults(input)\n                    .then((response) => {\n                        return createItemCollection(response, 'movie');\n                    });\n            }\n            return true;\n        },\n        widgets: ['inputfield', 'detail']\n    },\n    {\n        path: 'detail/:mediaType/:mediaId',\n        component: Detail,\n        before: async (page, {mediaType, mediaId}) => {\n            getDetailPage(mediaType, mediaId)\n                .then((response) => {\n                    const dataItem = applyItemModel(response);\n                    page.widgets.detail.show(dataItem);\n                    page.widgets.detail.showMore(dataItem);\n                    return true;\n                });\n        },\n        widgets: ['detail']\n    },\n    {\n        path: 'player/:mediaType/:mediaId',\n        component: Player,\n        before: async (page, {mediaType, mediaId}) => {\n            getVideo(mediaType, mediaId)\n                .then((response) => {\n                    const dataItem = applyPlayerModel(response);\n                    page.setData(dataItem);\n                    return true;\n                })\n        },\n        widgets: ['dialog']\n    },\n    {\n        path: '$',\n        component: Splash\n    },\n]\n\nexport default {\n    root: routes[0].path,\n    routes\n}","import { Utils, Router } from '@lightningjs/sdk';\nimport { Menu, InputField, Detail, Dialog } from './widgets';\nimport routerConfig from './lib/routerConfig.js';\nimport { Backdrop, AmbientBackground } from './components';\n\nexport default class App extends Router.App{\n  static getFonts() {\n    return [\n      { family: 'Regular', url: Utils.asset('fonts/Montserrat-Regular.ttf') },\n      { family: 'Medium', url: Utils.asset('fonts/Montserrat-Medium.ttf') },\n      { family: 'Bold', url: Utils.asset('fonts/Montserrat-Bold.ttf') },\n      { family: 'MediumItalic', url: Utils.asset('fonts/Montserrat-MediumItalic.ttf') }\n    ]\n  }\n\n  static _template() {\n    return {\n      Content: { zIndex: 1, rtt: true, w: 1920, h: 1080,\n        AmbientBackground: {type: AmbientBackground},\n        Backdrop: {type: Backdrop},\n        Pages: {\n          forceZIndexContext: true\n        }\n      },\n      Loading: {\n\n      },\n      Widgets: {\n        Menu: {\n          type: Menu, visible: true\n        },\n        InputField: {\n          type: InputField, visible: true\n        },\n        Detail: {\n          type: Detail, visible: true\n        },\n        Dialog: {\n          visible: false, type: Dialog, zIndex: 101\n        },\n      }\n    }\n  }\n\n  _handleAppClose() {\n    const dialog = this.tag('Dialog');\n    dialog.open({header: \"Closing App?!\", message: \"Are you sure you want to close the app?\", actions: [\n        {\n            label: 'No',\n            action: () => {\n                dialog.close();\n            }\n        },\n        {\n            label: 'Yes',\n            action: () => {\n                this.application.closeApp();\n            }\n        }\n    ]});\n  }\n\n  $getDetailWidget() {\n    return this.tag('Widgets.Detail');\n  }\n\n  $getAppContentTexture() {\n    return this.tag('Content').getTexture();\n  }\n\n  $updateBackdrop(e) {\n    this.tag('Backdrop').update(e.id);\n  }\n\n  $updateAmbientBackground(e) {\n    this.tag('AmbientBackground').update(e.color);\n  }\n\n  $hideBackground() {\n    this.tag('Content').patch({\n      AmbientBackground: {smooth: {alpha: [0, {duration: 0.2, delay: 0.0}]}},\n      Backdrop: {smooth: {alpha: [0, {duration: 0.2, delay: 0.0}]}}\n    });\n  }\n\n  $showBackground() {\n    this.tag('Content').patch({\n      AmbientBackground: {smooth: {alpha: [1, {duration: 0.2, delay: 0.2}]}},\n      Backdrop: {smooth: {alpha: [1, {duration: 0.2, delay: 0.2}]}}\n    });\n  }\n\n  _setup() {\n    Router.startRouter(routerConfig, this);\n  }\n\n  static colors() {\n    return true;\n  }\n}\n","/**\n * Copyright 2021 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Launch } from '@lightningjs/sdk'\nimport App from './App.js'\n\nexport default function() {\n  return Launch(App, ...arguments)\n}\n"],"names":["settings","subscribers","initSettings","appSettings","platformSettings","publish","key","value","forEach","subscriber","dotGrab","obj","undefined","keys","split","i","length","Object","get","type","fallback","val","has","set","subscribe","callback","push","unsubscribe","index","findIndex","cb","splice","clearSubscribers","getOwnPropertyNames","prepLog","args","colors","Info","Debug","Warn","Error","Array","from","shift","info","Settings","console","log","apply","arguments","debug","error","warn","method","context","result","e","then","Promise","resolve","reject","sendMetric","event","params","Log","initMetrics","config","metrics","app","page","user","media","errorMetric","message","code","visible","Metric","events","options","reduce","name","Metrics","types","url","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","timeupdate","volumechange","waiting","sourceObject","setup","ready","doSetup","getOwnPropertyDescriptor","__defineGetter__","__defineSetter__","timeout","delay","clearTimeout","setTimeout","basePath","proxyUrl","initUtils","ensureUrlWithProtocol","makeFullStaticPath","window","location","pathname","path","asset","relPath","makeQueryString","test","protocol","origin","charAt","cleanUpPathName","substr","slice","parts","indexOf","pop","join","operator","map","encodeURIComponent","initProfile","lng","mediaUrl","initMediaPlayer","Mediaplayer","Lightning","Component","_construct","_skipRenderToTexture","_metrics","_textureMode","_template","Video","VideoWrap","VideoTexture","pivot","texture","textures","StaticTexture","skipRenderToTexture","v","textureMode","videoView","tag","_init","videoEls","document","getElementsByTagName","videoEl","createElement","setAttribute","style","position","zIndex","display","visibility","body","appendChild","_createVideoTexture","eventHandlers","_registerListeners","handler","currentTime","fire","videoElement","addEventListener","_deregisterListeners","removeEventListener","_attach","_detach","close","stage","gl","glTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","videoTexture","source","w","width","h","height","_startUpdatingVideoTexture","_updateVideoTexture","videoWidth","active","Date","getTime","frameCount","webkitDecodedFrameCount","mustUpdate","_lastFrame","_lastTime","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","videoTextureView","videoHeight","expectedAspectRatio","realAspectRatio","scaleX","scaleY","_stopUpdatingVideoTexture","forceRenderUpdate","_updatingVideoTexture","on","removeListener","clearColor","clear","COLOR_BUFFER_BIT","updateSettings","_consumer","consumer","getMediaplayerSettings","assign","Utils","equalValues","_stream","stream","keySystem","navigator","requestMediaKeySystemAccess","id","keySystemAccess","createMediaKeys","createdMediaKeys","setMediaKeys","src","open","catch","Hls","isSupported","_hls","liveDurationInfinity","loadSource","attachMedia","_setHide","hide","_setVideoArea","videoPos","setSmooth","videoPosition","application","noVideo","getAttribute","removeAttribute","load","_clearSrc","playPause","isPlaying","doPause","doPlay","muted","loop","_getState","reload","getPosition","setPosition","pos","getDuration","duration","seek","time","absolute","_videoPos","patch","smooth","x","y","precision","getRenderPrecision","left","Math","round","top","_fireConsumer","_equalInitData","buf1","buf2","byteLength","dv1","Int8Array","dv2","_setState","video","mediaKeys","_previousInitData","initData","_states","Playing","$enter","$exit","Paused","localCookie","constructor","forceCookies","_checkIfLocalStorageWorks","getItem","_getItemLocalStorage","setItem","_setItemLocalStorage","removeItem","_removeItemLocalStorage","_clearLocalStorage","_getItemCookie","_setItemCookie","_removeItemCookie","_clearCookies","localStorage","t","cookie","match","RegExp","replace","o","r","toUTCString","initStorage","namespace","lc","hasRegex","isWildcard","hasLookupId","isNamedGroup","stripRegex","route","char","createRegister","flags","reg","Map","getOwnPropertySymbols","Request","hash","navArgs","storeCaller","_hash","_storeCaller","_register","_isCreated","_isSharedInstance","_cancelled","_copiedHistoryState","isObject","isBoolean","symbols","store","cancel","register","_route","provider","_provider","providerType","_providerType","_page","isCreated","isSharedInstance","isCancelled","copiedHistoryState","Route","acc","isFunction","_cfg","request","component","widgets","cache","hook","beforeNavigate","getFloor","getRoutesByFloor","floor","matches","routes","entries","getRouteByHash","getUrlParts","candidates","hashParts","regexStore","filter","isMatching","regMatches","fullRoute","regex","lookupId","substring","routeParts","j","routePart","hashPart","routeMatches","exec","storeId","routeRegex","expression","modifiers","toLowerCase","sort","a","routeExists","getValuesFromHash","getNamedGroup","storage","decodeURIComponent","getOption","stack","prop","hasOwnProperty","createRoute","preventStorage","bootRequest","after","createRequest","getHashByName","to","getRouteByName","hasDynamicGroup","query","objectToQueryString","keepActivePageAlive","isString","getRoutes","routeOptions","keepAlive","isArray","ucfirst","activeWidget","getReferences","widgetsHost","widget","ref","updateWidgets","configured","emit","state","getWidgetByName","getByRef","focusWidget","setActiveWidget","restoreFocus","getActiveWidget","instance","createComponent","c","history","updateHistory","getActiveHash","forceNavigateStore","activeRoute","toStore","locationInHistory","stateObject","getStateObject","getActivePage","routerConfig","getRouterConfig","prev","getHistoryState","record","replaceHistoryState","historyState","getHistory","setHistory","arr","isMergeableObject","isNonNullObject","isSpecial","stringValue","prototype","toString","call","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","target","concat","element","getMergeFunction","customMerge","getEnumerableOwnPropertySymbols","symbol","propertyIsEnumerable","getKeys","propertyIsOnObject","object","property","_","propertyIsUnsafe","mergeObject","destination","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmergeAll","array","next","deepmerge_1","cjs","warned","deprecated","force","Locale","__enabled","fetch","resp","json","loadFromObject","setLanguage","lang","language","tr","__trObj","trObj","fallbackLanguage","values","str","LocalizedString","String","format","sub","string","arg","VersionLabel","rect","color","mount","Text","text","fontSize","lineHeight","_firstActive","version","sdkVersion","loadTexture","renderWidth","renderHeight","FpsIndicator","Tools","getRoundRect","Background","Counter","textAlign","_setup","interval","threshold","fps","lastFps","fpsCalculator","dt","off","setInterval","showFps","bind","clearInterval","abs","bgColor","meta","translations","initLanguage","file","response","setTranslations","default","translationsObj","registry","eventListeners","timeouts","intervals","targets","timeoutId","clearTimeouts","intervalId","clearIntervals","targetIndex","fn","removeEventListeners","_event","getRgbaComponents","argb","g","b","mergeColors","c1","c2","p","r1","g1","b1","a1","r2","g2","b2","a2","calculateAlpha","getArgbNumber","rgba","max","min","argbToHSLA","col","s","l","maxMin","hslaToARGB","hsla","minMax","sextant","fract","minMaxFract","mid1","mid2","white","black","red","green","blue","yellow","cyan","magenta","normalizedColors","addColors","colorsToAdd","cleanUpNormalizedColors","initColors","normalizeColorToARGB","targetColor","check","hex","Color","generate","alpha","percentage","darker","hsl","lighter","saturation","lightness","hue","degrees","mix","AppInstance","defaultOptions","canvas2d","defaultFontFace","innerHeight","customFontFaces","fontLoader","fonts","family","urls","descriptors","fontFace","FontFace","add","promise","App","appData","Application","Deepmerge","loadFonts","getFonts","locale","getLocale","loadLanguage","loadColors","loaded","forceZIndexContext","showVersion","childList","_refocus","FpsCounter","_handleBack","closeApp","_handleExit","onClose","Registry","remove","cleanupFonts","gc","destroy","delete","focus","_focussed","_getFocused","pagesHost","rootHash","updateHash","beforeEachRoute","afterEachRoute","components","initialised","activePage","activeHash","lastAcceptedHash","previousState","mixin","pages","children","step","preventDefault","bootRouter","appInstance","isPage","getConfigMap","init","cleanHash","isComponentConstructor","root","boot","bootComponent","storeComponent","getComponent","mustUpdateLocationHash","size","updateConfig","onRequestResolved","cleanUp","setActivePage","navigateQueue","lazyDestroy","destroyOnBack","isFromHistory","backtrack","doCleanup","_routedType","scale","getActiveRoute","getLastHash","setLastHash","getPreviousState","getRootHash","getBootRequest","Element","toUpperCase","isPromise","routerSettings","isObj","getQueryStringParams","resumeHash","getResumeHash","parse","getQuery","search","hashParams","urlParams","URLSearchParams","fromHistory","expires","resume","queryParams","dataHooks","execProvider","before","emitProvided","addPersistData","now","urlValues","pageData","k","persist","isPageExpired","hasProvider","getProvider","fade","transition","crossFade","moveOnAxes","axis","direction","bounds","up","down","right","executeTransition","pageIn","pageOut","pageTransition","easing","hasCustomTransitions","smoothIn","smoothInOut","transitionsDisabled","Transitions","expired","loader","handleError","isConstruct","provide","mustReuse","currentRoute","loadType","navigate","opt","RoutedApp","Pages","Loading","Label","Widgets","_widget","_handleKey","Router","focusPage","forcedHash","startRouter","registerListener","start","getHash","bootKey","isDirectLoad","res","queue","handleHashChange","failedHash","handleBootError","setHash","override","queueId","resolveHashChange","contents","module","level","isNaN","_handleAppClose","hashLastPart","isNavigating","isProcessing","initRouter","go","back","setupRoutes","defaultChannels","number","description","entitled","program","title","startTime","ageRating","channels","randomChannel","random","currentChannel","callbacks","methods","getChannel","channel","getProgram","setChannel","newChannel","find","initTV","initPurchase","billingUrl","PinInput","shader","shaders","RoundedRectangle","radius","Nr","textColor","verticalAlign","nr","_timeout","PinDialog","Dialog","Msg","Code","pin","_pin","maskedPin","fill","msg","_msg","parseInt","Pin","_handleEnter","submit","unlocked","contextItems","initPin","pinDialog","contextCheck","includes","show","ApplicationInstance","child","locked","plugins","profile","mediaPlayer","initVideoPlayer","ads","initAds","router","tv","purchase","_videoEl","isVisible","getVideoPlaybackQuality","totalVideoFrames","stop","adsEnabled","_playingAds","playingAds","fireOnConsumer","skipTime","playAfterSeek","hooks","videoPlayerPlugin","deregisterEventListeners","withPrecision","fireHook","customLoader","customUnloader","unloader","setupVideoTag","setUpVideoTexture","el","addAt","registerEventListeners","loaderFn","unloaderFn","parseFloat","area","bottom","canInteract","adConfig","enabled","videoId","caid","Ads","prerolls","executeAsPromise","mute","looped","skip","seconds","easeExecution","enableAds","Infinity","autoSetupMixin","getAds","midrolls","postrolls","playSlot","slot","ad","playAd","timeEvents","cleanup","handlers","sendBeacon","firstQuartile","midPoint","thirdQuartile","status","videoPlayerConsumer","preroll","ScaledImageTexture","ImageTexture","_scalingOptions","resizeMode","_getLookupId","_src","getNonDefaults","imageUrl","imageServerUrl","make","setOptions","imageQuality","exact","landscape","portrait","cover","contain","original","resetDur","isRunning","targetValue","reset","animation","scope","extractCommonColor","fb","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","tmp","Uint8Array","offset","n","readPixels","StageUtils","deleteFramebuffer","filtered","availableColors","SwirlShader","WebGLDefaultShader","ctx","_blur","_pull","pull","redraw","blur","setupUniforms","operation","_start","_setUniform","uniform1f","period","PI","fragmentShaderSource","AmbientBackground","Colors","Swirl","_changeColor","prevColor","_targetColor","_colorAnimation","actions","update","Button","stroke","strokeColor","fillColor","blend","Content","wrap","icon","_icon","content","whiteAlpha","_focusAnimation","_focus","_unfocus","_baseUrl","_headers","_tmdbBaseUrl","_params","_executeRequest","retryCounter","headers","exceptions","xhr","XMLHttpRequest","setRequestHeader","onload","JSON","onerror","ontimeout","send","_request","stringify","qsify","ec","getRequest","postRequest","groupByGenre","list","cur","genres","capitalize","_fetchPageData","queryTemplate","itemParams","data","moviesList","groupedMovies","movies","media_type","items","getSearchResults","trim","gqlQuery","moviesSearch","results","getHomePage","getBackdropUrl","imdbId","external_source","movie_results","movie","backdrop_path","getDetailPage","mediaType","mediaId","movieById","getVideo","getMovieFile","videoUrl","filePath","destroyMovieTorrent","movieId","isDestroyed","Backdrop","ImgSource","FadeOut","transitions","_targetSrc","backdrop","_transitionAlpha","_backdrop","_backdropLoaded","_animateBackdrop","fireAncestors","_imgSource","_imgSrcLoaded","nativeTexture","_loadSrc","_baseColor","_extractedColor","_debounce","_loadTextures","Img","backdropUrl","Item","Focus","colorBottom","colorTop","Poster","item","poster","marginRight","marginBottom","ItemDescription","Wrapper","flex","ItemTitle","maxLines","_item","_update","_fadeAnimation","_active","stopNow","Page","_pageTransition","hideBackground","_inactive","navCheck","CollectionWrapper","_direction","DIRECTION","row","_scrollTransitionSettings","createSettings","_spacing","_autoResize","_requestingItems","_requestThreshold","_requestsEnabled","_gcThreshold","_gcIncrement","_forceLoad","_updateScrollTransition","wrapper","_scrollTransition","_indexChanged","previousIndex","previous","dataLength","mainIndex","previousMainIndex","lines","signal","enableRequests","scrollCollectionWrapper","setIndex","limitWithinRange","_items","_index","_uids","hadChildren","_collectGarbage","_normalizeDataItems","plotItems","hasItems","assignedID","removeAt","amount","reposition","_repositionDebounce","repositionItems","_attemptNavigation","first","last","directionIsRow","main","mainDim","mainMarginFrom","mainMarginTo","_getPlotProperties","cw","currentItemWrapper","bound","sizes","_getItemSizes","marginFrom","margin","marginTo","scroll","_scroll","jump","backward","forward","mod","actualSize","backwardBound","_normalizePixelToPercentage","forwardBound","$childInactive","componentIndex","$getChildComponent","_resizeWrapper","crossSize","crossDim","lastItem","_generateUniqueID","mainDirection","crossDirection","cross","crossMarginTo","crossMarginFrom","itemType","__attached","marginLeft","marginTop","immediate","_normalizeDataItem","label","collectionWrapper","isAlive","_handleRight","_handleLeft","_handleUp","_handleDown","forceLoad","bool","requestingItems","requestThreshold","num","gcThreshold","currentItem","itemWrappers","scrollTransition","scrollTo","autoResize","spacing","column","Cursor","_blink","_blinkAnimation","repeat","blink","ItemWrapper","clipbox","create","marginUp","hasFocus","KeyWrapper","currentKey","action","_key","keyType","Grid","_crossSpacing","_mainSpacing","_rows","_columns","_mainIndex","_crossIndex","crossIndex","previousCrossIndex","_findLocationOfIndex","_lines","mainPos","crossPos","lineIndex","animateItems","viewboundMain","viewboundCross","renderContext","core","cl","newChildren","targetCrossFromMargin","bil","_getBiggestInLine","tcp","existingItemWrapper","newItem","assignedX","assignedY","biggestInLastLine","line","biggestItem","overCross","targetMainIndex","targetCrossIndex","_previous","targetLine","realIndex","m","targetItem","rows","columns","crossSpacing","mainSpacing","InputField","PreLabel","PostLabel","_input","_previousInput","_description","_cursorX","_cursorIndex","preLabel","cursor","postLabel","positionCursor","mountX","onInputChanged","input","hasInput","pre","post","cursorIndex","inputText","_inputText","Key","_backgroundColors","_labelColors","_data","labelText","_labelText","labelColors","backgroundColors","background","focused","unfocused","labelFocused","labelUnfocused","Keyboard","Keys","_inputField","_maxCharacters","resetFocus","_columnIndex","_rowIndex","_previousKey","_keys","layouts","buttonTypes","styling","_config","_layout","horizontalSpacing","verticalSpacing","align","rowPosition","isEvent","hasLabel","rowIndex","rowHorizontalSpacing","rowAlign","keyPosition","rowHeight","rowKeys","keyIndex","keySpacing","currentPosition","keyboard","rowOffset","rowMount","currentKeyWrapper","targetFound","_findKey","eventFunction","_changeInput","eventData","previousInput","layout","attached","inputField","isComponent","currentRow","currentRowIndex","currentColumnIndex","targetRow","currentX","keyX","onSpace","onBackspace","onClear","onLayout","currentInputField","currentLayout","maxCharacters","List","Strip","pivotX","pivotY","_transitionLabel","_labelAnimation","parentIndex","cparent","Detail","Title","renderOffscreen","DescriptionWrapper","Description","DescriptionFull","MoreInfo","LargePoster","PlayButton","Runtime","MoreInfo2","TitleInfo","moreInfo","fullDescription","finalY","showMore","_loadingData","number_of_episodes","number_of_seasons","large_poster","runtime","titleInfo","genre","formatted","BaseKey","mountY","IconKey","Icon","rtt","FastBlur","FastBlurComponent","MirrorContent","Labels","Header","bindProp","Message","wordWrap","Buttons","signals","onItemsRepositioned","_blurContent","mirror","enableClipping","current","_actions","header","Menu","Shadow","RadialShadow","RadialGradient","innerColor","outerColor","focusDefaultPosition","Lighting","onIndexChanged","MenuItem","selected","_focusTransitionH","_focusTransitionY","_pivotAnimation","_focusMenuAnimation","_selectedIndex","_navigatingDirection","targetMount","_navigatingTo","_pivotValue","_anim","_onActivated","currentRouteIndex","finish","_updateFocusAnimation","_selected","isActive","onPositionChanged","comp","mirroredContent","positionX","Input","_minimize","maximize","_minized","minimize","CutOut","_ic","_normalizedIC","_getNormalizedColor","_oc","_normalizedOC","getRgbaComponentsNormalized","Float32Array","uniform4fv","Splash","Logo","V","O","D","ExampleApp","_openAnimation","Main","menu","$updateItemTitle","addStrips","_hasData","Layout","Backspace","Space","Search","keyboardConfig","SearchGrid","inputfield","grid","_clearSearchTimeout","_startSearchTimeout","_searchTimeout","_doSearch","onSearch","_hideKeyboard","detail","Player","Placeholder","ScreenBlock","Overlay","Top","Bottom","PlayerButtons","Progressbar","Frame","Troth","TimeLeft","CurrentTime","setData","showError","initializeVideo","dialog","buttons","playerButtons","_progressAnimation","VideoPlayer","_showOverlay","_startOverlayTimeout","_updatePlayButton","_hideScreenBlock","_showScreenBlock","blackAlpha","_hideControls","stopMethod","_clearOverlayTimeout","_overlayTimeout","toPlay","$videoPlayerPlaying","formatTime","toISOString","$videoPlayerTimeUpdate","formattedCurrentTime","formattedTimeLeft","$videoPlayerEnded","$videoPlayerPlay","$videoPlayerPause","$videoPlayerStop","$videoPlayerError","currentButton","_captureKey","backgroundColor","createPageComponents","strips","createItemCollection","applyItemModel","images","posterUrl","bannerUrl","fanartUrl","applyPlayerModel","dataItem","$getDetailWidget","$getAppContentTexture","getTexture","$updateBackdrop","$updateAmbientBackground","$hideBackground","$showBackground","Launch"],"mappings":"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"}